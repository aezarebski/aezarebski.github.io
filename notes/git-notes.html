<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-12-31 Thu 12:02 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>aez-notes</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Alex Zarebski" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet-dark.css" />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">aez-notes</h1>
<p>
<a href="../index.html">Home</a>
</p>

<button type="button" onclick="setStyleSheet('../css/stylesheet.css')">Light</button>
<button type="button" onclick="setStyleSheet('../css/stylesheet-dark.css')">Dark</button>

<script>
    function setStyleSheet(url){
       var stylesheet = document.getElementById("stylesheet");
       stylesheet.setAttribute('href', url);
    }
</script>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb82815a">Git notes</a>
<ul>
<li><a href="#org94838a5">Listing the files git cares about</a></li>
<li><a href="#org0c2d005">Listing when a file was first added to a repository</a></li>
<li><a href="#orge20c392"><span class="underline">UNDO A COMMIT</span></a></li>
<li><a href="#org1f5ddfe">Repository and file sizes</a></li>
<li><a href="#orgcb28f35">Bringing fork up to date</a></li>
<li><a href="#org2406909">Branches</a></li>
<li><a href="#org072e7e1">Magit via spacemacs</a></li>
<li><a href="#orga58231b">Editor</a></li>
</ul>
</li>
</ul>
</div>
</div>


<div id="org9a2423c" class="figure">
<p><img src="../images/git-logo.png" alt="git-logo.png" />
</p>
</div>

<div id="outline-container-orgb82815a" class="outline-2">
<h2 id="orgb82815a">Git notes</h2>
<div class="outline-text-2" id="text-orgb82815a">
</div>
<div id="outline-container-org94838a5" class="outline-3">
<h3 id="org94838a5">Listing the files git cares about</h3>
<div class="outline-text-3" id="text-org94838a5">
<div class="org-src-container">
<pre class="src src-sh">git ls-files 
</pre>
</div>
</div>
</div>

<div id="outline-container-org0c2d005" class="outline-3">
<h3 id="org0c2d005">Listing when a file was first added to a repository</h3>
<div class="outline-text-3" id="text-org0c2d005">
<div class="org-src-container">
<pre class="src src-sh">git log --diff-filter=A -- &lt;path/to/file&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orge20c392" class="outline-3">
<h3 id="orge20c392"><span class="underline">UNDO A COMMIT</span></h3>
<div class="outline-text-3" id="text-orge20c392">
<p>
There is an <code>amend</code> function for modifying an existing commit. If you want to
completely undo the last commit though, issue the following command
</p>

<div class="org-src-container">
<pre class="src src-shell">git reset --hard HEAD~1
</pre>
</div>

<p>
Or if you want to go back to a particular commit, issue the following command
</p>

<div class="org-src-container">
<pre class="src src-shell">git reset --hard &lt;commit-sha&gt;
</pre>
</div>

<p>
The <code>--hard</code> part is so that the changes made are removed, if you wanted to keep
the changes it would be <code>--soft</code>.
</p>
</div>
</div>

<div id="outline-container-org1f5ddfe" class="outline-3">
<h3 id="org1f5ddfe">Repository and file sizes</h3>
<div class="outline-text-3" id="text-org1f5ddfe">
<p>
GitHub <a href="https://docs.github.com/en/github/managing-large-files/what-is-my-disk-quota">recommends</a> that repositories are kept below 1GB and that individual files
are all kept below 100MB. There are ways around this, but this sensible to keep
things running smoothly.
</p>
</div>
</div>

<div id="outline-container-orgcb28f35" class="outline-3">
<h3 id="orgcb28f35">Bringing fork up to date</h3>
<div class="outline-text-3" id="text-orgcb28f35">
<div class="org-src-container">
<pre class="src src-shell">git remote add upstream &lt;URL&gt;
git fetch upstream
git merge upstream/master master
</pre>
</div>

<p>
Keep in mind that this only brings your local repository up to date, you still
need to push this if you want the other clones to be up to date. Also, this can
be a slow process if your fork is a long way behind, so it might be wise to do
this regularly.
</p>
</div>
</div>

<div id="outline-container-org2406909" class="outline-3">
<h3 id="org2406909">Branches</h3>
<div class="outline-text-3" id="text-org2406909">
</div>
<div id="outline-container-orga97c20c" class="outline-4">
<h4 id="orga97c20c">Finalising a merge</h4>
<div class="outline-text-4" id="text-orga97c20c">
<p>
The tool <code>meld</code> is a GUI which greatly simplifies the task of refining what code
to take from which branch. Suppose you are on branch <code>X</code> and you want to pull
some stuff over from branch <code>Y</code>. Check out branch <code>X</code> and run the following 
</p>

<div class="org-src-container">
<pre class="src src-sh">git difftool Y 
</pre>
</div>

<p>
This will ask you if you want to use meld to resolve difference for the files
with differences. You can install <code>meld</code> with your package manager on linux.
</p>
</div>
</div>

<div id="outline-container-org43ebf49" class="outline-4">
<h4 id="org43ebf49">Query</h4>
<div class="outline-text-4" id="text-org43ebf49">
<p>
The following shows a visualisation of the commits among all the branches.
</p>

<div class="org-src-container">
<pre class="src src-shell">git log --all --decorate --oneline --graph
</pre>
</div>

<p>
To get a list of the filenames of the files that differ between commits use the
following
</p>

<div class="org-src-container">
<pre class="src src-shell">git diff --name-only SHA1 SHA2
</pre>
</div>

<p>
You can also get a list of just the names of the files that differ between your
current branching with the following command.
</p>

<div class="org-src-container">
<pre class="src src-sh">git diff &lt;otherBranchName&gt; --name-only  
</pre>
</div>
</div>
</div>

<div id="outline-container-org4eed918" class="outline-4">
<h4 id="org4eed918">Cautious merging</h4>
<div class="outline-text-4" id="text-org4eed918">
<p>
You can merge a branch without committing the results and squashing the commits
in the branch with the following
</p>

<div class="org-src-container">
<pre class="src src-shell">git merge --squash --no-commit &lt;branch&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd3183bd" class="outline-4">
<h4 id="orgd3183bd">Squashing commits</h4>
<div class="outline-text-4" id="text-orgd3183bd">
<p>
Suppose you have a <code>master</code> branch and a <code>feature-messy</code> branch. The
<code>feature-messy</code> branch has a bunch of messy commits. The following steps allow
you to include all the work from <code>feature-messy</code> into a single commit in a new
branch, <code>feature-neat</code>, which can then be merged into master without looking
messy.
</p>

<div class="org-src-container">
<pre class="src src-shell">git checkout master
git checkout -b feature-neat
git checkout feature-neat
git merge --squash feature-messy
git commit <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">This step may require more attention</span>
git checkout master
git merge feature-neat
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc4607f5" class="outline-4">
<h4 id="orgc4607f5">Updating a feature branch</h4>
<div class="outline-text-4" id="text-orgc4607f5">
<p>
Suppose after working on <code>feature-branch</code> for a while you want to bring it up to
date with changes that have happened on <code>master</code>. The following is taken for a
<a href="https://gist.github.com/santisbon/a1a60db1fb8eecd1beeacd986ae5d3ca#file-update-branch-md">gist</a> explaining how to do just that!
</p>

<div class="org-src-container">
<pre class="src src-shell">git checkout master
git fetch -p origin 
git merge origin/master 
git checkout &lt;feature-branch&gt; 
git merge master 
git push origin &lt;feature-branch&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orga83c397" class="outline-4">
<h4 id="orga83c397">Checking out edits to single files</h4>
<div class="outline-text-4" id="text-orga83c397">
<p>
Suppose you are on branch <code>X</code> and there are edits to files <code>f1</code> and <code>f2</code> that
you want from branch <code>Y</code>. To pull those edits over you can do the following.
</p>

<div class="org-src-container">
<pre class="src src-sh">git checkout X                  <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">we need to be on X</span>
git checkout Y f1 f2            <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">checkout out the edited files</span>
git commit -m <span style="color: #2d9574;">"Pull edits over"</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Profit!</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org072e7e1" class="outline-3">
<h3 id="org072e7e1">Magit via spacemacs</h3>
<div class="outline-text-3" id="text-org072e7e1">
<p>
I have some notes on the <a href="../notes/spacemacs-notes.html">magit</a> git client too!
</p>
</div>
</div>
<div id="outline-container-orga58231b" class="outline-3">
<h3 id="orga58231b">Editor</h3>
<div class="outline-text-3" id="text-orga58231b">
<p>
The following command should set vim as the default editor on a machine.
</p>

<div class="org-src-container">
<pre class="src src-sh">git config --global core.editor <span style="color: #2d9574;">"vim"</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Alex Zarebski</p>
<p class="date">Created: 2020-12-31 Thu 12:02</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
