<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-02-21 Fri 17:49 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linux notes</title>
<meta name="author" content="Alexander E. Zarebski" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="icon" type="image/png" href="../resources/nicemacs-favicon.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
<link rel="stylesheet" href="../microgram.css">
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Linux notes</h1>
<p>
<a href="../index.html">Home</a>
</p>


<div id="org8cd8eaf" class="figure">
<p><img src="../images/linux-logo.png" alt="linux-logo.png" width="250px" />
</p>
</div>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org1015156">Desktop Environment</a>
<ul>
<li><a href="#orgffab3ce">MATE</a></li>
</ul>
</li>
<li><a href="#orged4139b">Linux and Ubuntu notes</a>
<ul>
<li><a href="#org625258d">Setting up a server</a></li>
<li><a href="#researcher-desktop">The Melbourne Researcher Desktop</a></li>
<li><a href="#orgf0a96d0">ImageMagick and <code>convert</code></a></li>
<li><a href="#orga6d195b">Dconf Editor</a></li>
<li><a href="#org9399c60">Updating Ubuntu</a></li>
<li><a href="#orgb34e291">System information</a></li>
<li><a href="#orgb9eb3cd">USB</a></li>
<li><a href="#orgeb88b15">Compression with zip</a></li>
<li><a href="#orgcce571f">Graphics (PNG, SVG, &#x2026;)</a></li>
<li><a href="#org1ab9016">Working with <span class="underline">PDF</span></a></li>
<li><a href="#orgf5a24b3">Fonts</a></li>
<li><a href="#org42c7f8d">Filesystem</a></li>
<li><a href="#screen"><code>screen</code></a></li>
<li><a href="#org8e1b7aa">Finding your IP address</a></li>
<li><a href="#orgc49c5ac"><code>scp</code></a></li>
<li><a href="#org1585f9c">Symlinks</a></li>
<li><a href="#org4f92ed7">Searching files with <code>grep</code></a></li>
<li><a href="#orgfe9ea66">Watching files with <code>inotifywait</code></a></li>
<li><a href="#orgc1bf69c">Monitor configuration</a></li>
<li><a href="#org3ca0d67">Keyboard configuration</a></li>
<li><a href="#org2f7f99f">Network connection Wi-Fi</a></li>
<li><a href="#orgbe40dc9">Disk usage: <code>du</code></a></li>
<li><a href="#org4646640">Disk usage: <i>Disk Usage Analyzer</i></a></li>
<li><a href="#org675b1f5">Monitoring processes with <code>htop</code></a></li>
<li><a href="#org853d7ba">Viewing hierarchy <code>tree</code></a></li>
<li><a href="#org5019e83"><code>rsync</code></a></li>
<li><a href="#orgcdbd8ab">Getting help</a></li>
<li><a href="#bashrc">Start up and configuration: the might <code>.bashrc</code> file</a></li>
<li><a href="#org900ab3b">Accounts</a></li>
<li><a href="#orgf313de1">Bluetooth</a></li>
<li><a href="#orgc357107">Colour selection and hexcodes</a></li>
</ul>
</li>
<li><a href="#org9c46ebe">Packages</a>
<ul>
<li><a href="#org8d602c4">Removing a PPA</a></li>
<li><a href="#org038da8b">Installingfrom a <code>.deb</code> file</a></li>
<li><a href="#orgdf98a9b">Uninstalling packages</a></li>
<li><a href="#org2e668d9">AppImage</a></li>
<li><a href="#org1972968"><code>youtube-dl</code></a></li>
<li><a href="#org8d4270a"><span class="todo TODO">TODO</span> Browsers</a></li>
</ul>
</li>
<li><a href="#org52d8a39">Scripting</a>
<ul>
<li><a href="#org6fae186">Bioinformatics one-liners</a></li>
<li><a href="#orgeb53af2">Control flow</a></li>
<li><a href="#orgb8f158c">Running things in parallel by backgrounding</a></li>
<li><a href="#orgfffbeb8">Arguments</a></li>
<li><a href="#org9660b3d">Functions</a></li>
<li><a href="#org0159b56">Loops</a></li>
<li><a href="#org5c492e6">Quiptic compiler</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org1015156" class="outline-2">
<h2 id="org1015156">Desktop Environment</h2>
<div class="outline-text-2" id="text-org1015156">
</div>
<div id="outline-container-orgffab3ce" class="outline-3">
<h3 id="orgffab3ce">MATE</h3>
<div class="outline-text-3" id="text-orgffab3ce">
<p>
This is a nice lightweight environment once you have adjusted the shortcuts to
be more familiar. In addition to the <i>Control Center</i>, there is <code>mate-tweak</code>
which provides a GUI for additional customisation.
</p>
</div>

<div id="outline-container-org54789ba" class="outline-4">
<h4 id="org54789ba">Panel</h4>
<div class="outline-text-4" id="text-org54789ba">
<p>
The following command should replace the current panel with a new copy of it:
<code>mate-panel --replace &amp;</code>. This may help if your panel disappears for some
reason.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orged4139b" class="outline-2">
<h2 id="orged4139b">Linux and Ubuntu notes</h2>
<div class="outline-text-2" id="text-orged4139b">
</div>
<div id="outline-container-org625258d" class="outline-3">
<h3 id="org625258d">Setting up a server</h3>
<div class="outline-text-3" id="text-org625258d">
<ul class="org-ul">
<li>See <a href="#researcher-desktop">these notes</a> on how to set up a University of Melbourne
<i>Researcher Desktop</i>.</li>
<li>See <a href="#screen">these notes</a> on the use of <code>screen</code>.</li>
<li>See <a href="#bashrc">these notes</a> on configuration with your <code>.bashrc</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-researcher-desktop" class="outline-3">
<h3 id="researcher-desktop">The Melbourne Researcher Desktop</h3>
<div class="outline-text-3" id="text-researcher-desktop">
<ol class="org-ol">
<li>Create a <i>Linux Researcher Desktop</i> via the <i>Research Computing
Portal</i> and make a note of the <b>IP address</b> of the server.</li>
<li>Add the host to your SSH configuration, <code>~/.ssh/config</code>, using the
example <a href="#orgb6d76d9">below</a>. SSH into the server with <code>ssh &lt;hostalias&gt;</code>.</li>
<li>Run <code>sudo apt update</code> and <code>sudo apt upgrade</code> and install the
following packages: <code>htop screen tree</code>.</li>
<li>Install <i>Miniconda</i> using the instructions on the Anaconda website.
My <a href="./python-notes.html">conda notes</a> might be useful at this point. (Basically, this is
running their shell script then running the initialisation
command.)</li>
<li>Configure your file manager to connect to the server. For GNOME
files you can ask it to connect to <code>sftp://hostalias</code>. In
<code>~/.bashrc</code> add prompt configuration <a href="#org124315e">below</a>.</li>
</ol>

<pre class="example" id="orgb6d76d9">
Host myDemoHost
        Hostname vm-XXX-XX-XXX-XX.desktop.cloud.unimelb.edu.au
        User azarebski
</pre>

<p>
In this example <code>XXX-XX-XXX-XX</code> is the IP address of the host.
</p>

<pre class="example" id="org124315e">
PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\h\[\033[00m\]:\[\033[01;34m\]\W\[\033[00m\]\[\033[1;31m\](Hostalias)\[\033[0m\]\$ '
</pre>
</div>
</div>

<div id="outline-container-orgf0a96d0" class="outline-3">
<h3 id="orgf0a96d0">ImageMagick and <code>convert</code></h3>
<div class="outline-text-3" id="text-orgf0a96d0">
</div>
<div id="outline-container-org3e3e612" class="outline-4">
<h4 id="org3e3e612">Help! Permissions problem</h4>
<div class="outline-text-4" id="text-org3e3e612">
<p>
Follow these steps:
</p>

<ol class="org-ol">
<li>Locate the <code>policy.xml</code> file. For Ubuntu, the file is usually found
at <code>/etc/ImageMagick-6/policy.xml</code>.</li>

<li>Open the <code>policy.xml</code> file with a text editor using
root/administrative privileges.</li>

<li>Locate the following line in the <code>policy.xml</code> file:</li>
</ol>

<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #AE1B9A;">policymap</span>&gt;
  ...
  &lt;<span style="color: #AE1B9A;">policies</span>&gt;
    &lt;<span style="color: #AE1B9A;">policy</span> <span style="color: #BA36A5;">domain</span>=<span style="color: #008000;">"coder"</span> <span style="color: #BA36A5;">rights</span>=<span style="color: #008000;">"none"</span> <span style="color: #BA36A5;">pattern</span>=<span style="color: #008000;">"PDF"</span> /&gt;
    ...
  &lt;/<span style="color: #AE1B9A;">policies</span>&gt;
  ...
&lt;/<span style="color: #AE1B9A;">policymap</span>&gt;
</pre>
</div>

<ol class="org-ol">
<li>Modify the line to allow ImageMagick to read and write PDF files:</li>
</ol>

<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #AE1B9A;">policy</span> <span style="color: #BA36A5;">domain</span>=<span style="color: #008000;">"coder"</span> <span style="color: #BA36A5;">rights</span>=<span style="color: #008000;">"read|write"</span> <span style="color: #BA36A5;">pattern</span>=<span style="color: #008000;">"PDF"</span> /&gt;
</pre>
</div>

<ol class="org-ol">
<li>Save and close the <code>policy.xml</code> file.</li>

<li>Now, you should be able to execute the <code>convert</code> command</li>
</ol>

<div class="org-src-container">
<pre class="src src-sh">convert -density 300 fig01.pdf fig01.png
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga6d195b" class="outline-3">
<h3 id="orga6d195b">Dconf Editor</h3>
<div class="outline-text-3" id="text-orga6d195b">
<p>
There is a GUI called <i>Dconf Editor</i> which makes editing your configuration much
easier than editing files.
</p>
</div>
</div>

<div id="outline-container-org9399c60" class="outline-3">
<h3 id="org9399c60">Updating Ubuntu</h3>
<div class="outline-text-3" id="text-org9399c60">
<p>
The <code>do-release-upgrade</code> command can be used to run an update. First run
<code>do-release-upgrade -c</code> to check if there is an available upgrade. When asking
to upgrade you might get an error message saying that there are packages that
need to be upgraded first. Comments on the internet make this sound scary, but
when I encountered this I just needed to remove an old program I didn't need
which refused to upgrade and then everything worked fine.
</p>
</div>
</div>

<div id="outline-container-orgb34e291" class="outline-3">
<h3 id="orgb34e291">System information</h3>
<div class="outline-text-3" id="text-orgb34e291">
</div>
<div id="outline-container-orgebbc14a" class="outline-4">
<h4 id="orgebbc14a">Neofetch</h4>
<div class="outline-text-4" id="text-orgebbc14a">
<div class="org-src-container">
<pre class="src src-sh">neofetch
</pre>
</div>

<blockquote>
<p>
Neofetch is a CLI system information tool written in BASH. Neofetch displays
information about your system next to an image, your OS logo, or any ASCII file
of your choice.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-org546e2c6" class="outline-4">
<h4 id="org546e2c6">Environment variables</h4>
<div class="outline-text-4" id="text-org546e2c6">
<p>
There are the <code>env</code> and <code>printenv</code> functions to print all the environment
variables known to a shell. To get the hostname there is the <code>hostname</code> function
(this information does not seem to appear as an environment variable).
</p>
</div>
</div>
</div>

<div id="outline-container-orgb9eb3cd" class="outline-3">
<h3 id="orgb9eb3cd">USB</h3>
<div class="outline-text-3" id="text-orgb9eb3cd">
</div>
<div id="outline-container-orgbef6d27" class="outline-4">
<h4 id="orgbef6d27">Mounting</h4>
<div class="outline-text-4" id="text-orgbef6d27">
<p>
The following steps seem to work&#x2026;
</p>

<ol class="org-ol">
<li>Find the drive with <code>fdisk -l</code> (for example <code>/dev/sdc1</code>)</li>
<li>Mount the drive with <code>mount</code> (<code>mount /dev/sdc1 /media/usb-drive</code>)</li>
<li>Use the drive</li>
<li>Dismount with <code>umount</code> (<code>umount /media/usb-drive</code>)</li>
</ol>

<p>
Depending on how the drive is formatted you may need to install packages to work
with exFAT.
</p>
</div>
</div>

<div id="outline-container-org75ad021" class="outline-4">
<h4 id="org75ad021">Formatting a USB</h4>
<div class="outline-text-4" id="text-org75ad021">
<p>
There is a wikihow which describes how to format a USB from the command line:
</p>

<p>
<a href="https://www.wikihow.com/Format-a-USB-Flash-Drive-in-Ubuntu">https://www.wikihow.com/Format-a-USB-Flash-Drive-in-Ubuntu</a>
</p>
</div>
</div>
</div>

<div id="outline-container-orgeb88b15" class="outline-3">
<h3 id="orgeb88b15">Compression with zip</h3>
<div class="outline-text-3" id="text-orgeb88b15">
<p>
To zip the directory <code>foo</code> into a file called <code>foo.zip</code> run the following
</p>

<div class="org-src-container">
<pre class="src src-shell">zip -r foo.zip foo
</pre>
</div>

<p>
To unpack a zipped up tarball use the following
</p>

<div class="org-src-container">
<pre class="src src-shell">tar -zxvf foobar.tar.gz
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcce571f" class="outline-3">
<h3 id="orgcce571f">Graphics (PNG, SVG, &#x2026;)</h3>
<div class="outline-text-3" id="text-orgcce571f">
</div>
<div id="outline-container-org2b800d5" class="outline-4">
<h4 id="org2b800d5">Shrinking images</h4>
<div class="outline-text-4" id="text-org2b800d5">
<p>
The following will shrink <code>foo.png</code> to \(20\%\) of its original size. This leads
to a smaller image of a smaller size.
</p>

<div class="org-src-container">
<pre class="src src-shell">convert -resize 20% foo.png
</pre>
</div>
</div>
</div>

<div id="outline-container-org9101150" class="outline-4">
<h4 id="org9101150">PDF to PNG</h4>
<div class="outline-text-4" id="text-org9101150">
<p>
This will convert the input PDF to a PNG with 300 DPI.
</p>

<div class="org-src-container">
<pre class="src src-shell">convert -density 300 input.pdf output.png
</pre>
</div>

<p>
You may get complaints about the colour space, in which case try
</p>

<div class="org-src-container">
<pre class="src src-shell">convert -density 300 input.pdf -colorspace RGB output.png
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcab01fc" class="outline-4">
<h4 id="orgcab01fc">PDF to PNG with a white background</h4>
<div class="outline-text-4" id="text-orgcab01fc">
<div class="org-src-container">
<pre class="src src-shell">convert -density 300 -background white -alpha remove -alpha off input.pdf output.png
</pre>
</div>
</div>
</div>

<div id="outline-container-org052fc2a" class="outline-4">
<h4 id="org052fc2a">Dithering</h4>
<div class="outline-text-4" id="text-org052fc2a">
<p>
This is the process of compressing an image to reduce its size. With a little
bit of care this can produce appealing images that are much smaller than the
original. Some of the logos on the <a href="https://aezarebski.github.io/">home page</a> are dithered using <a href="https://ditherit.com/">ditherit</a> with
the following settings.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Palette</td>
<td class="org-left">Blue &amp; Yellow</td>
</tr>

<tr>
<td class="org-left">Width</td>
<td class="org-left">400px</td>
</tr>

<tr>
<td class="org-left">Algorithm</td>
<td class="org-left">FloydSteinberg</td>
</tr>
</tbody>
</table>

<p>
In some cases these settings lead to <i>larger</i> files than the original, in that
case, try tweak the width parameter and you can get vastly improved performance
without visible issues.
</p>
</div>
</div>

<div id="outline-container-org49a6f5f" class="outline-4">
<h4 id="org49a6f5f">Inverting colours</h4>
<div class="outline-text-4" id="text-org49a6f5f">
<p>
The following can be used to invert the colours of a PNG with ImageMagick
</p>

<div class="org-src-container">
<pre class="src src-sh">convert input.png -channel RGB -negate output.png
</pre>
</div>
</div>
</div>

<div id="outline-container-org72777b3" class="outline-4">
<h4 id="org72777b3">SVG to PDF/PNG</h4>
<div class="outline-text-4" id="text-org72777b3">
<p>
See <a href="./inkscape-notes.html">my inkscape notes</a> for details on how to do this.
</p>
</div>
</div>

<div id="outline-container-orgb4cf14f" class="outline-4">
<h4 id="orgb4cf14f">Resizing a PNG</h4>
<div class="outline-text-4" id="text-orgb4cf14f">
<ol class="org-ol">
<li>Open the image in GIMP</li>
<li><code>Image &gt; Scale Image</code></li>
<li>Set the interpolation to <i>cubic</i></li>
<li>Click <code>Scale</code></li>
<li>Save or export in the desired format</li>
</ol>
</div>
</div>

<div id="outline-container-orga983086" class="outline-4">
<h4 id="orga983086">Removing background from PNG</h4>
<div class="outline-text-4" id="text-orga983086">
<ol class="org-ol">
<li>Open the image in GIMP as layers</li>
<li>Right click and use Colours then Colours to Alpha and it should remove the
background.</li>
<li>Save this as a new image.</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org1ab9016" class="outline-3">
<h3 id="org1ab9016">Working with <span class="underline">PDF</span></h3>
<div class="outline-text-3" id="text-org1ab9016">
<p>
LibreOffice Draw is surprisingly good for editing and annotating PDFs!
</p>

<p>
<code>pdftk</code> is a great tool for working with the pages of a PDF. The man page has
some useful examples.
</p>
</div>

<div id="outline-container-org9bb59cf" class="outline-4">
<h4 id="org9bb59cf">Splitting a PDF into pages</h4>
<div class="outline-text-4" id="text-org9bb59cf">
<div class="org-src-container">
<pre class="src src-sh">pdftk pdftk input.pdf burst
</pre>
</div>
</div>
</div>

<div id="outline-container-org7aa7aec" class="outline-4">
<h4 id="org7aa7aec">Extracting a subset of the pages</h4>
<div class="outline-text-4" id="text-org7aa7aec">
<p>
Extract pages 1&#x2013;12 from <code>input.pdf</code> and write them to <code>output.pdf</code>
</p>

<div class="org-src-container">
<pre class="src src-sh">pdftk input.pdf cat 1-12 output output.pdf
</pre>
</div>
</div>
</div>

<div id="outline-container-org1c8c63a" class="outline-4">
<h4 id="org1c8c63a">Join multiple documents</h4>
<div class="outline-text-4" id="text-org1c8c63a">
<div class="org-src-container">
<pre class="src src-sh">pdftk in1.pdf in2.pdf cat output out1.pdf
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ba8685" class="outline-4">
<h4 id="org7ba8685">Extracting figures</h4>
<div class="outline-text-4" id="text-org7ba8685">
<p>
If you want to extract a figure from a PDF of a paper, see my <a href="./inkscape-notes.html">Inkscape notes</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-orgf5a24b3" class="outline-3">
<h3 id="orgf5a24b3">Fonts</h3>
<div class="outline-text-3" id="text-orgf5a24b3">
<p>
To install the Monaco font there is a useful <a href="https://askubuntu.com/a/333410">stackexchange post</a> linking to a
script. For the Source Code Pro font, I have a script in my dotfiles repository.
If the method above does not work, you can download the TTF file into
<code>~/.fonts/</code> and then run <code>sudo fc-cache -fv</code> and it should work after that.
</p>

<p>
You can download all of the TFF files and then drag them into the Font Viewer
application that comes with Ubuntu. Then there is a button to click which should
install the font.
</p>
</div>
</div>

<div id="outline-container-org42c7f8d" class="outline-3">
<h3 id="org42c7f8d">Filesystem</h3>
<div class="outline-text-3" id="text-org42c7f8d">
</div>
<div id="outline-container-org0f5bb8a" class="outline-4">
<h4 id="org0f5bb8a">Filesystem Hierarchy Standard</h4>
<div class="outline-text-4" id="text-org0f5bb8a">
<p>
According to <a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">Wikipedia</a> "[t]he Filesystem Hierarchy Standard (FHS) is a reference
describing the conventions used for the layout of a UNIX system." The standard
is maintained by the Linux foundation and the main directories to know about are
is well documented. If you are unsure of where something should be located, this
would be a good place to go for guidance.
</p>
</div>
</div>

<div id="outline-container-orgf5e6347" class="outline-4">
<h4 id="orgf5e6347">Permissions</h4>
<div class="outline-text-4" id="text-orgf5e6347">
<p>
A file can be read from, <code>r</code>, written to, <code>w</code>, or executed, <code>x</code>. The permission
to carry out these actions is specified for the owner of the file, members of
the group, and other users. For example, <code>rwxr-x---</code> means the owner has read
write and execute, other group members can read and execute and others cannot
read, write or execute. The <code>chmod</code> functions is used to change the permissions.
</p>

<div class="org-src-container">
<pre class="src src-shell">chmod 750 foo.sh  <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">makes foo.sh rwxr-x---</span>
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">RWX</th>
<th scope="col" class="org-right">Code</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>rwx</code></td>
<td class="org-right">7</td>
</tr>

<tr>
<td class="org-left"><code>rw-</code></td>
<td class="org-right">6</td>
</tr>

<tr>
<td class="org-left"><code>r-x</code></td>
<td class="org-right">5</td>
</tr>

<tr>
<td class="org-left"><code>r--</code></td>
<td class="org-right">4</td>
</tr>

<tr>
<td class="org-left"><code>-wx</code></td>
<td class="org-right">3</td>
</tr>

<tr>
<td class="org-left"><code>-w-</code></td>
<td class="org-right">2</td>
</tr>

<tr>
<td class="org-left"><code>--x</code></td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-left"><code>---</code></td>
<td class="org-right">0</td>
</tr>
</tbody>
</table>
</div>

<ul class="org-ul">
<li><a id="org5cbbba1"></a>Useful permission codes<br />
<div class="outline-text-5" id="text-org5cbbba1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Code</th>
<th scope="col" class="org-left">Permissions</th>
<th scope="col" class="org-left">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>750</code></td>
<td class="org-left"><code>rwxr-x---</code></td>
<td class="org-left">Only you edit</td>
</tr>

<tr>
<td class="org-left"><code>444</code></td>
<td class="org-left"><code>r--r--r--</code></td>
<td class="org-left">Read only</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>

<div id="outline-container-org2a790d5" class="outline-4">
<h4 id="org2a790d5">Filesystem GUI: <i>Nautilus</i></h4>
<div class="outline-text-4" id="text-org2a790d5">
</div>
<ul class="org-ul">
<li><a id="org6530997"></a>How to toggle between grid and list views<br />
<div class="outline-text-5" id="text-org6530997">
<p>
If you can't be bothered to click the icons, <code>ctrl + 1</code> and <code>ctrl + 2</code>
will toggle between these views.
</p>
</div>
</li>

<li><a id="orgda353f0"></a>Using nautilus to browse files on a remote machine<br />
<div class="outline-text-5" id="text-orgda353f0">
<ol class="org-ol">
<li>Open nautilus</li>
<li>"Other Locations" &gt; "Connect to Server"</li>
<li>SSH <i>not</i> FTP</li>
</ol>
</div>
</li>
</ul>
</div>

<div id="outline-container-org8cfb547" class="outline-4">
<h4 id="org8cfb547">Filesystem: Finding files with <code>find</code></h4>
<div class="outline-text-4" id="text-org8cfb547">
</div>
<ul class="org-ul">
<li><a id="org958bd63"></a><code>find</code> example 1<br />
<div class="outline-text-5" id="text-org958bd63">
<p>
To find all the PNG files down from the current directory.
</p>

<div class="org-src-container">
<pre class="src src-shell">find . -regex <span style="color: #008000;">".*png$"</span>
</pre>
</div>
</div>
</li>

<li><a id="org4ef770c"></a><code>find</code> example 2<br />
<div class="outline-text-5" id="text-org4ef770c">
<p>
To (recursively) find all files with "figure-1" appearing the their name use the
following.
</p>

<div class="org-src-container">
<pre class="src src-shell">find . -name <span style="color: #008000;">\*</span>figure-1<span style="color: #008000;">\*</span> -print
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-screen" class="outline-3">
<h3 id="screen"><code>screen</code></h3>
<div class="outline-text-3" id="text-screen">
<p>
The <code>screen</code> program helps you manage long-running tasks, it is
particularly helpful if you need to be able to disconnect from the
task and come back later without interrupting the program in the mean
time.
</p>

<ul class="org-ul">
<li>Start a session with <code>screen</code>.
<ul class="org-ul">
<li>use <code>screen -S &lt;session_id&gt;</code> to name a session</li>
</ul></li>
<li>Detach from a session with <code>C-a d</code>.</li>
<li>Kill a session with <code>C-a k</code>.</li>
<li>Get help on available keybindings with <code>C-a ?</code>.</li>
<li><code>screen -ls</code> lists sessions.</li>
<li>Re-attach to a session with <code>screen -r</code> (<code>screen -r &lt;session_id&gt;</code> if
there is ambiguity.)</li>
</ul>
</div>

<div id="outline-container-org5331ad4" class="outline-4">
<h4 id="org5331ad4">Dealing with large amounts of output in screen</h4>
<div class="outline-text-4" id="text-org5331ad4">
<p>
You can copy text from a <code>screen</code> session to a file with the following
steps:
</p>

<ol class="org-ol">
<li>From inside the screen session enter copy mode by pressing <code>C-a [</code>.</li>

<li>In copy mode you can navigate using vim keybindings; move the
cursor to the beginning of the text you want to copy.</li>

<li>Press the <code>SPC</code> to moving into selection mode and select the text.</li>

<li>Press the <code>SPC</code> again to copy the selected text to <code>screen</code>'s
buffer.</li>

<li>Now you can paste the copied text into a file. First, exit copy
mode with <code>Esc</code>.</li>

<li>While still in the <code>screen</code> session, open a file with vim and paste
the copied text by pressing <code>C-a ]</code>.</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org8e1b7aa" class="outline-3">
<h3 id="org8e1b7aa">Finding your IP address</h3>
<div class="outline-text-3" id="text-org8e1b7aa">
<p>
This information is available from <b>Settings &gt; Network</b> and then click on the
button (cog) next to the wired connection.
</p>

<p>
Alternatively, you can use <code>ifconfig</code> at the command line which will print out a
bunch of network information and you should be able to spot a sensible IP
address among it.
</p>
</div>
</div>

<div id="outline-container-orgc49c5ac" class="outline-3">
<h3 id="orgc49c5ac"><code>scp</code></h3>
<div class="outline-text-3" id="text-orgc49c5ac">
<p>
Here is an example of a script I used to copy files from my desktop at work to
my laptop.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #BA36A5;">LOCAL_DIR</span>=out/result-v2
<span style="color: #BA36A5;">REMOTE_DIR</span>=/home/aez/projects/example/$<span style="color: #BA36A5;">LOCAL_DIR</span>
<span style="color: #BA36A5;">REMOTE_HOST</span>=zool

scp $<span style="color: #BA36A5;">REMOTE_HOST</span>:$<span style="color: #BA36A5;">REMOTE_DIR</span>/*{html,png} $<span style="color: #BA36A5;">LOCAL_DIR</span>/
</pre>
</div>

<p>
Note that this makes use of the <code>zool</code> alias from above.
</p>
</div>
</div>

<div id="outline-container-org1585f9c" class="outline-3">
<h3 id="org1585f9c">Symlinks</h3>
<div class="outline-text-3" id="text-org1585f9c">
<div class="org-src-container">
<pre class="src src-shell">ln -s /path/to/file /path/to/symlink
</pre>
</div>

<p>
Note that these paths need to be full paths otherwise the file wont get found.
</p>
</div>
</div>

<div id="outline-container-org4f92ed7" class="outline-3">
<h3 id="org4f92ed7">Searching files with <code>grep</code></h3>
<div class="outline-text-3" id="text-org4f92ed7">
<p>
<code>grep [OPTION]... PATTERNS [FILE]...</code>
</p>
</div>

<div id="outline-container-orgf790615" class="outline-4">
<h4 id="orgf790615"><code>grep</code> example 1</h4>
<div class="outline-text-4" id="text-orgf790615">
<p>
Search files in the current directory with filenames matching <code>"*l*notes.org"</code>
which contain the string <code>"foo"</code>, and show the line <i>number</i>.
</p>

<div class="org-src-container">
<pre class="src src-shell">grep -r -n --include=<span style="color: #008000;">"*l*notes.org"</span> <span style="color: #008000;">"foo"</span> .
</pre>
</div>
</div>
</div>

<div id="outline-container-org4ba5c27" class="outline-4">
<h4 id="org4ba5c27">finding and grepping example</h4>
<div class="outline-text-4" id="text-org4ba5c27">
<p>
The following recursively searches down from <code>public-site/org</code> for files with
names matching the pattern <code>.*book.*</code> and then pipes these into a grep command
looking for lines matching the pattern <code>"rnest"</code>.
</p>

<div class="org-src-container">
<pre class="src src-shell">find public-site/org/ -regex <span style="color: #008000;">".*book.*"</span> -print0 | xargs -0 grep <span style="color: #008000;">"rnest"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgda4a6f0" class="outline-4">
<h4 id="orgda4a6f0">Emacs</h4>
<div class="outline-text-4" id="text-orgda4a6f0">
<p>
There is a very nice interface to <code>grep</code> provided by <code>rgrep</code> in Emacs.
</p>
</div>
</div>
</div>

<div id="outline-container-orgfe9ea66" class="outline-3">
<h3 id="orgfe9ea66">Watching files with <code>inotifywait</code></h3>
<div class="outline-text-3" id="text-orgfe9ea66">
<p>
The package <code>inotify-tools</code> provides the <code>inotifywait</code> command which will run a
command after an event relating to a file occurs.
</p>
</div>

<div id="outline-container-org26a0e87" class="outline-4">
<h4 id="org26a0e87">Example</h4>
<div class="outline-text-4" id="text-org26a0e87">
<p>
You want to compile a PDF every time the file <code>demo.tex</code> gets modified. The
following shell script &#x2014; modified from <a href="https://superuser.com/a/181543">this stackoverflow answer</a> &#x2014; will
achieve this using <code>inotifywait</code>.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #BA36A5;">WATCH_FILE</span>=demo.tex

inotifywait -q -m -e close_write $<span style="color: #BA36A5;">WATCH_FILE</span> |
    <span style="color: #0000FF;">while </span><span style="color: #006FE0;">read</span> -r filename event; <span style="color: #0000FF;">do</span>
        pdflatex $<span style="color: #BA36A5;">WATCH_FILE</span>
    <span style="color: #0000FF;">done</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc1bf69c" class="outline-3">
<h3 id="orgc1bf69c">Monitor configuration</h3>
<div class="outline-text-3" id="text-orgc1bf69c">
<p>
The <code>xrandr</code> command allows you to specify the configuration of the monitor/s.
There is a GUI for <code>xranrd</code> called <code>arandr</code> which may substantially simplify the
process of configuring the monitor. Once you have a configuration you are happy
with, you can use <code>arandr</code> to write it to file. By default these configurations
will be stored in the <code>~/.screenlayout</code> directory.
</p>

<p>
When I first installed Ubuntu, the windows were all far too small. Running
<code>xrandr -s 1440x900</code> was much more suitable for a 14 inch laptop. <b>Update:</b> all
of a sudden the display on my second monitor went strange. I tried use <code>xrandr</code>
to set the display to <code>1440x900</code> but it didn't appear as one of the options. The
<a href="https://www.tecmint.com/set-display-screen-resolution-in-ubuntu/">solution</a> was to run the following command.
</p>

<pre class="example">
$ cvt 1440 900
# 1440x900 59.89 Hz (CVT 1.30MA) hsync: 55.93 kHz; pclk: 106.50 MHz
Modeline "1440x900_60.00"  106.50  1440 1528 1672 1904  900 903 909 934 -hsync +vsync
</pre>

<p>
The output of this is then what you are meant to use to fix the display by
running the following
</p>

<pre class="example">
$ xrandr --newmode "1440x900_60.00"  106.50  1440 1528 1672 1904  900 903 909 934 -hsync +vsync
$ xrandr --addmode DP-1 "1440x900_60.00"
$ xrandr -s 1440x900
</pre>

<p>
They say for this to persist, you need to add those lines to a file at
<code>/etc/profile.d/external_monitor_resolution.sh</code> but I haven't tried this yet.
</p>
</div>
</div>

<div id="outline-container-org3ca0d67" class="outline-3">
<h3 id="org3ca0d67">Keyboard configuration</h3>
<div class="outline-text-3" id="text-org3ca0d67">
<p>
The caps lock key is solid real-estate but is wildly underutilised, and control is more useful than alt a lot of the time.
Adding the following to a file called <code>Xmodmap</code> and then run it with <code>xmodmap &lt;path/to/Xmodmap&gt;</code>.
It will switch escape and caps lock and the right alt key will become another control key.
</p>

<pre class="example">
clear lock
keycode 9 = Caps_Lock
keycode 66 = Escape

remove Control = Control_R
remove Mod1 = Alt_R
keycode 105 = Alt_R
keycode 108 = Control_R
add Control = Control_R
add Mod1 = Alt_R
</pre>
</div>
</div>

<div id="outline-container-org2f7f99f" class="outline-3">
<h3 id="org2f7f99f">Network connection Wi-Fi</h3>
<div class="outline-text-3" id="text-org2f7f99f">
<p>
Use <code>nmcli device wifi list</code> to get a list of all the available wifi networks.
Note the SSID of the network you want to connect to.
</p>

<div class="org-src-container">
<pre class="src src-sh">nmcli device wifi connect &lt;SSID&gt; password &lt;password&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbe40dc9" class="outline-3">
<h3 id="orgbe40dc9">Disk usage: <code>du</code></h3>
<div class="outline-text-3" id="text-orgbe40dc9">
<p>
The following will print, in human readable form, the size of all
sub-directories of <code>foobar</code> recursively up to 2 levels deep.
</p>

<div class="org-src-container">
<pre class="src src-sh">du -h --max-depth=2 foobar
</pre>
</div>

<p>
Although, unless you are limited to a terminal, something like <a href="#org4646640">disk usage
analyzer GUI</a> is a much better solution.
</p>
</div>
</div>

<div id="outline-container-org4646640" class="outline-3">
<h3 id="org4646640">Disk usage: <i>Disk Usage Analyzer</i></h3>
<div class="outline-text-3" id="text-org4646640">
<p>
The <i>Disk Usage Analyzer</i> provides an interactive tree map of disk usage which
makes it easy to find large files on your machine.
</p>
</div>
</div>

<div id="outline-container-org675b1f5" class="outline-3">
<h3 id="org675b1f5">Monitoring processes with <code>htop</code></h3>
<div class="outline-text-3" id="text-org675b1f5">
<p>
The <code>htop</code> command provides an interactive process viewer. Make sure that you
keep the <code>F6</code> and <code>F9</code> keys unbound if you want to use this because they are
used to sort the processes and kill them respectively. When killing processes,
you probably want to use signal number 9.
</p>
</div>
</div>

<div id="outline-container-org853d7ba" class="outline-3">
<h3 id="org853d7ba">Viewing hierarchy <code>tree</code></h3>
<div class="outline-text-3" id="text-org853d7ba">
<p>
Definitely want to use this with colour!
</p>

<div class="org-src-container">
<pre class="src src-sh">tree -C &lt;filepath&gt;
</pre>
</div>

<p>
Be careful though, if you use this without thinking you can get a ridiculous
amount of material printed out. There is a command line option for ignoring
particular directories.
</p>
</div>
</div>

<div id="outline-container-org5019e83" class="outline-3">
<h3 id="org5019e83"><code>rsync</code></h3>
<div class="outline-text-3" id="text-org5019e83">
<p>
The <code>rsync</code> utility provides a way to synchronise the files from one place to
another. There is a useful introduction to rsync <a href="https://everythinglinux.org/rsync/">here</a> (and a simpler one <a href="https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories">here</a>.)
Commands will look like the following:
</p>

<pre class="example">
rsync [OPTIONS] SRC DEST
</pre>

<p>
My use case for this is keeping the same set of PDFs on multiple machines. The
following command will make a copy of all the files on <code>zool</code> in the library to
my local library.
</p>

<div class="org-src-container">
<pre class="src src-shell">rsync --verbose --progress --stats --compress --rsh=/usr/bin/ssh <span style="color: #008000;">\</span>
      --recursive --times --perms --links <span style="color: #008000;">\</span>
      zool:/home/aez/Documents/library/* /home/aez/Documents/library/
</pre>
</div>

<p>
Here we have used <code>zool</code> which is a host described in <code>~/.ssh/config</code> .
I have a <a href="../resources/titanic.txt">script</a> to synchronise my libraries across machines.
</p>
</div>

<div id="outline-container-org0835467" class="outline-4">
<h4 id="org0835467">Dry runs</h4>
<div class="outline-text-4" id="text-org0835467">
<p>
If you want to test out a command first, there is the <code>-n</code> or <code>--dry-run</code> flags
which should be used with <code>-v</code> to actually get the output verbosely printed. For
example
</p>

<div class="org-src-container">
<pre class="src src-sh">rsync -anv dir1/ dir2
</pre>
</div>

<p>
will print out a list of the files in <code>dir1</code> that would be copied to <code>dir2</code> but
will not actually change any files until the <code>n</code> flag is removed. The <code>a</code> flag
is for "archive" which is a detailed version of <code>r</code> (for recursive copying).
</p>
</div>
</div>

<div id="outline-container-org4195a01" class="outline-4">
<h4 id="org4195a01">Do not overwrite</h4>
<div class="outline-text-4" id="text-org4195a01">
<p>
There is the flag <code>--ignore-existing</code> which tells rsync not to send files that
already exist on the other side. This is useful if you do not want to
accidentally overwrite something. To get a report of which files have been
skipped you can also use <code>--info=skip</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-orgcdbd8ab" class="outline-3">
<h3 id="orgcdbd8ab">Getting help</h3>
<div class="outline-text-3" id="text-orgcdbd8ab">
</div>
<div id="outline-container-org839c773" class="outline-4">
<h4 id="org839c773">Manuals</h4>
<div class="outline-text-4" id="text-org839c773">
<p>
The manuals provide a built-in source of information. A nice feature of the
<code>man</code> command is that it also allows you to search for a function based on the
words in the description with <code>man -k &lt;command&gt;</code> and you can print just a short
description of a command with <code>man -f &lt;command&gt;</code>.
</p>
</div>
</div>

<div id="outline-container-orga1f62d4" class="outline-4">
<h4 id="orga1f62d4">Log files</h4>
<div class="outline-text-4" id="text-orga1f62d4">
<p>
Sometimes you can find error messages in the following log file. Note that this
is in <code>/var</code> because the file has a variable size as it is logged to.
</p>

<div class="org-src-container">
<pre class="src src-shell">less /var/log/syslog
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-bashrc" class="outline-3">
<h3 id="bashrc">Start up and configuration: the might <code>.bashrc</code> file</h3>
<div class="outline-text-3" id="text-bashrc">
<p>
To avoid confusion between the <code>.bashrc</code> and <code>.bash_profile</code> you can just add
the following to <code>.bash_profile</code> and then you'll have the same script evaluated
regardless.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #0000FF;">if</span> [ -f $<span style="color: #BA36A5;">HOME</span>/.bashrc ]; <span style="color: #0000FF;">then</span>
    <span style="color: #006FE0;">source</span> $<span style="color: #BA36A5;">HOME</span>/.bashrc
<span style="color: #0000FF;">fi</span>
</pre>
</div>

<p>
By default, tab completion is case sensitive, to fix this add the following line
to the file <code>/etc/inputrc</code>.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #006FE0;">set</span> completion-ignore-case on
</pre>
</div>

<p>
If your prompt uses the <code>\w</code> character to display the current
directory, you can truncate the number of parent directories shown
with the <code>PROMPT_DIRTRIM</code> variable:
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Truncates the length of the path printed by \w in the prompt.</span>
<span style="color: #006FE0;">export</span> <span style="color: #BA36A5;">PROMPT_DIRTRIM</span>=2
</pre>
</div>
</div>
</div>

<div id="outline-container-org900ab3b" class="outline-3">
<h3 id="org900ab3b">Accounts</h3>
<div class="outline-text-3" id="text-org900ab3b">
</div>
<div id="outline-container-org6d3da70" class="outline-4">
<h4 id="org6d3da70">Adding new users</h4>
<div class="outline-text-4" id="text-org6d3da70">
<p>
An example command to add a user is the following:
</p>

<div class="org-src-container">
<pre class="src src-sh">sudo useradd -c <span style="color: #008000;">"Jerry Smith"</span> -d /home/jsmith -m -s /bin/bash jsmith
</pre>
</div>

<ul class="org-ul">
<li><code>-c</code> is to create a comment which is used for the users full name.</li>
<li><code>-d</code> is their home directory.</li>
<li><code>-m</code> says make the home directory if it does not exist.</li>
<li><code>-s</code> to specify what shell they should use.</li>
<li><code>jsmith</code> is the username (which should be alphanumeric and must start with a
lowercase letter).</li>
</ul>
</div>
</div>

<div id="outline-container-org618670d" class="outline-4">
<h4 id="org618670d">Setting a user's password</h4>
<div class="outline-text-4" id="text-org618670d">
<ol class="org-ol">
<li>Login as root with <code>sudo -i</code>.</li>
<li>Set the password for <code>jsmith</code> with the following <code>sudo passwd jsmith</code>.</li>
<li>Logout as root with <code>exit</code>.</li>
<li>Check that <code>jsmith</code> can log in with <code>su - jsmith</code>.</li>
</ol>
</div>
</div>

<div id="outline-container-org1e03430" class="outline-4">
<h4 id="org1e03430">Setting a user's groups</h4>
<div class="outline-text-4" id="text-org1e03430">
<ul class="org-ul">
<li>Check which groups <code>jsmith</code> is part of with <code>groups jsmith</code>.</li>
<li>Add <code>jsmith</code> to the <code>fleeb</code> group with <code>usermod -aG fleeb jsmith</code>.</li>
<li>Remove <code>jsmith</code> from the <code>fleeb</code> group with <code>gpasswd -d jsmith fleeb</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-org82b7d1b" class="outline-4">
<h4 id="org82b7d1b">Removing a user</h4>
<div class="outline-text-4" id="text-org82b7d1b">
<p>
As root run <code>userdel -r jsmith</code> to remove <code>jsmith</code> and their home directory.
</p>
</div>
</div>
</div>

<div id="outline-container-orgf313de1" class="outline-3">
<h3 id="orgf313de1">Bluetooth</h3>
<div class="outline-text-3" id="text-orgf313de1">
<p>
If you find that audio comes out stuttered, try restarting Bluetooth with the
following command:
</p>

<div class="org-src-container">
<pre class="src src-sh">sudo service bluetooth restart
</pre>
</div>

<p>
You may have to repeat this process a few times, but it seems to work
eventually. Alternatively, you may need to add the following line to
<code>/etc/modprobe.d/alsa-base.conf</code> before restarting the service for this to work:
</p>

<pre class="example">
options snd-hda-intel model=generic
</pre>
</div>
</div>

<div id="outline-container-orgc357107" class="outline-3">
<h3 id="orgc357107">Colour selection and hexcodes</h3>
<div class="outline-text-3" id="text-orgc357107">
<p>
The program <i>Gpick</i> displays the hexcode of the pixel under the cursor.
</p>
</div>
</div>
</div>

<div id="outline-container-org9c46ebe" class="outline-2">
<h2 id="org9c46ebe">Packages</h2>
<div class="outline-text-2" id="text-org9c46ebe">
</div>
<div id="outline-container-org8d602c4" class="outline-3">
<h3 id="org8d602c4">Removing a PPA</h3>
<div class="outline-text-3" id="text-org8d602c4">
<ol class="org-ol">
<li>Open <b>Software &amp; Updates</b>.</li>
<li>Navigate to the <b>Other Software</b> tab.</li>
<li>Select and <b>Remove</b> the desired PPAs.</li>
</ol>
</div>
</div>

<div id="outline-container-org038da8b" class="outline-3">
<h3 id="org038da8b">Installingfrom a <code>.deb</code> file</h3>
<div class="outline-text-3" id="text-org038da8b">
<p>
Note that the <code>&lt;path/to.deb&gt;</code> needs to actually be a path, e.g. <code>./foo.deb</code> not
<code>foo.deb</code>.
</p>

<div class="org-src-container">
<pre class="src src-sh">sudo apt install &lt;path/to.deb&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf98a9b" class="outline-3">
<h3 id="orgdf98a9b">Uninstalling packages</h3>
<div class="outline-text-3" id="text-orgdf98a9b">
</div>
<div id="outline-container-org6f61a2d" class="outline-4">
<h4 id="org6f61a2d">remove package with <code>remove</code></h4>
<div class="outline-text-4" id="text-org6f61a2d">
<div class="org-src-container">
<pre class="src src-sh">sudo apt remove &lt;package-name&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org40eccc2" class="outline-4">
<h4 id="org40eccc2">remove package configuration with <code>purge</code></h4>
<div class="outline-text-4" id="text-org40eccc2">
<div class="org-src-container">
<pre class="src src-sh">sudo apt purge &lt;package-name&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2e668d9" class="outline-3">
<h3 id="org2e668d9">AppImage</h3>
<div class="outline-text-3" id="text-org2e668d9">
<p>
This is a new way to distribute packages: download the file, make the file
exectuble, and run it. Done! If you are concerned about what the program might
do, there are sandboxes available, for example <a href="https://firejail.wordpress.com/">Firejail</a>. Inkscape is available
as an appimage.
</p>
</div>
</div>

<div id="outline-container-org1972968" class="outline-3">
<h3 id="org1972968"><code>youtube-dl</code></h3>
<div class="outline-text-3" id="text-org1972968">
<p>
There are instructions on how to install this program <a href="http://ytdl-org.github.io/youtube-dl/download.html">here</a>. Use <code>youtube-dl
--help</code> to get help on usage.
</p>
</div>

<div id="outline-container-org5eb95ce" class="outline-4">
<h4 id="org5eb95ce">Download audio as MP3</h4>
<div class="outline-text-4" id="text-org5eb95ce">
<div class="org-src-container">
<pre class="src src-sh">youtube-dl --extract-audio --audio-format <span style="color: #008000;">"mp3"</span> &lt;VIDEO/URL&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8d4270a" class="outline-3">
<h3 id="org8d4270a"><span class="todo TODO">TODO</span> Browsers</h3>
<div class="outline-text-3" id="text-org8d4270a">
</div>
<div id="outline-container-orgecc53b3" class="outline-4">
<h4 id="orgecc53b3"><span class="todo TODO">TODO</span> Firefox</h4>
<div class="outline-text-4" id="text-orgecc53b3">
<ul class="org-ul">
<li>There is an interesting <a href="https://videoinu.com/blog/firefox-reader-view-heuristics/">explainer</a> on the <a href="https://support.mozilla.org/en-US/kb/firefox-reader-view-clutter-free-web-pages">Firefox Reader View</a>.</li>
<li>There are <i>profiles</i> as a way to toggle different configurations of Firefox.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org52d8a39" class="outline-2">
<h2 id="org52d8a39">Scripting</h2>
<div class="outline-text-2" id="text-org52d8a39">
<p>
On my machine at uni this is <code>/bin/sh</code> which points to <code>/bin/dash</code>.
</p>

<p>
There is a commandline tool <code>shellcheck</code> which performs static analysis on a
shell script and provides advice to improve it.
</p>
</div>

<div id="outline-container-org6fae186" class="outline-3">
<h3 id="org6fae186">Bioinformatics one-liners</h3>
<div class="outline-text-3" id="text-org6fae186">
</div>
<div id="outline-container-orge336524" class="outline-4">
<h4 id="orge336524">Extract the trees from a NEXUS file and put them in a Newick file</h4>
<div class="outline-text-4" id="text-orge336524">
<p>
This one-liner carries out the following pipeline:
</p>

<ol class="org-ol">
<li><code>grep</code> the lines of the nexus file containing trees</li>
<li>Take the first 5000 of them</li>
<li>Use <code>awk</code> to remove the text on the line before the tree</li>
<li>Write the results to file.</li>
</ol>

<div class="org-src-container">
<pre class="src src-sh">grep <span style="color: #008000;">"^tree STATE_"</span> your_file.nexus | head -n 5000 | awk -F<span style="color: #008000;">"= "</span> <span style="color: #008000;">'{print $2}'</span> &gt; first_5000_trees.nwk
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgeb53af2" class="outline-3">
<h3 id="orgeb53af2">Control flow</h3>
<div class="outline-text-3" id="text-orgeb53af2">
<p>
To run comands conditional upon the presence or absence of a directory, consider
the following example
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #0000FF;">if</span> [ -d <span style="color: #008000;">"foobar"</span> ]; <span style="color: #0000FF;">then</span>
    <span style="color: #006FE0;">echo</span> <span style="color: #008000;">"There is a directory called foobar"</span>
    <span style="color: #0000FF;">exit</span> 0
<span style="color: #0000FF;">fi</span>

<span style="color: #0000FF;">if</span> [ ! -d <span style="color: #008000;">"foobar"</span> ]; <span style="color: #0000FF;">then</span>
    <span style="color: #006FE0;">echo</span> <span style="color: #008000;">"Could not find directory: foobar"</span>
    <span style="color: #0000FF;">exit</span> 1
<span style="color: #0000FF;">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb8f158c" class="outline-3">
<h3 id="orgb8f158c">Running things in parallel by backgrounding</h3>
<div class="outline-text-3" id="text-orgb8f158c">
</div>
<div id="outline-container-org9c4247e" class="outline-4">
<h4 id="org9c4247e">Example 1</h4>
<div class="outline-text-4" id="text-org9c4247e">
<p>
This solution came from the very clever <a href="https://www.clairemmiller.com/">Claire Miller</a> for how one can do
map-reduce style computations correctly via bash. Note that this actually needs
<code>bash</code>, it does not work with <code>sh</code> alone.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">waiter.sh</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"Starting"</span>

<span style="color: #BA36A5;">pids</span>=()

<span style="color: #0000FF;">for</span> i<span style="color: #0000FF;"> in</span> $(<span style="color: #FF1493;">seq 1 5</span>)
<span style="color: #0000FF;">do</span>
  sleep 4 &amp;&amp; <span style="color: #006FE0;">echo</span> <span style="color: #008000;">"Done part $i"</span> &amp; <span style="color: #BA36A5;">pids</span>+=($<span style="color: #BA36A5;">!</span>)
<span style="color: #0000FF;">done</span>

<span style="color: #006FE0;">wait</span> <span style="color: #008000;">"${pids[@]}"</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"Finished :)"</span>
</pre>
</div>

<p>
which should produce the following output.
</p>

<pre class="example">
$ bash waiter.sh
Starting
Done part 3
Done part 1
Done part 2
Finished :)
</pre>
</div>
</div>

<div id="outline-container-orgae2b7ac" class="outline-4">
<h4 id="orgae2b7ac">Example 2</h4>
<div class="outline-text-4" id="text-orgae2b7ac">
<p>
A slightly more complicated example demonstrating how to chunk processes into
subsets to run in parallel before moving onto the next chunk.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #8D8D84;">#</span><span style="color: #8D8D84; font-style: italic;">!/usr/bin/</span><span style="color: #0000FF;">env</span><span style="color: #8D8D84; font-style: italic;"> bash</span>

<span style="color: #BA36A5;">chunk_size</span>=5                    <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">the number of processes in each chunk</span>
<span style="color: #BA36A5;">limit</span>=20                        <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">the total number of processes</span>
<span style="color: #BA36A5;">ix</span>=0

<span style="color: #BA36A5;">outer_limit</span>=<span style="color: #008000;">"$(</span><span style="color: #FF1493;">($limit-$chunk_size</span><span style="color: #008000;">))"</span>
<span style="color: #0000FF;">while</span> [ $<span style="color: #BA36A5;">ix</span> -le $<span style="color: #BA36A5;">outer_limit</span> ]
<span style="color: #0000FF;">do</span>
    <span style="color: #BA36A5;">pids</span>=()
    <span style="color: #BA36A5;">chunk_limit</span>=<span style="color: #008000;">"$(</span><span style="color: #FF1493;">($ix+$chunk_size</span><span style="color: #008000;">))"</span>
    <span style="color: #0000FF;">while</span> [ $<span style="color: #BA36A5;">ix</span> -lt $<span style="color: #BA36A5;">chunk_limit</span> ]
    <span style="color: #0000FF;">do</span>
        <span style="color: #BA36A5;">padded_num</span>=$(<span style="color: #FF1493;">printf "%03d" $ix</span>)
        <span style="color: #006FE0;">echo</span> $<span style="color: #BA36A5;">padded_num</span> &amp;&amp; sleep 1s &amp; <span style="color: #BA36A5;">pids</span>+=($<span style="color: #BA36A5;">!</span>)
        ((ix++))
    <span style="color: #0000FF;">done</span>
    <span style="color: #006FE0;">wait</span> <span style="color: #008000;">"${pids[@]}"</span>
    <span style="color: #006FE0;">echo</span> <span style="color: #008000;">"---"</span>
<span style="color: #0000FF;">done</span>
</pre>
</div>

<p>
which produces
</p>

<pre class="example">
 $ ./demo.sh
000
001
002
003
004
---
005
006
007
008
009
---
010
011
012
013
014
---
015
016
017
018
019
---
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfffbeb8" class="outline-3">
<h3 id="orgfffbeb8">Arguments</h3>
<div class="outline-text-3" id="text-orgfffbeb8">
<p>
As an example, here is a simple shell script
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #8D8D84;">#</span><span style="color: #8D8D84; font-style: italic;">!/bin/</span><span style="color: #0000FF;">sh</span>
<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">demo.sh</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"foo: $2"</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"bar: $1"</span>
</pre>
</div>

<p>
Running it we get the following
</p>

<div class="org-src-container">
<pre class="src src-text">$ ./demo.sh hello world
foo: world
bar: hello
</pre>
</div>
</div>
</div>

<div id="outline-container-org9660b3d" class="outline-3">
<h3 id="org9660b3d">Functions</h3>
<div class="outline-text-3" id="text-org9660b3d">
</div>
<div id="outline-container-orgf55dac5" class="outline-4">
<h4 id="orgf55dac5">Converting ODG to PDF</h4>
<div class="outline-text-4" id="text-orgf55dac5">
<p>
Here is an example of a function which converts an ODG to a PDF
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #006699;">ConvertODG2PDF</span> () {
    libreoffice --headless --convert-to pdf $<span style="color: #BA36A5;">1</span>
}

ConvertODG2PDF awesome-figure.odg
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a03825" class="outline-4">
<h4 id="org5a03825">Compiling and converting a standalone latex equation</h4>
<div class="outline-text-4" id="text-org5a03825">
<div class="org-src-container">
<pre class="src src-sh">
<span style="color: #006699;">compileStandAlone</span> () {
    pdflatex $<span style="color: #BA36A5;">1</span>.tex
    convert -flatten -density 300 $<span style="color: #BA36A5;">1</span>.pdf -colorspace RGB $<span style="color: #BA36A5;">1</span>.png
    rm $<span style="color: #BA36A5;">1</span>.aux
    rm $<span style="color: #BA36A5;">1</span>.log
    rm $<span style="color: #BA36A5;">1</span>.pdf
}

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0159b56" class="outline-3">
<h3 id="org0159b56">Loops</h3>
<div class="outline-text-3" id="text-org0159b56">
<p>
Here is a silly little example of how to loop over an explicity list of strings.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #0000FF;">for</span> month<span style="color: #0000FF;"> in</span> jan feb mar;
<span style="color: #0000FF;">do</span>
    cat foo-$<span style="color: #BA36A5;">month</span>.csv
<span style="color: #0000FF;">done</span>
</pre>
</div>

<p>
Alternatively, one can construct the list programmatically for example with <code>for
x in *</code> which would be used to iterate over all files in the current directory
or <code>for x in $*</code> which would iterate over all the command line arguments.
</p>

<p>
Here is another example of iterating over some integers and print 1, 2, 3 to
standard out.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #0000FF;">for</span> ix<span style="color: #0000FF;"> in</span> <span style="color: #FF1493;">`seq 1 3`</span>;
<span style="color: #0000FF;">do</span>
    <span style="color: #006FE0;">echo</span> $<span style="color: #BA36A5;">ix</span>
<span style="color: #0000FF;">done</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5c492e6" class="outline-3">
<h3 id="org5c492e6">Quiptic compiler</h3>
<div class="outline-text-3" id="text-org5c492e6">
<p>
The following helps you to quickly download a bunch of crosswords and compile
them into a single PDF. We use the <code>sleep</code> command to be kind to the Guardian
servers.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #0000FF;">for</span> i<span style="color: #0000FF;"> in</span> $(<span style="color: #FF1493;">seq 1140 1165</span>)
<span style="color: #0000FF;">do</span>
    sleep 2                     <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">be nice!</span>
    google-chrome --headless --disable-gpu --print-to-pdf https://www.theguardian.com/crosswords/quiptic/$<span style="color: #BA36A5;">i</span>/print
    mv output.pdf quiptic-$<span style="color: #BA36A5;">i</span>.pdf
<span style="color: #0000FF;">done</span>

<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"==========================================================="</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">""</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"Guardian - Quiptics"</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"-------------------"</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">""</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"Use the following command to compile the quiptics into a"</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"single pdf after you have removed any broken ones by hand:"</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">""</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"pdftk quiptic-* cat output quiptics.pdf"</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">""</span>
<span style="color: #006FE0;">echo</span> <span style="color: #008000;">"==========================================================="</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Alexander E. Zarebski</p>
<p class="date">Created: 2025-02-21 Fri 17:49</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
