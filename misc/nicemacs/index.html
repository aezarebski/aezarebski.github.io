<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-09-22 Wed 09:53 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NICEMACS</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Alex Zarebski" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link id="stylesheet" rel="stylesheet" type="text/css" href="../../css/stylesheet-dark.css" />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">NICEMACS</h1>

<div id="org6f9c9af" class="figure">
<p><img src="./resources/nicemacs-logo.png" alt="nicemacs-logo.png" />
</p>
</div>

<div id="outline-container-orgb41da4c" class="outline-2">
<h2 id="orgb41da4c">Spacemacs configuration</h2>
<div class="outline-text-2" id="text-orgb41da4c">
</div>
<div id="outline-container-orgb14b931" class="outline-3">
<h3 id="orgb14b931">Usage notes</h3>
<div class="outline-text-3" id="text-orgb14b931">
<p>
To tangle the <code>nicemacs.el</code> file from the command line execute the following
command:
</p>

<div class="org-src-container">
<pre class="src src-sh">emacs README.org --batch --eval=<span style="color: #2d9574;">"(org-babel-tangle)"</span>
</pre>
</div>

<p>
Then to include this in your spacemacs configutation add the following
expression to <code>dotspacemacs/user-config</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>load <span style="color: #2d9574;">"/home/aez/Documents/nicemacs/nicemacs.el"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
To quickly jump to this very org-mode file it will be useful to have a shortcut
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">visit-nicemacs</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>find-file <span style="color: #2d9574;">"~/Documents/nicemacs/README.org"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oon"</span> 'visit-nicemacs<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-orga3ee1ee" class="outline-4">
<h4 id="orga3ee1ee">Emacs-LISP REPL</h4>
<div class="outline-text-4" id="text-orga3ee1ee">
<p>
From time to time it will be useful to have access to an emacs lisp REPL. To
start this repl run the <code>ielm</code> command.
</p>
</div>
</div>

<div id="outline-container-org6a3650d" class="outline-4">
<h4 id="org6a3650d">Configuration layers</h4>
<div class="outline-text-4" id="text-org6a3650d">
<p>
This configuration is used from within spacemacs, so it seems appropriate that I
should also document the configuration layers that I use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">'<span style="color: #3a81c3;">(</span>
  auto-completion
  better-defaults
  bibtex
  csv
  emacs-lisp
  epub
  <span style="color: #6c3163;">(</span>ess <span style="color: #3a81c3;">:variables</span>
       ess-r-backend 'ess<span style="color: #6c3163;">)</span>
  git
  <span style="color: #6c3163;">(</span>haskell <span style="color: #3a81c3;">:variables</span>
           haskell-completion-backend 'lsp
           haskell-process-type 'stack-ghci
           hsakell-enable-hindent-style <span style="color: #2d9574;">"fundamental"</span><span style="color: #6c3163;">)</span>
  helm
  html
  <span style="color: #6c3163;">(</span>javascript <span style="color: #3a81c3;">:variables</span>
              javascript-import-tool 'import-js
              javascript-repl `nodejs
              javascript-backend 'tern
              javascript-fmt-tool 'web-beautify<span style="color: #6c3163;">)</span>
  latex
  markdown
  multiple-cursors
  nixos
  org
  python
  semantic
  <span style="color: #6c3163;">(</span>shell <span style="color: #3a81c3;">:variables</span>
         shell-default-shell 'eshell
         shell-default-position 'bottom
         shell-default-width <span style="color: #4e3163;">30</span><span style="color: #6c3163;">)</span>
  speed-reading
  <span style="color: #6c3163;">(</span>spell-checking <span style="color: #3a81c3;">:variables</span>
                  spell-checking-enable-by-default nil
                  enable-flyspell-auto-completion t<span style="color: #6c3163;">)</span>
  syntax-checking
  web-beautify
  yaml
  version-control
  treemacs<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The <code>semantic</code> layer is needed for formating emacs lisp code.
</p>
</div>
</div>
</div>

<div id="outline-container-org08b897b" class="outline-3">
<h3 id="org08b897b">Stuff</h3>
<div class="outline-text-3" id="text-org08b897b">
<p>
To quickly toggle between the default spacemacs themes use <code>SPC T n</code> (the
default bindings.)
</p>
</div>

<div id="outline-container-orgbd8cf6e" class="outline-4">
<h4 id="orgbd8cf6e">Start up/splash page</h4>
<div class="outline-text-4" id="text-orgbd8cf6e">
<p>
I prefer the startup banner number 100 so set the following in my <code>.spacemacs</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">dotspacemacs-startup-banner <span style="color: #4e3163;">100</span>
</pre>
</div>

<p>
You may also want to remove some of the noise from the start up menu
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">dotspacemacs-startup-lists '<span style="color: #3a81c3;">()</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc054a5f" class="outline-4">
<h4 id="orgc054a5f">Scratch buffer</h4>
<div class="outline-text-4" id="text-orgc054a5f">
<p>
If you want to scratch something out quickly there is the scratch buffer
provided by spacemacs at <code>SCP b s</code>. By default this opens in text mode. To avoid
always needing to switch it into org-mode we can set the following variable
instead.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> dotspacemacs-scratch-mode 'org-mode<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5f0e11" class="outline-4">
<h4 id="orge5f0e11">Owner menu</h4>
<div class="outline-text-4" id="text-orge5f0e11">
<p>
The spacemacs documentation recommends that you store all of your shortcuts with
a prefix of "o" for owner.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"o"</span> <span style="color: #2d9574;">"own-menu"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7bf57e8" class="outline-4">
<h4 id="org7bf57e8">Ugly ugly scroll bar</h4>
<div class="outline-text-4" id="text-org7bf57e8">
<p>
I very much do not want to scroll bar popping up every now and then so I will
remove the advice to do this!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>advice-remove 'mwheel-scroll #'spacemacs//scroll-bar-show-delayed-hide<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4da8765" class="outline-3">
<h3 id="org4da8765">Completion</h3>
<div class="outline-text-3" id="text-org4da8765">
<p>
The following potentially reduce the latency in input which can be increased by
unnecessary calls to a completion backend.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> company-idle-delay <span style="color: #4e3163;">0.5</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> company-minimum-prefix-length <span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9640a66" class="outline-3">
<h3 id="org9640a66">LSP</h3>
<div class="outline-text-3" id="text-org9640a66">
<p>
<a href="#org1386236">LSP and Haskell</a>
</p>

<ul class="org-ul">
<li><a href="#org4cdf60b">LSP with ESS</a></li>
</ul>

<p>
The path to the current file in LSP is a little unnecessary.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> lsp-headerline-breadcrumb-enable nil<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
LSP tends to be a bit too eager to display help under the default delay of 0.2
seconds and this also leads to an unnecessary amount of communication. To
improve this we can increase the delay for both the documentation and the
sideline display.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> lsp-ui-doc-delay <span style="color: #4e3163;">1.0</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> lsp-ui-sideline-delay <span style="color: #4e3163;">1.0</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5344965" class="outline-3">
<h3 id="org5344965">Haskell</h3>
<div class="outline-text-3" id="text-org5344965">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"oh"</span> <span style="color: #2d9574;">"haskell-menu"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ohr"</span> 'haskell-process-restart<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Set the input method to TeX for using unicode. Use C-\ to unset this.</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ohu"</span> 'set-input-method<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-orge51c475" class="outline-4">
<h4 id="orge51c475">Formatting code without LSP</h4>
<div class="outline-text-4" id="text-orge51c475">
<p>
If you are not using LSP then the following might be useful additions if you
have <code>hindent</code> installed. Although I suspect a nicer option is to use <a href="#org9443adc">stylish-haskell with LSP</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ohhr"</span> 'hindent-reformat-region<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ohhb"</span> 'hindent-reformat-buffer<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
You will probably also want to set the <code>haskell-enable-hindent-style</code> variable
to <code>"fundamental"</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> haskell-enable-hindent-style <span style="color: #2d9574;">"fundamental"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9443adc" class="outline-4">
<h4 id="org9443adc">Formatting code with LSP</h4>
<div class="outline-text-4" id="text-org9443adc">
<p>
If you are using LSP then <code>hindent</code> is not available by default. <a href="https://github.com/haskell/stylish-haskell">stylish-haskell</a>
seems to be an acceptable replacement though. The
<code>lsp-haskell-formatting-provider</code> is used to specify which formatting tool to
use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> lsp-haskell-formatting-provider <span style="color: #2d9574;">"stylish-haskell"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1386236" class="outline-4">
<h4 id="org1386236">LSP and Haskell</h4>
<div class="outline-text-4" id="text-org1386236">
<p>
Even after installing the <code>haskell-language-server</code> using <a href="https://github.com/haskell/haskell-language-server#installation">the GHCUP installation
method</a> there were some issues because emacs could not find it. It appears that
setting the <code>lsp-haskell-server-path</code> to the executable solved things.
</p>

<ol class="org-ol">
<li>Install <code>ghcup</code>, which will also offer to install the haskell language server
for you.</li>
</ol>

<p>
<a href="https://github.com/haskell/haskell-language-server#installation">GHCUP installation instructions are here</a>
</p>

<ol class="org-ol">
<li>Make sure that this has been added to the <code>exec-path</code> and that
<code>lsp-haskell-server-path</code> is set. Note that some projects might get upset
about the language server being used, adjust this and restarting emacs is a
hacky solution by it works.</li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> exec-path <span style="color: #6c3163;">(</span>append exec-path '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"/home/aez/.ghcup/bin"</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> lsp-haskell-server-path <span style="color: #2d9574;">"/home/aez/.ghcup/bin/haskell-language-server-8.10.4"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<ol class="org-ol">
<li>Make sure that the layer variables have been set to use LSP.</li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>haskell <span style="color: #3a81c3;">:variables</span>
         haskell-completion-backend 'lsp
         haskell-process-type 'stack-ghci<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org659fecb" class="outline-3">
<h3 id="org659fecb">Latex and Bibtex</h3>
<div class="outline-text-3" id="text-org659fecb">
<p>
To ensure that files with the extension <code>.bibtex</code> open in <code>bibtex-mode</code> we need
to explicitly request this
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>add-to-list 'auto-mode-alist '<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"\\.bibtex\\'"</span> . bibtex-mode<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ol"</span> <span style="color: #2d9574;">"latex"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ob"</span> <span style="color: #2d9574;">"bibtex-menu"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
There are a couple of files that I want to have easy access to for reference and
to make minor edits. Having a function to access such a file easily is useful
for this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">visit-bib-and-tex-file</span> <span style="color: #6c3163;">(</span>path-template<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">progn</span>
    <span style="color: #2d9574;">(</span>find-file path-template<span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>goto-char <span style="color: #4e3163;">1</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>recenter-top-bottom<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
This is a <i>latex</i> file for my <i>reviews</i> so the binding is <code>olr</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">review-tex-file</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Open my review.tex file"</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>visit-bib-and-tex-file <span style="color: #2d9574;">"~/Documents/bibliography/review/review.tex"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"olr"</span> 'review-tex-file<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
This is a <i>latex</i> file for my reading <i>list</i> so the binding is <code>oll</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">reading-list-tex-file</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Open my review.tex file"</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>visit-bib-and-tex-file <span style="color: #2d9574;">"~/Documents/bibliography/review/reading-list.tex"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oll"</span> 'reading-list-tex-file<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
This is a <i>bibtex</i> file for my <i>references</i> so the binding is <code>obr</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">references-bib-file</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Opens my bibtex references."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>visit-bib-and-tex-file <span style="color: #2d9574;">"~/Documents/bibliography/references.bib"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obr"</span> 'references-bib-file<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The <code>last-bib</code> function opens the most recent bibtex file in the Downloads
directory in a new buffer. If there is no such file then a message is given to
indicate this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">last-bib</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>bib-files <span style="color: #b1951d;">(</span>directory-files-and-attributes <span style="color: #2d9574;">"~/Downloads"</span>
                                                    t <span style="color: #2d9574;">".*bib"</span> <span style="color: #2d9574;">"ctime"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>path-and-time <span style="color: #b1951d;">(</span><span style="color: #3a81c3; font-weight: bold;">lambda</span> <span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>
                          <span style="color: #3a81c3;">(</span>list <span style="color: #6c3163;">(</span>first x<span style="color: #6c3163;">)</span>
                                <span style="color: #6c3163;">(</span>eighth x<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>time-order <span style="color: #b1951d;">(</span><span style="color: #3a81c3; font-weight: bold;">lambda</span> <span style="color: #3a81c3;">(</span>a b<span style="color: #3a81c3;">)</span>
                       <span style="color: #3a81c3;">(</span>time-less-p <span style="color: #6c3163;">(</span>second b<span style="color: #6c3163;">)</span>
                                    <span style="color: #6c3163;">(</span>second a<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>most-recent <span style="color: #b1951d;">(</span><span style="color: #3a81c3; font-weight: bold;">lambda</span> <span style="color: #3a81c3;">(</span>files<span style="color: #3a81c3;">)</span>
                        <span style="color: #3a81c3;">(</span>car <span style="color: #6c3163;">(</span>car <span style="color: #2d9574;">(</span>sort <span style="color: #887070;">(</span>mapcar path-and-time files<span style="color: #887070;">)</span>
                                        time-order<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3; font-weight: bold;">if</span> <span style="color: #67b11d;">(</span>not <span style="color: #b1951d;">(</span>null bib-files<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span>find-file <span style="color: #b1951d;">(</span>funcall most-recent bib-files<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>message <span style="color: #2d9574;">"No bib files found in ~/Downloads/"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Bibtex requires that capital letters in the title be surrounded by braces to
ensure that they are capitalised correctly. The following function is a way to
quickly add these braces to long titles. Just hightlight the relevant text and
run the function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">bibtex-braces</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Wrap upper case letters with brackets for bibtex titles."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>evil-ex <span style="color: #2d9574;">"'&lt;,'&gt;s/</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">(</span><span style="color: #2d9574;">[A-Z]+</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">)</span><span style="color: #2d9574;">/\\{\\1\\}/g"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Some places seem reluctant to provide a bibtex file for a citation, but they all
seem to have RIS files available for download. There are tools to convert
between them. The <code>bibtex-ris2bib</code> function looks up the most recent RIS file in
your downloads directory and then converts that to a BIB file. You can then open
this file using the <code>last-bib</code> function from above.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">bibtex-ris2bib</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Convert the most recent RIS file in my downloads to a BIB</span>
<span style="color: #da8b55;">file. </span><span style="color: #dc752f;">TODO</span><span style="color: #da8b55;"> Add error message if there are no RIS files."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span> <span style="color: #2d9574;">"*"</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>all-ris-files <span style="color: #b1951d;">(</span>directory-files <span style="color: #2d9574;">"~/Downloads"</span> <span style="color: #4e3163;">1</span> <span style="color: #2d9574;">".*ris"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>modification-time <span style="color: #b1951d;">(</span><span style="color: #3a81c3; font-weight: bold;">lambda</span> <span style="color: #3a81c3;">(</span>fp<span style="color: #3a81c3;">)</span>
                              <span style="color: #3a81c3;">(</span>list <span style="color: #6c3163;">(</span>time-convert <span style="color: #2d9574;">(</span>file-attribute-modification-time <span style="color: #887070;">(</span>file-attributes fp<span style="color: #887070;">)</span><span style="color: #2d9574;">)</span>
                                                  'integer<span style="color: #6c3163;">)</span>
                                    fp<span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>ris-filepath <span style="color: #b1951d;">(</span>nth <span style="color: #4e3163;">1</span>
                            <span style="color: #3a81c3;">(</span>car <span style="color: #6c3163;">(</span>sort <span style="color: #2d9574;">(</span>mapcar modification-time all-ris-files<span style="color: #2d9574;">)</span>
                                       <span style="color: #2d9574;">(</span><span style="color: #3a81c3; font-weight: bold;">lambda</span> <span style="color: #887070;">(</span>x y<span style="color: #887070;">)</span>
                                         <span style="color: #887070;">(</span>&gt; <span style="color: #3a81c3;">(</span>car x<span style="color: #3a81c3;">)</span> <span style="color: #3a81c3;">(</span>car y<span style="color: #3a81c3;">)</span><span style="color: #887070;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>target-bib <span style="color: #2d9574;">"/home/aez/Downloads/new.bib"</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>ris2xml-command <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"ris2xml %s | xml2bib &gt; %s"</span> ris-filepath
                                  target-bib<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>shell-command ris2xml-command<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Now we need some sensible key-bindings for this functionality. The following aim
to follow the naming used for the functionality because this is easier to
remember. <b>Owner</b> <b>Bibtex</b> <b>X</b> where
</p>

<ul class="org-ul">
<li><b>B</b> for <i>braces</i> around upper case characters,</li>
<li><b>C</b> for <i>convert</i> between RIS and bibtex,</li>
<li><b>F</b> for <i>format</i> the current buffer,</li>
<li><b>L</b> for <i>last</i> bibtex file in <code>Downloads</code> and</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obl"</span> 'last-bib<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obf"</span> 'bibtex-reformat<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obb"</span> 'bibtex-braces<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obc"</span> 'bibtex-ris2bib<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
I often want to be able to open my reading notes quickly so it would be useful
to have a function to do that. This will be bound to <code>olp</code> because it is opening
<i>the</i> PDF.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-open-review-pdf</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Open PDF of reading notes in evince."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>pdf-viewer <span style="color: #2d9574;">"evince"</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span>review-path <span style="color: #2d9574;">"/home/aez/Documents/bibliography/review/review.pdf"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>shell-command <span style="color: #67b11d;">(</span>concat pdf-viewer <span style="color: #2d9574;">" "</span> review-path <span style="color: #2d9574;">" &amp;"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"olp"</span> 'nicemacs-open-review-pdf<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
If you want a word count there is the <code>count-words</code> function. This is used so
infrequently though that it is not really worth adding a binding for it. By
default it counts the words in the current buffer, but if you have selected a
region of text it will count the words and characters there.
</p>
</div>
</div>

<div id="outline-container-org608a292" class="outline-3">
<h3 id="org608a292">Org-mode</h3>
<div class="outline-text-3" id="text-org608a292">
<p>
Bindings for org-mode functionality start with <code>o o</code> for "owner org".
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"oo"</span> <span style="color: #2d9574;">"org-menu"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
for toggle style functions we will have a submenu.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"oot"</span> <span style="color: #2d9574;">"org-toggle-menu"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org2798675" class="outline-4">
<h4 id="org2798675">Writing prose</h4>
<div class="outline-text-4" id="text-org2798675">
<p>
The <code>writeroom-mode</code> provides a clean setup for writing prose. It centres the
text and removes visual distractions. The following little function sets up a
toggle to turn this on and off. There is a variable <code>writeroom-width</code> to specify
how wide the display should be.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">require</span> '<span style="color: #4e3163;">writeroom-mode</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defvar</span> <span style="color: #715ab1;">writeroom-active</span> t <span style="color: #da8b55;">"variable to say if writeroom is active"</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">toggle-writeroom</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Toggle the writeroom-mode on the current buffer."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">if</span> writeroom-active
      <span style="color: #2d9574;">(</span>writeroom--enable<span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>writeroom--disable<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> writeroom-active <span style="color: #2d9574;">(</span>not writeroom-active<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ootw"</span> 'toggle-writeroom<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf24c367" class="outline-4">
<h4 id="orgf24c367">Literate programming</h4>
<div class="outline-text-4" id="text-orgf24c367">
<p>
The <code>org-babel-tangle</code> function will tangle the current org-mode file. This is
bound to <code>SPC m b t</code>. You can tangle to multiple files by adding multiple
<code>:tangle</code> variables to the source environment.
</p>
</div>
</div>

<div id="outline-container-org10be5ad" class="outline-4">
<h4 id="org10be5ad">Notebook programming</h4>
<div class="outline-text-4" id="text-org10be5ad">
<p>
To use org-mode as a notebook, you need to have the corresponding language
included in <code>org-babel-load-languages</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>org-babel-do-load-languages
'org-babel-load-languages
'<span style="color: #6c3163;">(</span><span style="color: #2d9574;">(</span>maxima . t<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>There is an example of using org-mode for Maxima notebooks <a href="https://www.orgmode.org/worg/org-contrib/babel/languages/ob-doc-maxima.html">here</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-orge37d3f8" class="outline-4">
<h4 id="orge37d3f8">Nicemacs journal</h4>
<div class="outline-text-4" id="text-orge37d3f8">
<p>
I want a directory just for my journal which potentially will vary between
machines so a variable to describe where they live is useful. To make it clear
that these are my variables and functions I will try to maintain <code>nicemacs-</code>
prefixes. We will also define some decent settings here.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defvar</span> <span style="color: #715ab1;">nicemacs-journal-directory</span> <span style="color: #2d9574;">""</span> <span style="color: #da8b55;">"The directory for nicemacs journal files."</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> nicemacs-journal-directory <span style="color: #2d9574;">"~/Documents/journal"</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> org-agenda-start-day <span style="color: #2d9574;">"-5d"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> org-agenda-span <span style="color: #4e3163;">30</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> org-agenda-start-on-weekday nil<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
I need a way to talk about what the particular journal file is on any given
date. Updating the file about monthly seems sensible, so the filenames can
follow the pattern <code>journal-YYYY-MM</code>. <b>NOTE</b> that this function will set the
agenda file to the correct value whenever it is called and that the
<code>org-agenda-files</code> variable needs to be bound to a <i>list</i> or files rather than
the name of a single file, otherwise it will interpret that single file as a
list of files to use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-journal-filepath</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"The filepath of the current journal file."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>filepath-template <span style="color: #b1951d;">(</span>concat nicemacs-journal-directory <span style="color: #2d9574;">"/journal-%s.org"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>time-string <span style="color: #b1951d;">(</span>format-time-string <span style="color: #2d9574;">"%Y-%m"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>agenda-file <span style="color: #b1951d;">(</span>format filepath-template time-string<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> org-agenda-files <span style="color: #67b11d;">(</span>list agenda-file<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    agenda-file<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-journal-previous-filepath</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"The filepath of the /previous/ journal file."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>filepath-template <span style="color: #b1951d;">(</span>concat nicemacs-journal-directory <span style="color: #2d9574;">"/journal-%s.org"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>seconds-in-week <span style="color: #b1951d;">(</span>* <span style="color: #4e3163;">7</span> <span style="color: #3a81c3;">(</span>* <span style="color: #4e3163;">24</span> <span style="color: #6c3163;">(</span>* <span style="color: #4e3163;">60</span> <span style="color: #2d9574;">(</span>* <span style="color: #4e3163;">60</span> <span style="color: #4e3163;">1</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>time-string <span style="color: #b1951d;">(</span>format-time-string <span style="color: #2d9574;">"%Y-%m"</span> <span style="color: #3a81c3;">(</span>time-subtract <span style="color: #6c3163;">(</span>current-time<span style="color: #6c3163;">)</span> seconds-in-week<span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>agenda-file <span style="color: #b1951d;">(</span>format filepath-template time-string<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    agenda-file<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
I want functions to quickly visit our current journal file and to visit the
current agenda because this is something I do several times a day. If the
journal file does not exist then we just need to copy over the previous one. To
do this we look for one with a date from a week ago.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-visit-journal</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Opens the current journal file. If it does not yet exist it</span>
<span style="color: #da8b55;">makes a copy of the one from one week ago."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>current-journal-file <span style="color: #b1951d;">(</span>nicemacs-journal-filepath<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span>previous-journal-file <span style="color: #b1951d;">(</span>nicemacs-journal-previous-filepath<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3; font-weight: bold;">if</span> <span style="color: #67b11d;">(</span>not <span style="color: #b1951d;">(</span>file-exists-p current-journal-file<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span><span style="color: #3a81c3; font-weight: bold;">progn</span>
          <span style="color: #b1951d;">(</span>message <span style="color: #2d9574;">"creating new journal file"</span><span style="color: #b1951d;">)</span>
          <span style="color: #b1951d;">(</span>copy-file previous-journal-file current-journal-file<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>message <span style="color: #2d9574;">"opening journal file"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span>find-file current-journal-file<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span>goto-char <span style="color: #4e3163;">1</span><span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span>recenter-top-bottom<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-visit-agenda</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Opens the agenda after checking it has been set correctly."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>agenda-file <span style="color: #b1951d;">(</span>nicemacs-journal-filepath<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>org-agenda-list<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
To make it easy to access these we will bind them to come convenient keys.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ooa"</span> 'nicemacs-visit-agenda<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oos"</span> 'org-schedule<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb99f99" class="outline-4">
<h4 id="orgcb99f99">Website</h4>
<div class="outline-text-4" id="text-orgcb99f99">
<p>
Set up for publishing my website, note that this will write the output directly
to the github repository for the site. Note that the <code>:exclude</code> variable can be
used to specify which files to ignore using a regular expression.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">require</span> '<span style="color: #4e3163;">ox-publish</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> org-publish-project-alist
      '<span style="color: #6c3163;">(</span>
        <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-notes"</span>
         <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/public-site/org/"</span>
         <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"org"</span>
         <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/"</span>
         <span style="color: #3a81c3;">:recursive</span> t
         <span style="color: #3a81c3;">:publishing-function</span> org-html-publish-to-html
         <span style="color: #3a81c3;">:headline-levels</span> <span style="color: #4e3163;">4</span>
         <span style="color: #3a81c3;">:auto-preamble</span> t
         <span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-static"</span>
         <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/public-site/org/"</span>
         <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"css</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">js</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">png</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">jpg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">gif</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">pdf</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">mp3</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">ogg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">swf</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">txt</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">cur</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">svg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">csv</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">html</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">json</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">webp"</span>
         <span style="color: #3a81c3;">:exclude</span> <span style="color: #2d9574;">"~/public-site/org/misc/matplotlib/ven.*"</span>
         <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/"</span>
         <span style="color: #3a81c3;">:recursive</span> t
         <span style="color: #3a81c3;">:publishing-function</span> org-publish-attachment
         <span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-nicemacs"</span>
         <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/Documents/nicemacs/"</span>
         <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"org"</span>
         <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/misc/nicemacs/"</span>
         <span style="color: #3a81c3;">:recursive</span> <span style="color: #67b11d;">()</span>
         <span style="color: #3a81c3;">:publishing-function</span> org-html-publish-to-html
         <span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-bibliography"</span>
       <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/Documents/bibliography/"</span>
       <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"png"</span>
       <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/resources/"</span>
       <span style="color: #3a81c3;">:recursive</span> <span style="color: #67b11d;">()</span>
       <span style="color: #3a81c3;">:publishing-function</span> org-publish-attachment
       <span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org"</span> <span style="color: #3a81c3;">:components</span> <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"org-notes"</span> <span style="color: #2d9574;">"org-static"</span> <span style="color: #2d9574;">"org-nicemacs"</span> <span style="color: #2d9574;">"org-bibliography"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
        <span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The following function simplifies the process of compiling the site and
committing it to github so it goes live. To enable this page to be copied to a
file with a more sensible name and to have easier access to the logo there are
some additional commands.
</p>

<p>
There are two functions here, the first, <code>publish-my-site</code>, is bound to <code>SPC
oop</code> runs the publishing and the second, <code>publish-my-site-and-magit</code>, bound to
<code>SPC ooP</code> runs the publishing and opens the magit buffer to commit and push the
changes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">publish-my-site</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>org-publish <span style="color: #2d9574;">"org"</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>readme <span style="color: #2d9574;">"~/aezarebski.github.io/misc/nicemacs/README.html"</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span>index <span style="color: #2d9574;">"~/aezarebski.github.io/misc/nicemacs/index.html"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3; font-weight: bold;">if</span> <span style="color: #67b11d;">(</span>file-exists-p readme<span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span>copy-file readme index t<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">"~/Documents/nicemacs/resources/nicemacs-logo.png"</span>
             <span style="color: #2d9574;">"~/aezarebski.github.io/misc/nicemacs/resources/nicemacs-logo.png"</span>
             t<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">"~/public-site/org/scratch.html"</span>
             <span style="color: #2d9574;">"~/aezarebski.github.io/index.html"</span>
             t<span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">publish-my-site-and-magit</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>publish-my-site<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>magit-status <span style="color: #2d9574;">"~/aezarebski.github.io"</span><span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oop"</span> 'publish-my-site<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ooP"</span> 'publish-my-site-and-magit<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The following function is useful for going to the root of my notes site which is
a sensible starting point for looking up material without the browser.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">visit-my-site-index</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>find-file <span style="color: #2d9574;">"~/public-site/org/index.org"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oov"</span> 'visit-my-site-index<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
I used to have some commands for inserting tables and source code blocks into
org-mode files, but this functionality (and more) is all provided by
<code>yasnippet</code>. Just run <code>SPC i s</code> and it will start a search for the relevant
snippet: "source" and "table" are in there for example.
</p>

<p>
As of org-mode version about 9.3 the default behaviour appears to be that new
lines will be indented to the level of the current header. I would prefer that
new lines of text start at the start of the line. This can be achieved by
setting <code>org-adapt-indentation</code> to <code>nil</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> org-adapt-indentation nil<span style="color: #3a81c3;">)</span> 
</pre>
</div>
</div>
</div>

<div id="outline-container-org945387a" class="outline-4">
<h4 id="org945387a">Miscellaneous</h4>
<div class="outline-text-4" id="text-org945387a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">open the export menu</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ooe"</span> 'org-export-dispatch<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Make sure org files open with lines truncated</span>
<span style="color: #3a81c3;">(</span>add-hook 'org-mode-hook 'spacemacs/toggle-truncate-lines-on<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org265c626" class="outline-4">
<h4 id="org265c626">Inline Latex and image display</h4>
<div class="outline-text-4" id="text-org265c626">
<p>
Orgmode can display images inline, however it is useful to be able to toggle
this feature occassionally, particularly if there are large images which take up
too much space. There is a function <code>org-toggle-inline-images</code> which does this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ooi"</span> 'org-toggle-inline-images<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The <code>org-latex-preview</code> function will show a preview of the latex fragment under
the mark. Running the command a second time will revert to the plain text.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ool"</span> 'org-latex-preview<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
You can try it in the following expressions \(\alpha\)
</p>

<p>
\[
\frac{a}{b}
\]
</p>
</div>
</div>

<div id="outline-container-org2c47121" class="outline-4">
<h4 id="org2c47121">Hyperlinking in org-mode</h4>
<div class="outline-text-4" id="text-org2c47121">
<p>
By default, when you follow a link it will open in a new window in the current
frame. To follow links in the same window, you need to adjust the
<code>org-link-frame-setup</code> variable<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">require</span> '<span style="color: #4e3163;">ol</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>add-to-list 'org-link-frame-setup '<span style="color: #6c3163;">(</span>file . find-file<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
We know that we need to <code>(require 'ol)</code> here by looking at the end of the file
in which <code>org-link-frame-setup</code> is defined and seeing what it "provides" at the
end.
</p>
</div>
</div>
</div>

<div id="outline-container-org92680e3" class="outline-3">
<h3 id="org92680e3">Shells</h3>
<div class="outline-text-3" id="text-org92680e3">
<p>
To make <code>eshell</code> the default shell in spacemacs add the following to the
<code>dotspacemacs-configuration-layers</code>. The position and width might need a bit of
tweaking to get something you like, but it is pretty easy to adjust the window
set up anyway.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>shell <span style="color: #3a81c3;">:variables</span>
       shell-default-shell 'eshell
       shell-default-position 'right
       shell-default-width <span style="color: #4e3163;">50</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Sometimes it is nice to be able to quickly open a larger terminal window, the
following does this. The mnemonic here is that we are using the bigger quote
mark so it opens the bigger terminal window.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">shell-and-delete-windows</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>spacemacs/default-pop-shell<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>delete-other-windows<span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"\""</span> 'shell-and-delete-windows<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
It is useful to have a prefix for more involved shell related commands
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"os"</span> <span style="color: #2d9574;">"sheila-menu"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The following is for searching the shell history, but I rarely use it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"osh"</span> 'helm-eshell-history<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Sometimes it is useful to just be able to open a regular bash shell. The
following binding helps with this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"osb"</span> 'shell<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
It is useful to be able to look at what aliases are currently defined for
eshell. The following function visits this file. Although the preferred way to
edit the aliases in the eshell is using the definitions below!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">eshell-aliases</span> <span style="color: #6c3163;">()</span>
    <span style="color: #da8b55;">"Visit the file containing the eshell aliases."</span>
    <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
    <span style="color: #6c3163;">(</span>find-file-other-window eshell-aliases-file<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"osa"</span> 'eshell-aliases<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
If you want to create an alias in the eshell the following examples of a command
to run in the shell will achieve this.
</p>

<pre class="example">
alias cdk cd ..
alias ff find-file $1
</pre>

<p>
It is useful to be able to have these specified in code though in case the alias
file gets lost during an upgrade. The following expressions set up some useful
aliases to have in the shell.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">require</span> '<span style="color: #4e3163;">em-alias</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>eshell/alias <span style="color: #2d9574;">"cdk"</span> <span style="color: #2d9574;">"cd .."</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>eshell/alias <span style="color: #2d9574;">"cdkk"</span> <span style="color: #2d9574;">"cd ../.."</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>eshell/alias <span style="color: #2d9574;">"cdkkk"</span> <span style="color: #2d9574;">"cd ../../.."</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>eshell/alias <span style="color: #2d9574;">"ff"</span> <span style="color: #2d9574;">"find-file $1"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Because no one has time for typing capital letters we will set the completion
variable in the shell to ignore case during tab completion.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> eshell-cmpl-ignore-case t<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The value of <code>exec-path</code> is the list of locations that emacs will look for
executables on. The <code>executable-find</code> function plays the role of <code>which</code> for
emacs. We need to add <code>~/.local/bin</code> so that it knows where to find haskell
executables and the <code>.nvm</code> path is so that it knows where to find javascript
programs that have been installed from npm.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> exec-path <span style="color: #6c3163;">(</span>append exec-path '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"/home/aez/.local/bin"</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> exec-path <span style="color: #6c3163;">(</span>append exec-path '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"/home/aez/.nvm/versions/node/v14.6.0/bin"</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4339bac" class="outline-3">
<h3 id="org4339bac">Emacs Speaks Statistics</h3>
<div class="outline-text-3" id="text-org4339bac">
<p>
There are some useful materials about ESS which I have contributed to in the <a href="https://ess-intro.github.io/">ESS
intro</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> spacemacs/ess-config
      '<span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">progn</span>
         <span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Follow Hadley Wickham's R style guide</span>
         <span style="color: #2d9574;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> ess-first-continued-statement-offset <span style="color: #4e3163;">2</span>
               ess-continued-statement-offset <span style="color: #4e3163;">0</span>
               ess-expression-offset <span style="color: #4e3163;">2</span>
               ess-nuke-trailing-whitespace-p t
               ess-default-style 'DEFAULT<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #3a81c3; font-weight: bold;">when</span> ess-disable-underscore-assign
           <span style="color: #67b11d;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> ess-smart-S-assign-key nil<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>

         <span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">(define-key ess-doc-map "h" 'ess-display-help-on-object)</span>
         <span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">(define-key ess-doc-map "p" 'ess-R-dv-pprint)</span>
         <span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">(define-key ess-doc-map "t" 'ess-R-dv-ctable)</span>
         <span style="color: #2d9574;">(</span><span style="color: #3a81c3; font-weight: bold;">dolist</span> <span style="color: #67b11d;">(</span>mode '<span style="color: #b1951d;">(</span>ess-r-mode ess-mode<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">make documentation open in a useful mode in ess</span>
<span style="color: #3a81c3;">(</span>evil-set-initial-state 'ess-r-help-mode 'motion<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org4cdf60b" class="outline-4">
<h4 id="org4cdf60b">LSP with ESS</h4>
<div class="outline-text-4" id="text-org4cdf60b">
<p>
Spacemacs provides good keybindings out of the box, and after setting up LSP
there is very little need to do any additional configuration for a nice R
experience. You just need to remember to install <code>languageserver</code> from CRAN.
</p>

<p>
<b>HOWEVER</b> I have found it laggy so if you want to disable this and use a
different backend adjust your layer config with the following
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>ess <span style="color: #3a81c3;">:variables</span>
     ess-r-backend 'ess<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0695082" class="outline-4">
<h4 id="org0695082"><span class="todo TODO">TODO</span> Fix the buffer display settings so that help covers the REPL</h4>
<div class="outline-text-4" id="text-org0695082">
<p>
The following might be useful as a starting point for this
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>info <span style="color: #2d9574;">"(ess) Controlling buffer display"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6dbd547" class="outline-4">
<h4 id="org6dbd547">Setting up <code>lintr</code> for static analysis</h4>
<div class="outline-text-4" id="text-org6dbd547">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> ess-use-flymake nil<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">use-package</span> <span style="color: #4e3163;">flycheck</span>
  <span style="color: #3a81c3;">:ensure</span> t
  <span style="color: #3a81c3;">:init</span>
  <span style="color: #6c3163;">(</span>global-flycheck-mode t<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcfe29d7" class="outline-3">
<h3 id="orgcfe29d7">Version control via magit</h3>
<div class="outline-text-3" id="text-orgcfe29d7">
<p>
The following setting makes magit use the full frame when visiting the status.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">setq</span> magit-display-buffer-function 'magit-display-buffer-fullframe-status-v1<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
There are a few projects where the same commit message use used often. It would
be nice to have a macro to fill this in each time for me. Since this is working
with commits I will use the prefix "c" followed by an indicator of the appropriate
commit message to use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"oc"</span> <span style="color: #2d9574;">"commits-menu"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Apparently, this is <a href="https://xkcd.com/1205/">worth the time&#x2026;</a> After staging the
necessary files use <code>SPC o c j</code> for <i>journal</i>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">journal-commit-function</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Create a commit and insert a string describing a generic</span>
<span style="color: #da8b55;">commit to my journal file. This should be fun from the magit</span>
<span style="color: #da8b55;">buffer"</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>date-string <span style="color: #b1951d;">(</span>downcase <span style="color: #3a81c3;">(</span>format-time-string <span style="color: #2d9574;">"%A %l:%M %p"</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>edit-string <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"-mupdate tasklist %s"</span>  date-string<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>magit-commit-create `<span style="color: #67b11d;">(</span><span style="color: #2d9574;">"--edit"</span>, edit-string<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ocj"</span> 'journal-commit-function<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orga80ac98"></a><span class="todo TODO">TODO</span> This should really finish the commit and push it as well!<br /></li>

<li><a id="org1cf225f"></a><span class="todo TODO">TODO</span> There is a lot of duplicated code here! This should be refactored.<br />
<div class="outline-text-5" id="text-org1cf225f">
<p>
And when updating my <i>web</i> page use <code>SPC o c w</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">website-commit-function</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>date-string <span style="color: #b1951d;">(</span>downcase <span style="color: #3a81c3;">(</span>format-time-string <span style="color: #2d9574;">"%A %l:%M %p"</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>edit-string <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"-mupdate website %s"</span>  date-string<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>magit-commit-create `<span style="color: #67b11d;">(</span><span style="color: #2d9574;">"--edit"</span>, edit-string<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ocw"</span> 'website-commit-function<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
And when we are updating the reading list it is always the same&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">review-commit-function</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>date-string <span style="color: #b1951d;">(</span>downcase <span style="color: #3a81c3;">(</span>format-time-string <span style="color: #2d9574;">"%A %l:%M %p"</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>edit-string <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"-mupdate reading list %s"</span>  date-string<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>magit-commit-create `<span style="color: #67b11d;">(</span><span style="color: #2d9574;">"--edit"</span>, edit-string<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ocr"</span> 'review-commit-function<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org7f3f12e" class="outline-3">
<h3 id="org7f3f12e">File and buffer manipulation</h3>
<div class="outline-text-3" id="text-org7f3f12e">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">kill-all-other-buffers</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Kill all the buffers other than the current one."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>mapc 'kill-buffer <span style="color: #2d9574;">(</span>delq <span style="color: #67b11d;">(</span>current-buffer<span style="color: #67b11d;">)</span> <span style="color: #67b11d;">(</span>buffer-list<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Define a short cut to close all windows except the current one without killing</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">their buffers.</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"wD"</span> 'spacemacs/window-manipulation-transient-state/delete-other-windows<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Define a short cut for C-g which is a little awkward.</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"og"</span> 'keyboard-quit<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Define a short cut for following files</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"of"</span> <span style="color: #2d9574;">"file-stuff"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"off"</span> 'find-file-at-point<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofp"</span> 'helm-projectile-find-file<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org555713a" class="outline-4">
<h4 id="org555713a">Visiting friends</h4>
<div class="outline-text-4" id="text-org555713a">
<p>
The following functionality is useful for defining visitors of frequently needed
files.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-visit-friend</span> <span style="color: #6c3163;">(</span>filepath filename<span style="color: #6c3163;">)</span>
  <span style="color: #da8b55;">"Visit a frequently used file."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>message <span style="color: #2d9574;">(</span>format <span style="color: #2d9574;">"Visiting %s"</span> filename<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>find-file filepath<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ov"</span> <span style="color: #2d9574;">"visit friendly files"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Then we need to define the actual files that we want listed
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-nicemacs</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>nicemacs-visit-friend
   <span style="color: #2d9574;">"~/Documents/nicemacs/README.org"</span>
   <span style="color: #2d9574;">"nicemacs readme"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-colleagues</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>nicemacs-visit-friend
   <span style="color: #2d9574;">"~/Documents/professional/colleague-details.org"</span>
   <span style="color: #2d9574;">"colleagues notes"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-journal</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>nicemacs-visit-journal<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-spelling</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>nicemacs-visit-friend
   <span style="color: #2d9574;">"/home/aez/public-site/org/misc/spelling.org"</span>
   <span style="color: #2d9574;">"spelling"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-reading-list</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>nicemacs-visit-friend
   <span style="color: #2d9574;">"/home/aez/Documents/bibliography/review/reading-list.tex"</span>
   <span style="color: #2d9574;">"reading list"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-website</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>dired-jump nil <span style="color: #2d9574;">"/home/aez/public-site/org/index.org"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-references</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>nicemacs-visit-friend
   <span style="color: #2d9574;">"/home/aez/Documents/bibliography/references.bib"</span>
   <span style="color: #2d9574;">"references bibtex"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-last-bib</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>last-bib<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
We can also define visiting functions for a dired buffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-professional</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>dired-jump nil <span style="color: #2d9574;">"/home/aez/Documents/professional/README.org"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
And finally we need to writing keybindings for these.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys
  <span style="color: #2d9574;">"ovb"</span> 'nvf-last-bib
  <span style="color: #2d9574;">"ovc"</span> 'nvf-colleagues
  <span style="color: #2d9574;">"ovj"</span> 'nicemacs-visit-journal
  <span style="color: #2d9574;">"ovl"</span> 'nvf-reading-list
  <span style="color: #2d9574;">"ovn"</span> 'nvf-nicemacs
  <span style="color: #2d9574;">"ovr"</span> 'nvf-references
  <span style="color: #2d9574;">"ovp"</span> 'nvf-professional
  <span style="color: #2d9574;">"ovs"</span> 'nvf-spelling
  <span style="color: #2d9574;">"ovw"</span> 'nvf-website<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ba9781" class="outline-4">
<h4 id="org7ba9781">Ibuffer</h4>
<div class="outline-text-4" id="text-org7ba9781">
<p>
The Ibuffer menu provides a more featureful dired-like menu for buffers.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofb"</span> 'ibuffer<span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Open Ibuffer in the motion state rather than as the default emacs mode.</span>
<span style="color: #3a81c3;">(</span>evil-set-initial-state 'ibuffer-mode 'motion<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The navigation mode for ibuffer needs to be adjusted to work nicely with vim
keybindings.
</p>
</div>
</div>

<div id="outline-container-orgc5173b6" class="outline-4">
<h4 id="orgc5173b6">Misc</h4>
<div class="outline-text-4" id="text-orgc5173b6">
<p>
Sometimes it is useful to get the directory of the file shown in a buffer. This
is bound to <code>SPC o f d</code> for owner-files-directory.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">message-working-directory</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Print the directory of the current buffer."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>message default-directory<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofd"</span> 'message-working-directory<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3bee833" class="outline-3">
<h3 id="org3bee833">Unicode and Greek letters</h3>
<div class="outline-text-3" id="text-org3bee833">
<p>
To insert a unicode character based on its name use <code>C-x 8 RET</code>. Since typically
this is just the Greek letters we can define the following function to make this
easier. 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek</span> <span style="color: #6c3163;">(</span>case-name letter-name<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert <span style="color: #2d9574;">(</span>char-from-name <span style="color: #67b11d;">(</span>upcase <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"GREEK %s LETTER %s"</span> case-name letter-name<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
For example, to insert a lower case alpha, you would use <code>(insert-greek "small"
"alpha")</code>. Then we can add key bindings for this <code>SPC o u &lt;l&gt;</code> to insert the
Greek letter.
</p>
</div>

<div id="outline-container-orgd87be85" class="outline-4">
<h4 id="orgd87be85"><span class="todo TODO">TODO</span> Work out how to abstract this with a macro.</h4>
<div class="outline-text-4" id="text-orgd87be85">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ou"</span> <span style="color: #2d9574;">"unicode-stuff"</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-alpha</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"alpha"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-alpha</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"alpha"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oua"</span> 'insert-greek-small-alpha<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouA"</span> 'insert-greek-capital-alpha<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-beta</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"beta"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-beta</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"beta"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oub"</span> 'insert-greek-small-beta<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouB"</span> 'insert-greek-capital-beta<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-gamma</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"gamma"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-gamma</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"gamma"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oug"</span> 'insert-greek-small-gamma<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouG"</span> 'insert-greek-capital-gamma<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-delta</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"delta"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-delta</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"delta"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oud"</span> 'insert-greek-small-delta<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouD"</span> 'insert-greek-capital-delta<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-theta</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"theta"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-theta</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"theta"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"outh"</span> 'insert-greek-small-theta<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouTh"</span> 'insert-greek-capital-theta<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-lambda</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"lambda"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-lambda</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"lambda"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oul"</span> 'insert-greek-small-lambda<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouL"</span> 'insert-greek-capital-lambda<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-mu</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"mu"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-mu</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"mu"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oum"</span> 'insert-greek-small-mu<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouM"</span> 'insert-greek-capital-mu<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-nu</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"nu"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-nu</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"nu"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oun"</span> 'insert-greek-small-nu<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouN"</span> 'insert-greek-capital-nu<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-rho</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"rho"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-rho</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"rho"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"our"</span> 'insert-greek-small-rho<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouR"</span> 'insert-greek-capital-rho<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-sigma</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"sigma"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-sigma</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"sigma"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ous"</span> 'insert-greek-small-sigma<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouS"</span> 'insert-greek-capital-sigma<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-psi</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"psi"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-psi</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"psi"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oups"</span> 'insert-greek-small-psi<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-small-omega</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"small"</span> <span style="color: #2d9574;">"omega"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defun</span> <span style="color: #6c3163; font-weight: bold;">insert-greek-capital-omega</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3; font-weight: bold;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>insert-greek <span style="color: #2d9574;">"capital"</span> <span style="color: #2d9574;">"omega"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ouo"</span> 'insert-greek-small-omega<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org8f5af0f" class="outline-2">
<h2 id="org8f5af0f">Yasnippet snippets</h2>
<div class="outline-text-2" id="text-org8f5af0f">
<p>
Snippets usually live in <code>~/.emacs.d/private/snippets</code> in a directory which is
named after the major mode for them to be used in. You need to
<code>yas-recompile-all</code> and <code>yas-reload-all</code> for any changes to the snippets to take
effect.
</p>

<p>
<b>WARNING!</b> Tangling this file will write the snippets to your private snippet
directory which is convenient for me but may not be desirable for everyone. It
is set this way so that I don't have to remember to copy the tangled files over
all the time. To generate the directories that the snippets will be tangled to
you can run the following.
</p>

<p>
The <code>files--ensure-directory</code> function will create these directories if they do
not already exist.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>files--ensure-directory <span style="color: #2d9574;">"~/.emacs.d/private/snippets/ess-r-mode"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>files--ensure-directory <span style="color: #2d9574;">"~/.emacs.d/private/snippets/json-mode"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>files--ensure-directory <span style="color: #2d9574;">"~/.emacs.d/private/snippets/web-mode"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>files--ensure-directory <span style="color: #2d9574;">"~/.emacs.d/private/snippets/org-mode"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-orgf67b856" class="outline-3">
<h3 id="orgf67b856">Yasnippet configuration</h3>
<div class="outline-text-3" id="text-orgf67b856">
<p>
I have started to get some weird warnings which <a href="https://github.com/syl20bnr/spacemacs/issues/12648">this issue</a> suggests may be
something breaking in Emacs 27, but can be silenced with the following.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">defvaralias</span>
  'helm-c-yas-space-match-any-greedy
  'helm-yas-space-match-any-greedy
  <span style="color: #da8b55;">"Temporary alias for Emacs27"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
For some unknown reason, when I try to insert a snippet in the JSON mode I get
an error, "No JavaScript AST available". Things are working fine in other modes
so this might be something javascript specific, in which case, it is probably
easier just to call <code>yas-insert-snippet</code> directly when editing JSON.
</p>
</div>
</div>

<div id="outline-container-org5b5e249" class="outline-3">
<h3 id="org5b5e249">R</h3>
<div class="outline-text-3" id="text-org5b5e249">
<p>
The R snippets can be roughly devided into those that provide useful <a href="#orgeb3d0c2">Useful package collections</a> and those that provide <a href="#org9ae92c1">Useful programming snippets</a>. Those
that provide packages have a key which starts with <code>rpack-</code> and those that
provide programming constructs start with <code>rhelp-</code>.
</p>
</div>

<div id="outline-container-orgeb3d0c2" class="outline-4">
<h4 id="orgeb3d0c2">Useful package collections</h4>
<div class="outline-text-4" id="text-orgeb3d0c2">
<p>
A snippet to include the basic packages which are pretty safe to import by
default.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Standard R packages</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rpacks</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>
library<span style="color: #3a81c3;">(</span>dplyr<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>ggplot2<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>magrittr<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>purrr<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
A snippet to include some extra packages that are often useful but probably
aren't needed enough to be imported by default.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Extra R packages</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rpacks-extra</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>
library<span style="color: #3a81c3;">(</span>jsonlite<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>reshape2<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>stringr<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>whisker<span style="color: #3a81c3;">)</span>  
</pre>
</div>

<p>
A snippet to include packages that are useful when working with geographic data
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: R packages for computational geography</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rpacks-geo</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>
library<span style="color: #3a81c3;">(</span>countrycode<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>sf<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
A snippet to include packages that are useful for doing MCMC
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: R packages for MCMC</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rpacks-mcmc</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>
library<span style="color: #3a81c3;">(</span>mcmc<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>coda<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ae92c1" class="outline-4">
<h4 id="org9ae92c1">Useful programming snippets</h4>
<div class="outline-text-4" id="text-org9ae92c1">
</div>
<ul class="org-ul">
<li><a id="org9ea8d59"></a>Writing CSV<br />
<div class="outline-text-5" id="text-org9ea8d59">
<p>
A snippet with sensible defaults for writing a data frame to CSV
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: CSV output from R using write.table</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-table</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

write.table<span style="color: #3a81c3;">(</span>x = <span style="color: #3a81c3; font-weight: bold;">$</span><span style="color: #2d9574;">1</span>,
            file = <span style="color: #3a81c3; font-weight: bold;">$</span><span style="color: #2d9574;">2</span>,
            sep = <span style="color: #2d9574;">","</span>,
            row.names = FALSE<span style="color: #3a81c3;">)</span>

<span style="color: #dc752f; background-color: #fbf8ef;">$</span><span style="color: #2d9574;">0</span>
</pre>
</div>
</div>
</li>

<li><a id="orgac060cf"></a>Writing JSON<br />
<div class="outline-text-5" id="text-orgac060cf">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: JSON output from R using jsonlite</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-json-output</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

jsonlite::write_json<span style="color: #3a81c3;">(</span>
  x = <span style="color: #3a81c3; font-weight: bold;">$</span><span style="color: #2d9574;">1</span>,
  path = <span style="color: #3a81c3; font-weight: bold;">$</span><span style="color: #2d9574;">2</span>,
  auto_unbox = T
<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3; font-weight: bold;">$</span><span style="color: #2d9574;">0</span>
</pre>
</div>
</div>
</li>

<li><a id="org0664c56"></a>Writing HTML<br />
<div class="outline-text-5" id="text-org0664c56">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Programmatically generating HTML</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-html</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>
library<span style="color: #3a81c3;">(</span>htmltools<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>base64enc<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#' An HTML tag encoding an image stored in a PNG.</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#'</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#' This uses the \code</span><span style="color: #3a81c3; background-color: #ecf3ec;">{</span><span style="color: #2aa1ae; background-color: #ecf3ec;">base64enc</span><span style="color: #3a81c3; background-color: #ecf3ec;">}</span><span style="color: #2aa1ae; background-color: #ecf3ec;"> and \code</span><span style="color: #3a81c3; background-color: #ecf3ec;">{</span><span style="color: #2aa1ae; background-color: #ecf3ec;">htmltools</span><span style="color: #3a81c3; background-color: #ecf3ec;">}</span><span style="color: #2aa1ae; background-color: #ecf3ec;"> packages.</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#'</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#' @param filepath is the path to the PNG</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#' @param ... is additional arguments to \code</span><span style="color: #3a81c3; background-color: #ecf3ec;">{</span><span style="color: #2aa1ae; background-color: #ecf3ec;">tags$img</span><span style="color: #3a81c3; background-color: #ecf3ec;">}</span><span style="color: #2aa1ae; background-color: #ecf3ec;"> such as style.</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#'</span>
png_as_img &lt;- function<span style="color: #3a81c3;">(</span>filepath, ...<span style="color: #3a81c3;">)</span> <span style="color: #3a81c3;">{</span>
  if <span style="color: #6c3163;">(</span>tools::file_ext<span style="color: #2d9574;">(</span>filepath<span style="color: #2d9574;">)</span> == <span style="color: #2d9574;">"png"</span><span style="color: #6c3163;">)</span> <span style="color: #6c3163;">{</span>
    b64 &lt;- base64enc::base64encode<span style="color: #2d9574;">(</span>what = filepath<span style="color: #2d9574;">)</span>
    tags$img<span style="color: #2d9574;">(</span>
      src = paste<span style="color: #67b11d;">(</span><span style="color: #2d9574;">"data:image/png;base64"</span>, b64, sep = <span style="color: #2d9574;">","</span><span style="color: #67b11d;">)</span>,
      ...
    <span style="color: #2d9574;">)</span>
  <span style="color: #6c3163; font-weight: bold;">}</span> <span style="color: #dc752f; background-color: #fbf8ef;">else </span><span style="color: #6c3163; background-color: #fbf8ef;">{</span>
    stop<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"Filepath given to png_as_img must be a PNG."</span><span style="color: #2d9574;">)</span>
  <span style="color: #6c3163; font-weight: bold;">}</span>
<span style="color: #3a81c3; font-weight: bold;">}</span>

html_body &lt;-
  tags$body<span style="color: #3a81c3;">(</span>
    tags$h1<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"Hello World!"</span><span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

save_html<span style="color: #3a81c3;">(</span>html_body, file = <span style="color: #2d9574;">"index.html"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org3adb32b"></a>Main function<br />
<div class="outline-text-5" id="text-org3adb32b">
<p>
A snippet to provide a main function which only runs when the script is called
from the command line and passes any command line arguments through.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Main function for an R script to be used at the command line</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-main</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

main &lt;- function<span style="color: #3a81c3;">(</span>args<span style="color: #3a81c3;">)</span> <span style="color: #3a81c3;">{</span>
  <span style="color: #3a81c3; font-weight: bold;">$</span><span style="color: #2d9574;">0</span>
<span style="color: #3a81c3; font-weight: bold;">}</span>

if <span style="color: #3a81c3;">(</span>!interactive<span style="color: #6c3163;">()</span><span style="color: #3a81c3;">)</span> <span style="color: #3a81c3;">{</span>
  args &lt;- commandArgs<span style="color: #6c3163;">(</span>trailingOnly = TRUE<span style="color: #6c3163;">)</span>
  # if you are using argparse this might help...
  # args &lt;- parser$parse_args<span style="color: #6c3163;">()</span>
  main<span style="color: #6c3163;">(</span>args<span style="color: #6c3163;">)</span>
<span style="color: #3a81c3; font-weight: bold;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org4b1575c"></a>Parse command line arguments<br />
<div class="outline-text-5" id="text-org4b1575c">
<p>
The <a href="https://cran.r-project.org/web/packages/argparse/index.html">argparse</a> library, inspired by the python equivalent, provides a simple way
to build up CLIs.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Example of how to use the argparse library</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-argparse</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

library<span style="color: #3a81c3;">(</span>argparse<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># create parser object</span>
parser &lt;- ArgumentParser<span style="color: #3a81c3;">()</span>

parser$add_argument<span style="color: #3a81c3;">(</span>
         <span style="color: #2d9574;">"-v"</span>,
         <span style="color: #2d9574;">"--verbose"</span>,
         action = <span style="color: #2d9574;">"store_true"</span>,
         default = FALSE,
         help = <span style="color: #2d9574;">"Verbose output"</span>
       <span style="color: #3a81c3;">)</span>
parser$add_argument<span style="color: #3a81c3;">(</span>
         <span style="color: #2d9574;">"-s"</span>,
         <span style="color: #2d9574;">"--seed"</span>,
         type = <span style="color: #2d9574;">"integer"</span>,
         default = <span style="color: #4e3163;">1</span>,
         help = <span style="color: #2d9574;">"PRNG seed"</span>
       <span style="color: #3a81c3;">)</span>
parser$add_argument<span style="color: #3a81c3;">(</span>
         <span style="color: #2d9574;">"-p"</span>,
         <span style="color: #2d9574;">"--parameters"</span>,
         type = <span style="color: #2d9574;">"character"</span>,
         help = <span style="color: #2d9574;">"Filepath to parameters JSON"</span>
       <span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>


<div id="outline-container-orgeeaabf6" class="outline-3">
<h3 id="orgeeaabf6">Vega-Lite</h3>
<div class="outline-text-3" id="text-orgeeaabf6">
<p>
The following files need to be moved into the correct snippet directory for your
configuration.
</p>

<p>
A snippet for a very simple scatter plot in vega-lite.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: vega-lite scatter plot</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: vl-scatter-plot</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

<span style="color: #3a81c3;">{</span>
    <span style="color: #2d9574;">"$schema"</span>: <span style="color: #2d9574;">"https://vega.github.io/schema/vega-lite/v4.json"</span>,
    <span style="color: #2d9574;">"data"</span>: <span style="color: #6c3163;">{</span>
        <span style="color: #2d9574;">"url"</span>: <span style="color: #2d9574;">"$1"</span>
    <span style="color: #6c3163; font-weight: bold;">}</span>,
    <span style="color: #2d9574;">"mark"</span>: <span style="color: #2d9574;">"point"</span>,
    <span style="color: #2d9574;">"encoding"</span>: <span style="color: #6c3163;">{</span>
        <span style="color: #2d9574;">"x"</span>: <span style="color: #2d9574;">{</span>
            <span style="color: #2d9574;">"field"</span>: <span style="color: #2d9574;">"$2"</span>,
            <span style="color: #2d9574;">"type"</span>: <span style="color: #2d9574;">"quantitative"</span>
        <span style="color: #2d9574; font-weight: bold;">}</span>,
        <span style="color: #2d9574;">"y"</span>: <span style="color: #2d9574;">{</span>
            <span style="color: #2d9574;">"field"</span>: <span style="color: #2d9574;">"$3"</span>,
            <span style="color: #2d9574;">"type"</span>: <span style="color: #2d9574;">"quantitative"</span>
        <span style="color: #2d9574; font-weight: bold;">}</span>
    <span style="color: #6c3163; font-weight: bold;">}</span>
<span style="color: #3a81c3; font-weight: bold;">}</span>
</pre>
</div>

<p>
A snippet for a very simple histogram in vega-lite.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: vega-lite histogram</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: vl-histogram</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

<span style="color: #3a81c3;">{</span>
    <span style="color: #2d9574;">"$schema"</span>: <span style="color: #2d9574;">"https://vega.github.io/schema/vega-lite/v4.json"</span>,
    <span style="color: #2d9574;">"data"</span>: <span style="color: #6c3163;">{</span>
        <span style="color: #2d9574;">"url"</span>: <span style="color: #2d9574;">"$1"</span>
    <span style="color: #6c3163; font-weight: bold;">}</span>,
    <span style="color: #2d9574;">"mark"</span>: <span style="color: #2d9574;">"bar"</span>,
    <span style="color: #2d9574;">"encoding"</span>: <span style="color: #6c3163;">{</span>
        <span style="color: #2d9574;">"x"</span>: <span style="color: #2d9574;">{</span>
            <span style="color: #2d9574;">"bin"</span>: true,
            <span style="color: #2d9574;">"field"</span>: <span style="color: #2d9574;">"$2"</span>
        <span style="color: #2d9574; font-weight: bold;">}</span>,
        <span style="color: #2d9574;">"y"</span>: <span style="color: #2d9574;">{</span>
            <span style="color: #2d9574;">"aggregate"</span>: <span style="color: #2d9574;">"count"</span>
        <span style="color: #2d9574; font-weight: bold;">}</span>
    <span style="color: #6c3163; font-weight: bold;">}</span>
<span style="color: #3a81c3; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org545aaec" class="outline-3">
<h3 id="org545aaec">Org-mode</h3>
<div class="outline-text-3" id="text-org545aaec">
</div>
<div id="outline-container-org0202a96" class="outline-4">
<h4 id="org0202a96">header</h4>
<div class="outline-text-4" id="text-org0202a96">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: header</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: header</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#+header: </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org99338b0" class="outline-4">
<h4 id="org99338b0">name</h4>
<div class="outline-text-4" id="text-org99338b0">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: name</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: name</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#+name: </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org17cf684" class="outline-4">
<h4 id="org17cf684">title</h4>
<div class="outline-text-4" id="text-org17cf684">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: title</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: title</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#+title: </span>
</pre>
</div>

<p>
Unfortunately it is very difficult to write a source block snippet in this
literate programming style, so you probably just want to do that manually.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org93fca71" class="outline-2">
<h2 id="org93fca71">Maxima</h2>
<div class="outline-text-2" id="text-org93fca71">
<p>
See <a href="https://github.com/dalanicolai/maxima-layer">maxima-layer</a> by <a href="https://dalanicolai.github.io/">Daniel Nicolai</a>. 
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
The <code>add-to-list</code> function is used to add elements to the start of a
list, this should only be used in configuration code; use <code>push</code> to add elements
to a list in emacs-lisp.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Alex Zarebski</p>
<p class="date">Created: 2021-09-22 Wed 09:53</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
