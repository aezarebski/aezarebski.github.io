<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-12-11 Sun 13:18 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NICEMACS</title>
<meta name="author" content="Alexander E. Zarebski" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link id="stylesheet" rel="stylesheet" type="text/css" href="../../css/stylesheet.css" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">NICEMACS</h1>

<div id="org8a5d346" class="figure">
<p><img src="./resources/nicemacs-logo.png" alt="nicemacs-logo.png" width="300px" />
</p>
</div>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org49f59b9">Vanilla Emacs</a>
<ul>
<li><a href="#org2a1cbce">Build you an Emacs</a></li>
<li><a href="#orgf1a52a0">Running you an Emacs</a></li>
<li><a href="#org5fd2766">Recording keyboard macros</a></li>
<li><a href="#org16a720b">Jargon</a></li>
<li><a href="#orgc5bc19b">Getting HELP</a></li>
</ul>
</li>
<li><a href="#org9783414">Nicemacs</a>
<ul>
<li><a href="#org97fc091">Broken spacemacs dot file?</a></li>
<li><a href="#org859b0cf">Debugging</a></li>
<li><a href="#org1a61412">Code navigation</a></li>
<li><a href="#orgd2475c7">Recursive grep</a></li>
<li><a href="#orge87541b">System</a></li>
<li><a href="#org263b111">Spacemacs shortcuts</a></li>
<li><a href="#orgcfd5c0e">Usage notes</a></li>
<li><a href="#orgf5913a3">Stuff</a></li>
<li><a href="#org87e694a">Completion</a></li>
<li><a href="#org99683d1">LSP</a></li>
<li><a href="#orge63fceb">Haskell</a></li>
<li><a href="#org0c89066">Maxima</a></li>
<li><a href="#orga39104c">JavaScript and Typescript</a></li>
<li><a href="#org8239a70">Miscellaneous configuration for writing</a></li>
<li><a href="#org5cecdd9">Spelling and Dictionaries</a></li>
<li><a href="#org0404ba0">Latex and Bibtex</a></li>
<li><a href="#org34cf521">Org-mode</a></li>
<li><a href="#org62ac220">Website</a></li>
<li><a href="#orgc6c2175">Shells and REPLs</a></li>
<li><a href="#orgd14ecbe">Monitoring processes</a></li>
<li><a href="#org4020f81">Emacs Speaks Statistics (ESS)</a></li>
<li><a href="#org5f02924">Version control via magit</a></li>
<li><a href="#org479e3e5">Spray</a></li>
<li><a href="#orgc0c2350"><span class="todo TODO">TODO</span> File and buffer manipulation</a></li>
<li><a href="#orgc1123c2">Unicode and Greek letters</a></li>
<li><a href="#org22f7d5e"><span class="todo TODO">TODO</span> XML editing</a></li>
<li><a href="#orga08d59e">Yasnippet snippets</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org49f59b9" class="outline-2">
<h2 id="org49f59b9">Vanilla Emacs</h2>
<div class="outline-text-2" id="text-org49f59b9">
</div>
<div id="outline-container-org2a1cbce" class="outline-3">
<h3 id="org2a1cbce">Build you an Emacs</h3>
<div class="outline-text-3" id="text-org2a1cbce">
<p>
Get the source code from <a href="http://git.savannah.gnu.org/cgit/emacs.git/">here</a> with
</p>

<div class="org-src-container">
<pre class="src src-sh">wget http://git.savannah.gnu.org/cgit/emacs.git/snapshot/emacs-VERSION.tar.gz
tar -xf emacs-VERSION.tar.xz
</pre>
</div>

<p>
Alternatively, you can get clone the <a href="https://github.com/emacs-mirror/emacs">emacs mirror</a> from GitHub and check out the
<code>emacs-28</code> branch (or whatever version you want).
</p>

<p>
Follow the instructions in the <code>INSTALL</code> file to build emacs.
</p>
<ul class="org-ul">
<li>This seems to just be <code>./configure</code> then <code>make</code> then <code>sudo make install</code>.
<ul class="org-ul">
<li><code>./configure --with-native-compilation --with-rsvg</code>.</li>
</ul></li>
<li>If you cannot find the <code>configure</code> script, you may need to run <code>autogen.sh</code> first.</li>
<li>If you have spare compute you can use multiple jobs to speed up the
compilation with <code>make -j [N]</code> to use <code>N</code> jobs during compilation</li>
</ul>
</div>

<div id="outline-container-org1098caf" class="outline-4">
<h4 id="org1098caf">Notes</h4>
<div class="outline-text-4" id="text-org1098caf">
<ul class="org-ul">
<li><code>emacs-28.2</code></li>
<li><code>emacs-28.1.90</code> configured with <code>--with-native-compilation</code> and <code>--with-rsvg</code>.
Building this one seemed to take longer than normal.</li>
<li><code>emacs-28.1</code>. I also installed <code>libgccjit</code> and used <code>./configure
  --with-native-compilation</code> during the compilation, it does feel snappier.</li>
<li><code>emacs-28.0.91</code> requested <code>mailutils</code> to be installed during configuration.</li>
<li><code>emacs-28.0.60</code> requested <code>libacl1-dev</code> and <code>libharfbuzz-dev</code> be installed during
configuration. It does feel snappier. It told me that my current version of
GTK+ leads to a bug but I couldn't figure out how to update GTK+ and it seemed
to be an up to date version anyway.</li>
<li><code>emacs-27.2</code> build and installs without issue.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf1a52a0" class="outline-3">
<h3 id="orgf1a52a0">Running you an Emacs</h3>
<div class="outline-text-3" id="text-orgf1a52a0">
<p>
The following command demonstrates how to run emacs as a daemon in the
foreground (use <code>--daemon</code> to run it in the background)
</p>

<pre class="example" id="orgc0e95ed">
emacs --fg-daemon
</pre>

<p>
Then to create a new frame (or visit a file)
</p>

<pre class="example" id="org6986cb9">
emacsclient --no-wait --create-frame
</pre>
</div>
</div>

<div id="outline-container-org5fd2766" class="outline-3">
<h3 id="org5fd2766">Recording keyboard macros</h3>
<div class="outline-text-3" id="text-org5fd2766">
<ol class="org-ol">
<li>Start recording with <code>C-x (</code> (which calls <code>kmacro-start-macro</code>).</li>
<li>Stop recording with <code>C-x )</code> (which calls <code>kmacro-end-macro</code>).</li>
<li>Execute the recording with <code>C-x e</code> (which calls <code>kmacro-end-and-call-macro</code>).</li>
</ol>

<p>
If you want to save a macro for later use, you can get a emacs-lisp definition
of it with <code>insert-kbd-macro</code>.
</p>
</div>
</div>

<div id="outline-container-org16a720b" class="outline-3">
<h3 id="org16a720b">Jargon</h3>
<div class="outline-text-3" id="text-org16a720b">
<p>
There is a <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Glossary.html">glossary</a> in the manuals, the nodes are <code>Emacs &gt; Glossary</code>. The regex
search entered with <code>s</code> is very useful here.
</p>
</div>
</div>

<div id="outline-container-orgc5bc19b" class="outline-3">
<h3 id="orgc5bc19b">Getting HELP</h3>
<div class="outline-text-3" id="text-orgc5bc19b">
<p>
There are a couple of help menus that are useful to be able to access easily:
</p>

<ul class="org-ul">
<li><i>GNU Emacs NEWS</i> can be summoned with <code>view-emacs-news</code>.</li>
<li><i>Spacemacs documentation</i> can be summoned with <code>helm-spacemacs-help-docs</code>.</li>
<li><i>GNU Emacs Manual</i> can be summoned with <code>info-display-manual</code>.</li>
<li><i>Emacs Lisp Intro</i> has a section on debugging.</li>
</ul>
</div>

<div id="outline-container-orgcc60954" class="outline-4">
<h4 id="orgcc60954">Info navigation</h4>
<div class="outline-text-4" id="text-orgcc60954">
<p>
The following are key-bindings for emacs mode (use <code>\</code> to call
<code>evil-execute-in-emacs-state</code>):
</p>

<ul class="org-ul">
<li><code>n</code> next node</li>
<li><code>p</code> previous node</li>
<li><code>^</code> will move up</li>
<li><code>RET</code> will follow a link</li>
<li><code>l</code> return to the last node visited</li>
<li><code>s</code> search with a regex</li>
<li><code>f</code> find a node linked from here</li>
<li><code>d</code> go to the root node</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org9783414" class="outline-2">
<h2 id="org9783414">Nicemacs</h2>
<div class="outline-text-2" id="text-org9783414">
<pre class="example">
███╗   ██╗██╗ ██████╗███████╗███╗   ███╗ █████╗  ██████╗███████╗
████╗  ██║██║██╔════╝██╔════╝████╗ ████║██╔══██╗██╔════╝██╔════╝
██╔██╗ ██║██║██║     █████╗  ██╔████╔██║███████║██║     ███████╗
██║╚██╗██║██║██║     ██╔══╝  ██║╚██╔╝██║██╔══██║██║     ╚════██║
██║ ╚████║██║╚██████╗███████╗██║ ╚═╝ ██║██║  ██║╚██████╗███████║
╚═╝  ╚═══╝╚═╝ ╚═════╝╚══════╝╚═╝     ╚═╝╚═╝  ╚═╝ ╚═════╝╚══════╝
</pre>
</div>

<div id="outline-container-org97fc091" class="outline-3">
<h3 id="org97fc091">Broken spacemacs dot file?</h3>
<div class="outline-text-3" id="text-org97fc091">
<p>
There is <code>SPC f e D</code> (bound to <code>spacemacs/ediff-dotfile-and-template</code>) to help
you debug your dot file if an update means it is out of date. When in this menu,
use <code>?</code> to toggle the display of a cheat-sheet for diffing with <code>ediff</code>.
</p>

<p>
The function <code>spacemacs/ediff-dotfile-and-template</code> calls <code>ediff-files</code> with the
current spacemacs dot file and a template that comes with spacemacs. This might
be of interest for other diffing as an alternative to programs such as <a href="https://en.wikipedia.org/wiki/Meld_(software)">Meld</a>.
</p>
</div>
</div>

<div id="outline-container-org859b0cf" class="outline-3">
<h3 id="org859b0cf">Debugging</h3>
<div class="outline-text-3" id="text-org859b0cf">
<p>
There is excellent documentation on how to use the debugger in the Spacemacs
documentation for the emacs lisp layer. Note that there are two debuggers in
emacs: <code>debug</code> and <code>edebug</code>. Edebug is the newer one and probably what you want
to use. The important key bindings in spacemacs are
</p>

<ul class="org-ul">
<li><code>SPC m e f</code> to evaluate a function,</li>
<li><code>SPC m d f</code> (with the cursor on the relevant <code>defun</code> keyword to set a
breakpoint on a function,</li>
<li><code>SPC m e e</code> to evaluate an expression which leads to the function being
evaluated.</li>
</ul>

<p>
Once you are in the debugger, use <code>s</code> to step to the next thing, and <code>i</code> to step
into the current routine and <code>o</code> to step out. Use <code>a</code> to abort the debugger.
While debugging, open an <code>ielm</code> REPL to inspect the current values of variables.
</p>
</div>
</div>

<div id="outline-container-org1a61412" class="outline-3">
<h3 id="org1a61412">Code navigation</h3>
<div class="outline-text-3" id="text-org1a61412">
<p>
Moving around a buffer is important. Use <code>evil-set-marker</code> to store a position
in the mark-ring (a variable that holds locations in a buffer). The evil way to
use this is to type <code>m</code> and then provide a character, eg, <code>a</code> to denote this
mark. Use <code>evil-previous-mark</code> which is bound to <code>[ `</code> to navigate through the
marks in the mark-ring.
</p>
</div>
</div>

<div id="outline-container-orgd2475c7" class="outline-3">
<h3 id="orgd2475c7">Recursive grep</h3>
<div class="outline-text-3" id="text-orgd2475c7">
<p>
The <code>rgrep</code> function is used to recursively search files matching a given pattern.
After running <code>rgrep</code> you will be asked for the search term, a pattern to specify
the filenames to search and finally the root directory of the search. The
results are presented in a buffer which links to the matches found.
</p>
</div>
</div>

<div id="outline-container-orge87541b" class="outline-3">
<h3 id="orge87541b">System</h3>
<div class="outline-text-3" id="text-orge87541b">
</div>
<div id="outline-container-orgf6e465f" class="outline-4">
<h4 id="orgf6e465f">Set the user name</h4>
<div class="outline-text-4" id="text-orgf6e465f">
<p>
The <code>user-full-name</code> variable is what org-mode uses as the author name when it
exports to HTML. Setting this variable here is a way to ensure that a sensible
author name is produced.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> user-full-name <span style="color: #2d9574;">"Alexander E. Zarebski"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga6bc337" class="outline-4">
<h4 id="orga6bc337">Nicemacs variables</h4>
<div class="outline-text-4" id="text-orga6bc337">
<p>
Here are some variables that are useful to simplify some subsequent code. If you
are using this on your own machine, you might need to adjust these.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defvar</span> <span style="color: #715ab1;">nicemacs-resources-dir</span> <span style="color: #2d9574;">"~/Documents/nicemacs/resources"</span>
  <span style="color: #da8b55;">"The path to nicemacs on my machine."</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defvar</span> <span style="color: #715ab1;">nicemacs-journal-directory</span> <span style="color: #2d9574;">"~/Documents/journal"</span>
  <span style="color: #da8b55;">"The directory for nicemacs journal files."</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defvar</span> <span style="color: #715ab1;">nicemacs-quick-links-page</span> <span style="color: #2d9574;">"~/Documents/quick-links.html"</span>
  <span style="color: #da8b55;">"The HTML file with some useful in the browser."</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org02a25de" class="outline-4">
<h4 id="org02a25de">Display battery percentage</h4>
<div class="outline-text-4" id="text-org02a25de">
<p>
To toggle the display of the battery there is the shortcut <code>SPC t m b</code> which runs
the command <code>spacemacs/toggle-mode-line-battery</code>.
</p>
</div>
</div>

<div id="outline-container-org6c79362" class="outline-4">
<h4 id="org6c79362">Display time</h4>
<div class="outline-text-4" id="text-org6c79362">
<p>
To toggle the display of the time there is the shortcut <code>SPC t m t</code> which runs the
command <code>spacemacs/toggle-display-time</code>. Note that you can configure the way in
which the time is displayed.
</p>
</div>
</div>
</div>

<div id="outline-container-org263b111" class="outline-3">
<h3 id="org263b111">Spacemacs shortcuts</h3>
<div class="outline-text-3" id="text-org263b111">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Keys</th>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC b b</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">List buffers</td>
</tr>

<tr>
<td class="org-left"><code>SPC b d</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Kill buffer</td>
</tr>

<tr>
<td class="org-left"><code>SPC f e d</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Open <code>.spacemacs</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC f e D</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Diff your <code>.spacemacs</code> against default</td>
</tr>

<tr>
<td class="org-left"><code>SPC f e R</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Reload <code>.spacemacs</code></td>
</tr>

<tr>
<td class="org-left"><code>SPC TAB</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Switch to last buffer</td>
</tr>

<tr>
<td class="org-left"><code>SPC f s</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Save file</td>
</tr>

<tr>
<td class="org-left"><code>SPC f f</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Find (visit) file</td>
</tr>

<tr>
<td class="org-left"><code>SPC f l</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Find (visit) file <i>literally</i></td>
</tr>

<tr>
<td class="org-left"><code>SPC h d &lt;x&gt;</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Help describe thing, e.g. key-binding, or variable</td>
</tr>

<tr>
<td class="org-left"><code>SPC w d</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Kill the <i>current</i> window (not the frame)</td>
</tr>

<tr>
<td class="org-left"><code>SPC T n</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Toggle the theme</td>
</tr>

<tr>
<td class="org-left"><code>SPC q r</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Restart emacs</td>
</tr>

<tr>
<td class="org-left"><code>SPC q q</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Quit emacs</td>
</tr>

<tr>
<td class="org-left"><code>SPC v</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Selects outwards sensibly</td>
</tr>

<tr>
<td class="org-left"><code>SPC t l</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will toggle truncation (wrapping) of (long) lines.</td>
</tr>

<tr>
<td class="org-left"><code>&lt;f10&gt;</code></td>
<td class="org-left"><code>menu-bar-open</code></td>
<td class="org-left">Opens a menu bar (good for feature discovery)</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org8f08c95" class="outline-4">
<h4 id="org8f08c95">Owner menu</h4>
<div class="outline-text-4" id="text-org8f08c95">
<p>
The spacemacs documentation recommends that you store all of your shortcuts with
a prefix of "o" for owner.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"o"</span> <span style="color: #2d9574;">"own-menu"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
There are then sum submenus that are useful to help group related functions:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ob"</span> <span style="color: #2d9574;">"bibtex-menu"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"oc"</span> <span style="color: #2d9574;">"commits-menu"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"of"</span> <span style="color: #2d9574;">"file-stuff"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"og"</span> <span style="color: #2d9574;">"GO!!!"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"off"</span> <span style="color: #2d9574;">"fetch resource"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ofu"</span> <span style="color: #2d9574;">"update resource"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"oh"</span> <span style="color: #2d9574;">"haskell-menu"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ol"</span> <span style="color: #2d9574;">"latex"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"oo"</span> <span style="color: #2d9574;">"org-menu"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"op"</span> <span style="color: #2d9574;">"paragraph-modification-menu"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"os"</span> <span style="color: #2d9574;">"sheila-menu"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"oS"</span> <span style="color: #2d9574;">"Search"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ou"</span> <span style="color: #2d9574;">"unicode-stuff"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ov"</span> <span style="color: #2d9574;">"visit friends"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ovd"</span> <span style="color: #2d9574;">"directories"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ovn"</span> <span style="color: #2d9574;">"notes"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"ovr"</span> <span style="color: #2d9574;">"reviews"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcfd5c0e" class="outline-3">
<h3 id="orgcfd5c0e">Usage notes</h3>
<div class="outline-text-3" id="text-orgcfd5c0e">
<p>
To tangle the <code>nicemacs.el</code> file from the command line execute the following
command:
</p>

<div class="org-src-container">
<pre class="src src-sh">emacs nicemacs.org --batch --eval=<span style="color: #2d9574;">"(org-babel-tangle)"</span>
</pre>
</div>

<p>
Then to include this in your spacemacs configuration add the following
expression to <code>dotspacemacs/user-config</code>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>load <span style="color: #2d9574;">"/home/aez/Documents/nicemacs/nicemacs.el"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-orgf2fe1f2" class="outline-4">
<h4 id="orgf2fe1f2">Emacs-LISP REPL</h4>
<div class="outline-text-4" id="text-orgf2fe1f2">
<p>
From time to time it will be useful to have access to an emacs lisp REPL. To
start this REPL run the <code>ielm</code> command.
</p>
</div>
</div>

<div id="outline-container-org264d3b3" class="outline-4">
<h4 id="org264d3b3">Configuration layers</h4>
<div class="outline-text-4" id="text-org264d3b3">
<p>
This configuration is used from within spacemacs, so it seems appropriate that I
should also document the configuration layers that I use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">'<span style="color: #3a81c3;">(</span>auto-completion
  better-defaults
  bibtex
  <span style="color: #6c3163;">(</span>colors <span style="color: #3a81c3;">:variables</span>
          colors-enable-nyan-cat-progress-bar t<span style="color: #6c3163;">)</span>
  csv
  dap
  dhall
  emacs-lisp
  emoji
  epub
  <span style="color: #6c3163;">(</span>ess <span style="color: #3a81c3;">:variables</span>
       ess-r-backend 'lsp<span style="color: #6c3163;">)</span>
  git
  graphviz
  <span style="color: #6c3163;">(</span>hackernews <span style="color: #3a81c3;">:variables</span>
              hackernews-items-per-page <span style="color: #4e3163;">24</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>haskell <span style="color: #3a81c3;">:variables</span>
           haskell-completion-backend 'lsp
           haskell-process-type 'stack-ghci
           hsakell-enable-hindent-style <span style="color: #2d9574;">"fundamental"</span><span style="color: #6c3163;">)</span>
  helm
  html
  hy
  <span style="color: #6c3163;">(</span>java <span style="color: #3a81c3;">:variables</span>
        java-backend 'lsp<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>javascript <span style="color: #3a81c3;">:variables</span>
              javascript-repl `skewer
              javascript-backend 'lsp<span style="color: #6c3163;">)</span>
  latex
  lsp
  maxima
  multiple-cursors
  nixos
  org
  plantuml
  <span style="color: #6c3163;">(</span>python <span style="color: #3a81c3;">:variables</span>
          python-backend 'lsp
          python-indent-offset <span style="color: #4e3163;">4</span><span style="color: #6c3163;">)</span>
  racket
  semantic
  <span style="color: #6c3163;">(</span>shell <span style="color: #3a81c3;">:variables</span>
         shell-default-shell 'eshell
         shell-default-position 'right
         shell-default-width <span style="color: #4e3163;">50</span><span style="color: #6c3163;">)</span>
  speed-reading
  <span style="color: #6c3163;">(</span>spell-checking <span style="color: #3a81c3;">:variables</span>
                  spell-checking-enable-by-default nil
                  enable-flyspell-auto-completion t<span style="color: #6c3163;">)</span>
  syntax-checking
  version-control
  web-beautify
  yaml<span style="color: #3a81c3;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>The <code>colors</code> layer makes it easier to understand how far through a file you
are.</li>
<li>The <code>emoji</code> layer makes it easier to use emojies.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf5913a3" class="outline-3">
<h3 id="orgf5913a3">Stuff</h3>
<div class="outline-text-3" id="text-orgf5913a3">
<p>
To quickly toggle between the default spacemacs themes use <code>SPC T n</code> (the
default bindings.)
</p>
</div>

<div id="outline-container-org93d2224" class="outline-4">
<h4 id="org93d2224">Supported image formats</h4>
<div class="outline-text-4" id="text-org93d2224">
<p>
To test if an image format is supported there is the <code>image-type-availability-p</code>
function. For example, to check if you can view SVG, you would evaluate
<code>(image-type-availability-p 'svg)</code>.
</p>
</div>
</div>

<div id="outline-container-org7ecb0e7" class="outline-4">
<h4 id="org7ecb0e7">Start up/splash page</h4>
<div class="outline-text-4" id="text-org7ecb0e7">
<p>
I prefer the startup banner number 100, to use this put <code>100</code> for the
<code>dotspacemacs-startup-banner</code> value in <code>.spacemacs</code>. To avoid having unnecessary
icons displayed, the following can be used.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> dotspacemacs-startup-buffer-show-icons nil<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f21b15" class="outline-4">
<h4 id="org8f21b15">Default colour schemes</h4>
<div class="outline-text-4" id="text-org8f21b15">
<p>
The hexcodes for the default colour schemes used by Spacemacs can be found in
<code>spacemacs/core/libs/spacemacs-theme/spacemacs-common.el</code>
</p>
</div>
</div>

<div id="outline-container-org6915322" class="outline-4">
<h4 id="org6915322">Scratch buffer</h4>
<div class="outline-text-4" id="text-org6915322">
<p>
If you want to scratch something out quickly there is the scratch buffer
provided by spacemacs at <code>SCP b s</code>. By default this opens in text mode. To avoid
always needing to switch it into org-mode we can set the following variable
instead.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> dotspacemacs-scratch-mode 'org-mode<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org997d061" class="outline-4">
<h4 id="org997d061">Ugly ugly scroll bar</h4>
<div class="outline-text-4" id="text-org997d061">
<p>
I very much do not want to scroll bar popping up every now and then so I will
remove the advice to do this!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>advice-remove 'mwheel-scroll #'spacemacs//scroll-bar-show-delayed-hide<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org60e6cc1" class="outline-4">
<h4 id="org60e6cc1">Stop undo-tree-mode scattering files</h4>
<div class="outline-text-4" id="text-org60e6cc1">
<p>
The <code>undo-tree-mode</code> will save a history of actions to a file so they are not
lost when you close emacs. You can customise where these files get stored, but
in the interest of keeping things snappy, I think it is probably nicer just to
avoid this feature by editing the <code>undo-tree-auto-save-history</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> undo-tree-auto-save-history nil<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1aa3428" class="outline-4">
<h4 id="org1aa3428">Run rgrep</h4>
<div class="outline-text-4" id="text-org1aa3428">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ogg"</span> 'rgrep<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org87e694a" class="outline-3">
<h3 id="org87e694a">Completion</h3>
<div class="outline-text-3" id="text-org87e694a">
<p>
The following potentially reduce the latency in input which can be increased by
unnecessary calls to a completion backend.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> company-idle-delay <span style="color: #4e3163;">0.5</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> company-minimum-prefix-length <span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org99683d1" class="outline-3">
<h3 id="org99683d1">LSP</h3>
<div class="outline-text-3" id="text-org99683d1">
<p>
<a href="#orga3d4110">LSP and Haskell</a>
</p>

<ul class="org-ul">
<li><a href="#org6b9c4d6">LSP with ESS</a></li>
</ul>

<p>
The path to the current file in LSP is a little unnecessary.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> lsp-headerline-breadcrumb-enable nil<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
LSP tends to be a bit too eager to display help under the default delay of 0.2
seconds and this also leads to an unnecessary amount of communication. To
improve this we can increase the delay for both the documentation and the
sideline display.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> lsp-ui-doc-delay <span style="color: #4e3163;">1.0</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> lsp-ui-sideline-delay <span style="color: #4e3163;">1.0</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge63fceb" class="outline-3">
<h3 id="orge63fceb">Haskell</h3>
<div class="outline-text-3" id="text-orge63fceb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ohr"</span> 'haskell-process-restart<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Set the input method to TeX for using unicode. Use C-\ to unset this.</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ohu"</span> 'set-input-method<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org28e505f" class="outline-4">
<h4 id="org28e505f">Formatting code without LSP</h4>
<div class="outline-text-4" id="text-org28e505f">
<p>
If you are not using LSP then the following might be useful additions if you
have <code>hindent</code> installed. Although I suspect a nicer option is to use <a href="#orge4c8dfc">stylish-haskell with LSP</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ohhr"</span> 'hindent-reformat-region<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ohhb"</span> 'hindent-reformat-buffer<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
You will probably also want to set the <code>haskell-enable-hindent-style</code> variable
to <code>"fundamental"</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> haskell-enable-hindent-style <span style="color: #2d9574;">"fundamental"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge4c8dfc" class="outline-4">
<h4 id="orge4c8dfc">Formatting code with LSP</h4>
<div class="outline-text-4" id="text-orge4c8dfc">
<p>
If you are using LSP then <code>hindent</code> is not available by default. <a href="https://github.com/haskell/stylish-haskell">stylish-haskell</a>
seems to be an acceptable replacement though. The
<code>lsp-haskell-formatting-provider</code> is used to specify which formatting tool to
use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> lsp-haskell-formatting-provider <span style="color: #2d9574;">"stylish-haskell"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga3d4110" class="outline-4">
<h4 id="orga3d4110">LSP and Haskell</h4>
<div class="outline-text-4" id="text-orga3d4110">
<p>
Even after installing the <code>haskell-language-server</code> using <a href="https://github.com/haskell/haskell-language-server#installation">the GHCUP installation
method</a> there were some issues because emacs could not find it. It appears that
setting the <code>lsp-haskell-server-path</code> to the executable solved things.
</p>

<ol class="org-ol">
<li>Install <code>ghcup</code>, which will also offer to install the Haskell language server
for you.</li>
</ol>

<p>
<a href="https://github.com/haskell/haskell-language-server#installation">GHCUP installation instructions are here</a>
</p>

<ol class="org-ol">
<li>Make sure that this has been added to the <code>exec-path</code> and that
<code>lsp-haskell-server-path</code> is set. Note that some projects might get upset
about the language server being used, adjust this and restarting emacs is a
hacky solution by it works.</li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> exec-path <span style="color: #6c3163;">(</span>append exec-path '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"/home/aez/.ghcup/bin"</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> lsp-haskell-server-path <span style="color: #2d9574;">"/home/aez/.ghcup/bin/haskell-language-server-8.10.4"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<ol class="org-ol">
<li>Make sure that the layer variables have been set to use LSP.</li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>haskell <span style="color: #3a81c3;">:variables</span>
         haskell-completion-backend 'lsp
         haskell-process-type 'stack-ghci<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0c89066" class="outline-3">
<h3 id="org0c89066">Maxima</h3>
<div class="outline-text-3" id="text-org0c89066">
<p>
See <a href="https://github.com/dalanicolai/maxima-layer">maxima-layer</a> by <a href="https://dalanicolai.github.io/">Daniel Nicolai</a>.
</p>
</div>
</div>

<div id="outline-container-orga39104c" class="outline-3">
<h3 id="orga39104c">JavaScript and Typescript</h3>
<div class="outline-text-3" id="text-orga39104c">
<p>
At the time of writing, the path to node is
<code>/home/aez/.nvm/versions/node/v17.3.1/bin</code>, since this is used a few times we
should define this as a constant.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defvar</span> <span style="color: #715ab1;">my-node-path</span> <span style="color: #2d9574;">"/home/aez/.nvm/versions/node/v17.3.1/bin"</span>
  <span style="color: #da8b55;">"The path to node on my machine."</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The following needs to be included for Eshell to be able to find node and npm.
I'm not sure why you need to do it twice.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>setenv <span style="color: #2d9574;">"PATH"</span> <span style="color: #6c3163;">(</span>concat <span style="color: #2d9574;">(</span>getenv <span style="color: #2d9574;">"PATH"</span><span style="color: #2d9574;">)</span> <span style="color: #2d9574;">":"</span> my-node-path<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> exec-path <span style="color: #6c3163;">(</span>append exec-path <span style="color: #2d9574;">(</span>list my-node-path<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
By default the REPL used is geared towards front end work. To get it to use the
node REPL add the following to the configuration so that the correct command is
called.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">my-nodejs-repl-command</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span>concat my-node-path <span style="color: #2d9574;">"/node"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> nodejs-repl-command 'my-nodejs-repl-command<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org869db03" class="outline-4">
<h4 id="org869db03">Using Skewer mode and simple HTTPd for browser stuff</h4>
<div class="outline-text-4" id="text-org869db03">
<p>
The following is based on a StackOverflow <a href="https://emacs.stackexchange.com/a/2515">answer</a>. To start a server out of emacs
you use the following commands
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">require</span> '<span style="color: #4e3163;">simple-httpd</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">set root folder for httpd server</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> httpd-root <span style="color: #2d9574;">"&lt;path/to/foo.html&gt;"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Then call <code>httpd-start</code> to actually start the server.
</p>

<p>
<code>skewer-mode</code> allows you to run a server and interact with the browser from
emacs. The header of your HTML file needs to include <code>skewer.js</code>, for example
you could have the following as a starter page.
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #3a81c3;">!doctype</span> html&gt;
&lt;<span style="color: #6c3163; font-weight: bold;">html</span>&gt;
    &lt;<span style="color: #6c3163; font-weight: bold;">head</span>&gt;
        <span style="color: #2aa1ae; background-color: #ecf3ec;">&lt;!-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Include skewer.js as a script</span><span style="color: #2aa1ae; background-color: #ecf3ec;"> --&gt;</span>
        &lt;<span style="color: #6c3163; font-weight: bold;">script</span> <span style="color: #715ab1;">src</span>=<span style="color: #2d9574;">"http://localhost:8080/skewer"</span>&gt;&lt;/<span style="color: #6c3163; font-weight: bold;">script</span>&gt;
        <span style="color: #2aa1ae; background-color: #ecf3ec;">&lt;!-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Include my script.js file</span><span style="color: #2aa1ae; background-color: #ecf3ec;"> --&gt;</span>
        &lt;<span style="color: #6c3163; font-weight: bold;">script</span> <span style="color: #715ab1;">src</span>=<span style="color: #2d9574;">"script.js"</span>&gt;&lt;/<span style="color: #6c3163; font-weight: bold;">script</span>&gt;
    &lt;/<span style="color: #6c3163; font-weight: bold;">head</span>&gt;
    &lt;<span style="color: #6c3163; font-weight: bold;">body</span>&gt;
        &lt;<span style="color: #6c3163; font-weight: bold;">p</span>&gt;Hello world&lt;/<span style="color: #6c3163; font-weight: bold;">p</span>&gt;
    &lt;/<span style="color: #6c3163; font-weight: bold;">body</span>&gt;
&lt;/<span style="color: #6c3163; font-weight: bold;">html</span>&gt;
</pre>
</div>

<p>
An example <code>script.js</code> might be
</p>

<div class="org-src-container">
<pre class="src src-javascript">alert<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'hey!'</span><span style="color: #3a81c3;">)</span>;
</pre>
</div>

<p>
Once you have this set up and the page open in your browser, use <code>skewer-repl</code>
to start the REPL and <code>console.log('hello there')</code> to test it is actually
working.
</p>

<p>
Note, when I first used this there was some old configuration relating to some
NodeJS work which I needed to remove before it would recognise I was interested
in browser based JavaScript.
</p>
</div>
</div>

<div id="outline-container-org66d7a7b" class="outline-4">
<h4 id="org66d7a7b">D3: data driven documents basic set up</h4>
<div class="outline-text-4" id="text-org66d7a7b">
<p>
The following snippet demonstrates how you might copy the files here to a new
directory to start a D3 based project.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-d3-setup</span> <span style="color: #6c3163;">(</span>dir<span style="color: #6c3163;">)</span>
  <span style="color: #da8b55;">"Set up a minimal D3 project"</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span> <span style="color: #2d9574;">"Where should the D3 project go? "</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">progn</span>
    <span style="color: #2d9574;">(</span>make-directory dir<span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">let</span> <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>d3-files <span style="color: #3a81c3;">(</span>list <span style="color: #2d9574;">"d3.js"</span> <span style="color: #2d9574;">"demo.js"</span> <span style="color: #2d9574;">"demo.org"</span> <span style="color: #2d9574;">"index.html"</span>
                          <span style="color: #2d9574;">"blah.csv"</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>mapc <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>
              <span style="color: #3a81c3;">(</span>copy-file <span style="color: #6c3163;">(</span>concat nicemacs-resources-dir <span style="color: #2d9574;">"/d3-template/"</span>
                                 x<span style="color: #6c3163;">)</span>
                         <span style="color: #6c3163;">(</span>concat dir <span style="color: #2d9574;">"/"</span> x<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span>
            d3-files<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofj"</span> 'nicemacs-d3-setup<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8239a70" class="outline-3">
<h3 id="org8239a70">Miscellaneous configuration for writing</h3>
<div class="outline-text-3" id="text-org8239a70">
<ul class="org-ul">
<li>A neat way to change a block of text from upper to lower case is to select the
appropriate region and use <code>u</code> and <code>U</code> to toggle the case.</li>
<li>If you want a word count there is the <code>count-words</code> function. This is used so
infrequently though that it is not really worth adding a binding for it. By
default it counts the words in the current buffer, but if you have selected a
region of text it will count the words and characters there.</li>
</ul>
</div>

<div id="outline-container-orge57aaa1" class="outline-4">
<h4 id="orge57aaa1">Toggling paragraph filling</h4>
<div class="outline-text-4" id="text-orge57aaa1">
<p>
There are the <code>org-fill-paragraph</code> and <code>unfill-paragraph</code> functions which are
useful to switch between representations of paragraphs when copying between
editors. I think a suitable binding for these command is <code>SPC o p f</code> for fill
and <code>SPC o p u</code> for unfill.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"opf"</span> 'org-fill-paragraph<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"opu"</span> 'unfill-paragraph<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5fbdb4f" class="outline-4">
<h4 id="org5fbdb4f">Emoji</h4>
<div class="outline-text-4" id="text-org5fbdb4f">
<p>
I always forget the names of various emoji, and it is easier to add them to text
quickly if you know what they are called.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Names of some emoji&#x2026;</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Emoji</th>
<th scope="col" class="org-left">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">🎉</td>
<td class="org-left">tada</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org5cecdd9" class="outline-3">
<h3 id="org5cecdd9">Spelling and Dictionaries</h3>
<div class="outline-text-3" id="text-org5cecdd9">
<p>
There is a dictionary mode which provides the <code>dictionary</code> function and the
<code>dictionary-tooltip-mode</code>. Finding a suitable offline dictionary is challenging
though.
</p>
</div>

<div id="outline-container-org6dba803" class="outline-4">
<h4 id="org6dba803">Apell dictionary</h4>
<div class="outline-text-4" id="text-org6dba803">
<ul class="org-ul">
<li>The personal Aspell dictionary file (which is probably <code>.aspell.en.pws</code>) has a
number in the header which is used to hint the dictionary size but does not
need to be exactly correct.</li>
</ul>
</div>

<ul class="org-ul">
<li><a id="org98f0e75"></a><span class="todo TODO">TODO</span> Write a function that updates this file and bind it to <code>ofud</code><br /></li>
</ul>
</div>

<div id="outline-container-org6b41583" class="outline-4">
<h4 id="org6b41583">Spell checking</h4>
<div class="outline-text-4" id="text-org6b41583">
<ul class="org-ul">
<li>Highlight the text and use <code>SPC S r</code> to spellcheck that region.</li>
<li>Use <code>SPC S b</code> to spellcheck the buffer (it calls <code>flyspell-buffer</code>)</li>
<li>Use <code>SPC S s</code> to open spelling suggestions for the work under the cursor.</li>
<li>When you add a word to a personal dictionary it is saved in
<code>~/.aspell.en.pws</code>. A (probably outdated) version of my personal dictionary is
<a href="./resources/aspell.en.pws">here</a>. Alternatively you can add it to a buffer specific list of words at the
bottom of the file.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org0404ba0" class="outline-3">
<h3 id="org0404ba0">Latex and Bibtex</h3>
<div class="outline-text-3" id="text-org0404ba0">
<p>
To ensure that files with the extension <code>.bibtex</code> open in <code>bibtex-mode</code> we need
to explicitly request this
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>add-to-list 'auto-mode-alist '<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"\\.bibtex\\'"</span> . bibtex-mode<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Here are the keybindings for the bibtex functionality, the leader sequence is
<b>Owner</b> <b>Bibtex</b> <b>X</b> where
</p>

<ul class="org-ul">
<li><b>B</b> for <i>braces</i> around upper case characters,</li>
<li><b>C</b> for <i>convert</i> between RIS and bibtex,</li>
<li><b>F</b> for <i>format</i> the current buffer,</li>
<li><b>L</b> for <i>last</i> bibtex file in <code>Downloads</code> and</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp" id="orgeaab4fb"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obl"</span> 'nvf-last-bib<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obf"</span> 'bibtex-reformat<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obb"</span> 'bibtex-braces<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obc"</span> 'bibtex-ris2bib<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org0b7ee8a" class="outline-4">
<h4 id="org0b7ee8a">Visiting most recent bib file</h4>
<div class="outline-text-4" id="text-org0b7ee8a">
<p>
The <code>nvf-last-bib</code> function opens the most recent Bibtex file in the Downloads
directory in a new buffer. If there is no such file then a message is given to
indicate this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-last-bib</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Visit the most recent BIB file in Downloads. </span><span style="color: #dc752f;">TODO</span><span style="color: #da8b55;"> There should</span>
<span style="color: #da8b55;">be a fall back such that if there is a TXT file that is younger</span>
<span style="color: #da8b55;">than the last BIB file then copy it to a new file with the same</span>
<span style="color: #da8b55;">basename but a BIB extension and open that instead."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>bib-files <span style="color: #b1951d;">(</span>directory-files-and-attributes <span style="color: #2d9574;">"~/Downloads"</span>
                                                    t <span style="color: #2d9574;">".*bib"</span> <span style="color: #2d9574;">"ctime"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>path-and-time <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>
                          <span style="color: #3a81c3;">(</span>list <span style="color: #6c3163;">(</span>first x<span style="color: #6c3163;">)</span>
                                <span style="color: #6c3163;">(</span>eighth x<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>time-order <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>a b<span style="color: #3a81c3;">)</span>
                       <span style="color: #3a81c3;">(</span>time-less-p <span style="color: #6c3163;">(</span>second b<span style="color: #6c3163;">)</span>
                                    <span style="color: #6c3163;">(</span>second a<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>most-recent <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>files<span style="color: #3a81c3;">)</span>
                        <span style="color: #3a81c3;">(</span>car <span style="color: #6c3163;">(</span>car <span style="color: #2d9574;">(</span>sort <span style="color: #887070;">(</span>mapcar path-and-time files<span style="color: #887070;">)</span>
                                        time-order<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">if</span> <span style="color: #67b11d;">(</span>not <span style="color: #b1951d;">(</span>null bib-files<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span>find-file <span style="color: #b1951d;">(</span>funcall most-recent bib-files<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>message <span style="color: #2d9574;">"No bib files found in ~/Downloads/"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org60670f9" class="outline-4">
<h4 id="org60670f9">Formatting references</h4>
<div class="outline-text-4" id="text-org60670f9">
<p>
Bibtex requires that capital letters in the title be surrounded by braces to
ensure that they are capitalised correctly. The following function is a way to
quickly add these braces to long titles. Just highlight the relevant text and
run the function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">bibtex-braces</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Wrap upper case letters with brackets for bibtex titles."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>evil-ex <span style="color: #2d9574;">"'&lt;,'&gt;s/</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">(</span><span style="color: #2d9574;">[A-Z]+</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">)</span><span style="color: #2d9574;">/\\{\\1\\}/g"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3601645" class="outline-4">
<h4 id="org3601645">Converting RIS files</h4>
<div class="outline-text-4" id="text-org3601645">
<p>
Some places seem reluctant to provide a bibtex file for a citation, but they all
seem to have RIS files available for download. There are tools to convert
between them. The <code>bibtex-ris2bib</code> function looks up the most recent RIS file in
your downloads directory and then converts that to a BIB file. You can then open
this file using the <code>nvf-last-bib</code> function from above.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">bibtex-ris2bib</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Convert the most recent RIS file in my downloads to a BIB</span>
<span style="color: #da8b55;">file. </span><span style="color: #dc752f;">TODO</span><span style="color: #da8b55;"> Add error message if there are no RIS files."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span> <span style="color: #2d9574;">"*"</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>all-ris-files <span style="color: #b1951d;">(</span>directory-files <span style="color: #2d9574;">"~/Downloads"</span> <span style="color: #4e3163;">1</span> <span style="color: #2d9574;">".*ris"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>modification-time <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>fp<span style="color: #3a81c3;">)</span>
                              <span style="color: #3a81c3;">(</span>list <span style="color: #6c3163;">(</span>time-convert <span style="color: #2d9574;">(</span>file-attribute-modification-time <span style="color: #887070;">(</span>file-attributes fp<span style="color: #887070;">)</span><span style="color: #2d9574;">)</span>
                                                  'integer<span style="color: #6c3163;">)</span>
                                    fp<span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>ris-filepath <span style="color: #b1951d;">(</span>nth <span style="color: #4e3163;">1</span>
                            <span style="color: #3a81c3;">(</span>car <span style="color: #6c3163;">(</span>sort <span style="color: #2d9574;">(</span>mapcar modification-time all-ris-files<span style="color: #2d9574;">)</span>
                                       <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #887070;">(</span>x y<span style="color: #887070;">)</span>
                                         <span style="color: #887070;">(</span>&gt; <span style="color: #3a81c3;">(</span>car x<span style="color: #3a81c3;">)</span> <span style="color: #3a81c3;">(</span>car y<span style="color: #3a81c3;">)</span><span style="color: #887070;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>target-bib <span style="color: #2d9574;">"/home/aez/Downloads/new.bib"</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>ris2xml-command <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"ris2xml %s | xml2bib &gt; %s"</span> ris-filepath
                                  target-bib<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>shell-command ris2xml-command<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge28c399" class="outline-4">
<h4 id="orge28c399">Appearance</h4>
<div class="outline-text-4" id="text-orge28c399">
<p>
We can use a hook to switch to proportional font for org-mode, because lines now
become a bit tricky we need to include <code>visual-line-mode</code> otherwise things look
weird.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>add-hook 'LaTeX-mode-hook 'variable-pitch-mode<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>add-hook 'LaTeX-mode-hook 'visual-line-mode<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
And then to get the faces looking good for the various elements of the display
we have the following configuration
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>custom-set-faces '<span style="color: #6c3163;">(</span>font-lock-comment-face <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
                  '<span style="color: #6c3163;">(</span>font-lock-keyword-face <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
                  '<span style="color: #6c3163;">(</span>font-latex-sectioning-2-face <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> bold <span style="color: #3a81c3;">:foreground</span> <span style="color: #2d9574;">"#3a81c3"</span>
                                                               <span style="color: #3a81c3;">:height</span> <span style="color: #4e3163;">1.3</span>
                                                               <span style="color: #3a81c3;">:family</span> <span style="color: #2d9574;">"Noto Sans"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
                  '<span style="color: #6c3163;">(</span>font-latex-sectioning-3-face <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> bold <span style="color: #3a81c3;">:foreground</span> <span style="color: #2d9574;">"#2d9574"</span>
                                                               <span style="color: #3a81c3;">:height</span> <span style="color: #4e3163;">1.2</span>
                                                               <span style="color: #3a81c3;">:family</span> <span style="color: #2d9574;">"Noto Sans"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org092d93e" class="outline-4">
<h4 id="org092d93e">Miscellaneous</h4>
<div class="outline-text-4" id="text-org092d93e">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obl"</span> 'nvf-last-bib<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obf"</span> 'bibtex-reformat<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obb"</span> 'bibtex-braces<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"obc"</span> 'bibtex-ris2bib<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org34cf521" class="outline-3">
<h3 id="org34cf521">Org-mode</h3>
<div class="outline-text-3" id="text-org34cf521">
<p>
Bindings for org-mode functionality start with <code>o o</code> for "owner org". for toggle
style functions we will have a sub-menu.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/declare-prefix <span style="color: #2d9574;">"oot"</span> <span style="color: #2d9574;">"org-toggle-menu"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-orga2f4992" class="outline-4">
<h4 id="orga2f4992">Writing</h4>
<div class="outline-text-4" id="text-orga2f4992">
</div>
<li><a id="org8d4ea10"></a>Citation engine<br />
<div class="outline-text-5" id="text-org8d4ea10">
<p>
The following package is required to use CSL with org-mode citations
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">require</span> '<span style="color: #4e3163;">oc-csl</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="orgaea1a73"></a>Fonts<br />
<div class="outline-text-5" id="text-orgaea1a73">
<p>
The following can be used to hide extra markup symbols<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> org-hide-emphasis-markers nil<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
We can use a hook to switch to proportional font for org-mode, because lines now
become a bit tricky we need to include <code>visual-line-mode</code> otherwise things look
weird.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>add-hook 'org-mode-hook 'variable-pitch-mode<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>add-hook 'org-mode-hook 'visual-line-mode<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
To make sure that code blocks are still rendered with a fixed width font we need
to specify this. Note that the <code>describe-char</code> function is super helpful for
linking to further fine tuning via the customisation interface. Currently I am
using Noto with serifs for text and sans for headers.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"> <span style="color: #3a81c3;">(</span>custom-set-faces
'<span style="color: #6c3163;">(</span>org-block <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-block-begin-line <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch <span style="color: #3a81c3;">:extend</span> t <span style="color: #3a81c3;">:background</span> <span style="color: #2d9574;">"#ddd8eb"</span> <span style="color: #3a81c3;">:foreground</span> <span style="color: #2d9574;">"#9380b2"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-block-end-line <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch <span style="color: #3a81c3;">:extend</span> t <span style="color: #3a81c3;">:background</span> <span style="color: #2d9574;">"#ddd8eb"</span> <span style="color: #3a81c3;">:foreground</span> <span style="color: #2d9574;">"#9380b2"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-code <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> <span style="color: #3a81c3;">(</span>shadow fixed-pitch<span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-document-info <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-document-info-keyword <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-document-title <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> nil <span style="color: #3a81c3;">:foreground</span> <span style="color: #2d9574;">"#6c3163"</span> <span style="color: #3a81c3;">:underline</span> t <span style="color: #3a81c3;">:weight</span> bold <span style="color: #3a81c3;">:height</span> <span style="color: #4e3163;">2.0</span> <span style="color: #3a81c3;">:family</span> <span style="color: #2d9574;">"Noto Sans"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-level-1 <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> nil <span style="color: #3a81c3;">:extend</span> nil <span style="color: #3a81c3;">:foreground</span> <span style="color: #2d9574;">"#3a81c3"</span> <span style="color: #3a81c3;">:weight</span> bold <span style="color: #3a81c3;">:height</span> <span style="color: #4e3163;">1.4</span> <span style="color: #3a81c3;">:family</span> <span style="color: #2d9574;">"Noto Sans"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-level-2 <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> nil <span style="color: #3a81c3;">:extend</span> nil <span style="color: #3a81c3;">:foreground</span> <span style="color: #2d9574;">"#2d9574"</span> <span style="color: #3a81c3;">:weight</span> bold <span style="color: #3a81c3;">:height</span> <span style="color: #4e3163;">1.2</span> <span style="color: #3a81c3;">:width</span> normal <span style="color: #3a81c3;">:family</span> <span style="color: #2d9574;">"Noto Sans"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-level-3 <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:extend</span> nil <span style="color: #3a81c3;">:foreground</span> <span style="color: #2d9574;">"#67b11d"</span> <span style="color: #3a81c3;">:weight</span> normal <span style="color: #3a81c3;">:height</span> <span style="color: #4e3163;">1.1</span> <span style="color: #3a81c3;">:family</span> <span style="color: #2d9574;">"Noto Sans"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-level-4 <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:extend</span> nil <span style="color: #3a81c3;">:foreground</span> <span style="color: #2d9574;">"#b1951d"</span> <span style="color: #3a81c3;">:weight</span> normal <span style="color: #3a81c3;">:height</span> <span style="color: #4e3163;">1.0</span> <span style="color: #3a81c3;">:family</span> <span style="color: #2d9574;">"Noto Sans"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-link <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:underline</span> t<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-meta-line <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-property-value <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span> t<span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-special-keyword <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-table <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-tag <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>org-verbatim <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>font-lock-comment-face <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:inherit</span> fixed-pitch<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
'<span style="color: #6c3163;">(</span>variable-pitch <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>t <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">:family</span> <span style="color: #2d9574;">"Noto Serif"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The <code>writeroom-mode</code> provides a clean setup for writing prose. It centres the
text and removes visual distractions. The following little function sets up a
toggle to turn this on and off. There is a variable <code>writeroom-width</code> to specify
how wide the display should be.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">require</span> '<span style="color: #4e3163;">writeroom-mode</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defvar</span> <span style="color: #715ab1;">writeroom-active</span> t <span style="color: #da8b55;">"variable to say if writeroom is active"</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">toggle-writeroom</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Toggle the writeroom-mode on the current buffer."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">if</span> writeroom-active
      <span style="color: #2d9574;">(</span>writeroom--enable<span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>writeroom--disable<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">setq</span> writeroom-active <span style="color: #2d9574;">(</span>not writeroom-active<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ootw"</span> 'toggle-writeroom<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org9c7a585" class="outline-4">
<h4 id="org9c7a585">Exporting to LaTeX</h4>
<div class="outline-text-4" id="text-org9c7a585">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">require</span> '<span style="color: #4e3163;">ox-latex</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
By default org-mode exports to a pretty safe article document. The following
configuration adds the option to export a <code>scrartcl</code> document with some
additional useful packages. To use this you need to add <code>#+latex_class:
scrartcl</code> to the start of the document. Also, keep in mind that you can use
<code>#+latex_header:</code> to add additional lines to the pre-amble of the TeX file
generated.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>add-to-list 'org-latex-classes
             '<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"scrartcl"</span> <span style="color: #2d9574;">"\\documentclass[11pt,onecolumn]{scrartcl}"</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\section{%s}"</span> . <span style="color: #2d9574;">"\\section*{%s}"</span><span style="color: #2d9574;">)</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\subsection{%s}"</span> . <span style="color: #2d9574;">"\\subsection*{%s}"</span><span style="color: #2d9574;">)</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\subsubsection{%s}"</span> . <span style="color: #2d9574;">"\\subsubsection*{%s}"</span><span style="color: #2d9574;">)</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\paragraph{%s}"</span> . <span style="color: #2d9574;">"\\paragraph*{%s}"</span><span style="color: #2d9574;">)</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\subparagraph{%s}"</span> . <span style="color: #2d9574;">"\\subparagraph*{%s}"</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>add-to-list 'org-latex-classes
             '<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"scrartcl2"</span> <span style="color: #2d9574;">"\\documentclass[11pt,twocolumn]{scrartcl}"</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\section{%s}"</span> . <span style="color: #2d9574;">"\\section*{%s}"</span><span style="color: #2d9574;">)</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\subsection{%s}"</span> . <span style="color: #2d9574;">"\\subsection*{%s}"</span><span style="color: #2d9574;">)</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\subsubsection{%s}"</span> . <span style="color: #2d9574;">"\\subsubsection*{%s}"</span><span style="color: #2d9574;">)</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\paragraph{%s}"</span> . <span style="color: #2d9574;">"\\paragraph*{%s}"</span><span style="color: #2d9574;">)</span>
               <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"\\subparagraph{%s}"</span> . <span style="color: #2d9574;">"\\subparagraph*{%s}"</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
If you want more control over colours and to be able to do syntax highlighting
for code, it is useful to have a couple of extra packages included. The
following snippet configures which additional packages will be included in the
export.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> org-latex-packages-alist nil<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>add-to-list 'org-latex-packages-alist
             '<span style="color: #6c3163;">(</span><span style="color: #2d9574;">""</span> <span style="color: #2d9574;">"listings"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>add-to-list 'org-latex-packages-alist
             '<span style="color: #6c3163;">(</span><span style="color: #2d9574;">""</span> <span style="color: #2d9574;">"xcolor"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>add-to-list 'org-latex-packages-alist
             '<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"right"</span> <span style="color: #2d9574;">"lineno"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> org-latex-listings t<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6bf064a" class="outline-4">
<h4 id="org6bf064a">Literate programming</h4>
<div class="outline-text-4" id="text-org6bf064a">
<p>
The <code>org-babel-tangle</code> function will tangle the current org-mode file. This is
bound to <code>SPC m b t</code>. You can tangle to multiple files by adding multiple
<code>:tangle</code> variables to the source environment.
</p>
</div>
</div>

<div id="outline-container-org54d72df" class="outline-4">
<h4 id="org54d72df">Notebook programming</h4>
<div class="outline-text-4" id="text-org54d72df">
<p>
To use org-mode as a notebook, you need to have the corresponding language
included in <code>org-babel-load-languages</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>org-babel-do-load-languages
'org-babel-load-languages
'<span style="color: #6c3163;">(</span><span style="color: #2d9574;">(</span>maxima . t<span style="color: #2d9574;">)</span>
  <span style="color: #2d9574;">(</span>R . t<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
There is an example of using org-mode for Maxima notebooks <a href="https://www.orgmode.org/worg/org-contrib/babel/languages/ob-doc-maxima.html">here</a>.
</p>
</div>
</div>

<div id="outline-container-org9c2ceb8" class="outline-4">
<h4 id="org9c2ceb8">Nicemacs journal</h4>
<div class="outline-text-4" id="text-org9c2ceb8">
<p>
I want a directory just for my journal which potentially will vary between
machines so a variable to describe where they live is useful. To make it clear
that these are my variables and functions I will try to maintain <code>nicemacs-</code>
prefixes. We will also define some decent settings here.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> org-agenda-start-day <span style="color: #2d9574;">"-7d"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> org-agenda-span <span style="color: #4e3163;">30</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> org-agenda-start-on-weekday nil<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
I need a way to talk about what the particular journal file is on any given
date. Updating the file about monthly seems sensible, so the filenames can
follow the pattern <code>journal-YYYY-MM</code>. <b>NOTE</b> that this function will set the
agenda file to the correct value whenever it is called and that the
<code>org-agenda-files</code> variable needs to be bound to a <i>list</i> or files rather than
the name of a single file, otherwise it will interpret that single file as a
list of files to use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-journal-filepath</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"The filepath of the current journal file."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>filepath-template <span style="color: #b1951d;">(</span>concat nicemacs-journal-directory <span style="color: #2d9574;">"/journal-%s.org"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>time-string <span style="color: #b1951d;">(</span>format-time-string <span style="color: #2d9574;">"%Y-%m"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>agenda-file <span style="color: #b1951d;">(</span>format filepath-template time-string<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">setq</span> org-agenda-files <span style="color: #67b11d;">(</span>list agenda-file<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    agenda-file<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-journal-previous-filepath</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"The filepath of the /previous/ journal file."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>filepath-template <span style="color: #b1951d;">(</span>concat nicemacs-journal-directory <span style="color: #2d9574;">"/journal-%s.org"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>seconds-in-week <span style="color: #b1951d;">(</span>* <span style="color: #4e3163;">7</span> <span style="color: #3a81c3;">(</span>* <span style="color: #4e3163;">24</span> <span style="color: #6c3163;">(</span>* <span style="color: #4e3163;">60</span> <span style="color: #2d9574;">(</span>* <span style="color: #4e3163;">60</span> <span style="color: #4e3163;">1</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>time-string <span style="color: #b1951d;">(</span>format-time-string <span style="color: #2d9574;">"%Y-%m"</span> <span style="color: #3a81c3;">(</span>time-subtract <span style="color: #6c3163;">(</span>current-time<span style="color: #6c3163;">)</span> seconds-in-week<span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>agenda-file <span style="color: #b1951d;">(</span>format filepath-template time-string<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    agenda-file<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
I want functions to quickly visit our current journal file and to visit the
current agenda because this is something I do several times a day. If the
journal file does not exist then we just need to copy over the previous one. To
do this we look for one with a date from a week ago.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nvf-journal</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Opens the current journal file. If it does not yet exist it</span>
<span style="color: #da8b55;">makes a copy of the one from one week ago."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>current-journal-file <span style="color: #b1951d;">(</span>nicemacs-journal-filepath<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span>previous-journal-file <span style="color: #b1951d;">(</span>nicemacs-journal-previous-filepath<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">if</span> <span style="color: #67b11d;">(</span>not <span style="color: #b1951d;">(</span>file-exists-p current-journal-file<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span><span style="color: #3a81c3;">progn</span>
          <span style="color: #b1951d;">(</span>message <span style="color: #2d9574;">"creating new journal file"</span><span style="color: #b1951d;">)</span>
          <span style="color: #b1951d;">(</span>copy-file previous-journal-file current-journal-file<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>message <span style="color: #2d9574;">"opening journal file"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span>find-file current-journal-file<span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span>goto-char <span style="color: #4e3163;">1</span><span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span>recenter-top-bottom<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-visit-agenda</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Opens the agenda after checking it has been set correctly."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>agenda-file <span style="color: #b1951d;">(</span>nicemacs-journal-filepath<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span>org-agenda-list<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
To make it easy to access these we will bind them to come convenient keys.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ooa"</span> 'nicemacs-visit-agenda<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oos"</span> 'org-schedule<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org510a78f" class="outline-4">
<h4 id="org510a78f"><span class="todo TODO">TODO</span> Nicemacs quicklinks (this needs to live elsewhere)</h4>
<div class="outline-text-4" id="text-org510a78f">
<p>
I keep an HTML file in the journal directory which a bunch of useful links to
files on my machine and websites. The following function makes it easier to copy
the most up to date version of this file into a helpful location.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-update-quick-links</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Update the quick links file to use the one from the journal."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">(</span>concat nicemacs-journal-directory <span style="color: #2d9574;">"/"</span> <span style="color: #2d9574;">"quick-links.html"</span><span style="color: #2d9574;">)</span>
             nicemacs-quick-links-page
             <span style="color: #4e3163;">1</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofuq"</span> 'nicemacs-update-quick-links<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-fetch-dotspacemacs</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Put a copy of the current dotspacemacs file in the resources directory."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">(</span>dotspacemacs/location<span style="color: #2d9574;">)</span>
             <span style="color: #2d9574;">(</span>concat nicemacs-resources-dir
                     <span style="color: #2d9574;">"/dotspacemacs-"</span>
                     <span style="color: #67b11d;">(</span>user-real-login-name<span style="color: #67b11d;">)</span>
                     <span style="color: #2d9574;">"-"</span>
                     <span style="color: #67b11d;">(</span>system-name<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
             <span style="color: #4e3163;">1</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"offd"</span> 'nicemacs-fetch-dotspacemacs<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-fetch-aspell</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Put a copy of the aspell personal word list in the resources directory."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">"~/.aspell.en.pws"</span>
             <span style="color: #2d9574;">(</span>concat nicemacs-resources-dir <span style="color: #2d9574;">"/aspell.en.pws"</span><span style="color: #2d9574;">)</span>
             <span style="color: #4e3163;">1</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"offs"</span> 'nicemacs-fetch-aspell<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-update-aspell</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Update the aspell personal word list."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">(</span>concat nicemacs-resources-dir <span style="color: #2d9574;">"/aspell.en.pws"</span><span style="color: #2d9574;">)</span>
             <span style="color: #2d9574;">"~/.aspell.en.pws"</span>
             <span style="color: #4e3163;">1</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofus"</span> 'nicemacs-update-aspell<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2bb1806" class="outline-4">
<h4 id="org2bb1806"><span class="todo TODO">TODO</span> Update a copy of the dotspacemacs file (this needs to live elsewhere)</h4>
</div>


<div id="outline-container-orgbb23c0b" class="outline-4">
<h4 id="orgbb23c0b">Miscellaneous</h4>
<div class="outline-text-4" id="text-orgbb23c0b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">open the export menu</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ooe"</span> 'org-export-dispatch<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Make sure org files open with lines truncated</span>
<span style="color: #3a81c3;">(</span>add-hook 'org-mode-hook 'spacemacs/toggle-truncate-lines-on<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
There is a variable in spacemacs, <code>dotspacemacs-whitespace-cleanup</code>, which if
you set to <code>'trailing</code> will remove trailing whitespace each time a file is
saved. It appears in the <code>.spacemacs</code> file with some documentation.
</p>
</div>
</div>

<div id="outline-container-org3618282" class="outline-4">
<h4 id="org3618282">Tables</h4>
<div class="outline-text-4" id="text-org3618282">
<p>
The org-mode support for tables is strong. There is the a neat snippet for
inserting tables and then in spacemacs, using <code>, t</code> will bring up some available
functions (including <code>, t n</code> which creates a new table for those that don't like
yasnippet). There is also <code>org-table-transpose-table-at-point</code>
</p>
</div>
</div>

<div id="outline-container-org9946e36" class="outline-4">
<h4 id="org9946e36">Inline Latex and image display</h4>
<div class="outline-text-4" id="text-org9946e36">
<p>
Org-mode can display images inline, however it is useful to be able to toggle
this feature occasionally, particularly if there are large images which take up
too much space. There is a function <code>org-toggle-inline-images</code> which does this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ooi"</span> 'org-toggle-inline-images<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The <code>org-latex-preview</code> function will show a preview of the latex fragment under
the mark. Running the command a second time will revert to the plain text.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ool"</span> 'org-latex-preview<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
To adjust the size of the figures, adjust the attribute <code>:scale</code> in the variable
<code>org-format-latex-options</code>.
</p>
</div>
</div>

<div id="outline-container-org9796e34" class="outline-4">
<h4 id="org9796e34">Hyperlinking in org-mode</h4>
<div class="outline-text-4" id="text-org9796e34">
<p>
By default, when you follow a link it will open in a new window in the current
frame. To follow links in the same window, you need to adjust the
<code>org-link-frame-setup</code> variable<sup><a id="fnr.2" class="footref" href="#fn.2" role="doc-backlink">2</a></sup>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">require</span> '<span style="color: #4e3163;">ol</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>add-to-list 'org-link-frame-setup '<span style="color: #6c3163;">(</span>file . find-file<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
We know that we need to <code>(require 'ol)</code> here by looking at the end of the file
in which <code>org-link-frame-setup</code> is defined and seeing what it "provides" at the
end.
</p>
</div>
</div>
</div>

<div id="outline-container-org62ac220" class="outline-3">
<h3 id="org62ac220">Website</h3>
<div class="outline-text-3" id="text-org62ac220">
</div>
<div id="outline-container-org56ee4a1" class="outline-4">
<h4 id="org56ee4a1">Declare which files need to be published</h4>
<div class="outline-text-4" id="text-org56ee4a1">
<p>
The <code>:exclude</code> variable can be used to specify which files to ignore using a
regular expression. The <code>htmlize</code> package seems to need to be manually imported
to get syntax highlighting to work, but even then it doesn't always work, I'm
not sure what is going on here.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">require</span> '<span style="color: #4e3163;">htmlize</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">require</span> '<span style="color: #4e3163;">ox-publish</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> org-publish-project-alist
    '<span style="color: #6c3163;">(</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-notes-org-files"</span>
       <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/public-site/org/notes/"</span>
       <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"org"</span>
       <span style="color: #3a81c3;">:exclude</span> <span style="color: #2d9574;">".*~undo-tree~"</span>
       <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/notes/"</span>
       <span style="color: #3a81c3;">:recursive</span> t
       <span style="color: #3a81c3;">:publishing-function</span> org-html-publish-to-html
       <span style="color: #3a81c3;">:headline-levels</span> <span style="color: #4e3163;">4</span>
       <span style="color: #3a81c3;">:auto-preamble</span> t<span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-lists-org-files"</span>
       <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/public-site/org/lists/"</span>
       <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"org"</span>
       <span style="color: #3a81c3;">:exclude</span> <span style="color: #2d9574;">".*~undo-tree~"</span>
       <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/lists/"</span>
       <span style="color: #3a81c3;">:recursive</span> t
       <span style="color: #3a81c3;">:publishing-function</span> org-html-publish-to-html
       <span style="color: #3a81c3;">:headline-levels</span> <span style="color: #4e3163;">4</span>
       <span style="color: #3a81c3;">:auto-preamble</span> nil<span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-notes-static"</span>
        <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/public-site/org/"</span>
        <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"css</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">js</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">png</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">jpg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">jpeg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">gif</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">pdf</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">mp3</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">ogg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">swf</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">txt</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">cur</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">svg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">csv</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">html</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">json</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">bib</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">webp"</span>
        <span style="color: #3a81c3;">:exclude</span> <span style="color: #2d9574;">"~/public-site/org/misc/matplotlib/.*</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">~/public-site/org/misc/d3/.*"</span>
        <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/"</span>
        <span style="color: #3a81c3;">:recursive</span> t
        <span style="color: #3a81c3;">:publishing-function</span> org-publish-attachment<span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-misc-d3-org-files"</span>
       <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/public-site/org/misc/d3/"</span>
       <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"org"</span>
       <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/misc/d3/"</span>
       <span style="color: #3a81c3;">:recursive</span> t
       <span style="color: #3a81c3;">:publishing-function</span> org-html-publish-to-html
       <span style="color: #3a81c3;">:headline-levels</span> <span style="color: #4e3163;">4</span>
       <span style="color: #3a81c3;">:auto-preamble</span> t<span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-misc-d3-extra-files"</span>
       <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/public-site/org/misc/d3/"</span>
       <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"js</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">png</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">svg</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">csv</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">html</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">json"</span>
       <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/misc/d3/"</span>
       <span style="color: #3a81c3;">:recursive</span> t
       <span style="color: #3a81c3;">:publishing-function</span> org-publish-attachment<span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-nicemacs"</span>
       <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/Documents/nicemacs/"</span>
       <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"org"</span>
       <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/misc/nicemacs/"</span>
       <span style="color: #3a81c3;">:recursive</span> <span style="color: #67b11d;">()</span>
       <span style="color: #3a81c3;">:publishing-function</span> org-html-publish-to-html
       <span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org-bibliography"</span>
       <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/Documents/bibliography/"</span>
       <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"png"</span>
       <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/resources/"</span>
       <span style="color: #3a81c3;">:recursive</span> <span style="color: #67b11d;">()</span>
       <span style="color: #3a81c3;">:publishing-function</span> org-publish-attachment
       <span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"review2-org"</span>
       <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/Documents/bibliography/review2"</span>
       <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"org"</span>
       <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/notes/review2"</span>
       <span style="color: #3a81c3;">:recursive</span> <span style="color: #67b11d;">()</span>
       <span style="color: #3a81c3;">:publishing-function</span> org-html-publish-to-html
       <span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"review2-static"</span>
       <span style="color: #3a81c3;">:base-directory</span> <span style="color: #2d9574;">"~/Documents/bibliography/review2"</span>
       <span style="color: #3a81c3;">:base-extension</span> <span style="color: #2d9574;">"css</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">|</span><span style="color: #2d9574;">png"</span>
       <span style="color: #3a81c3;">:publishing-directory</span> <span style="color: #2d9574;">"~/aezarebski.github.io/notes/review2"</span>
       <span style="color: #3a81c3;">:recursive</span> t
       <span style="color: #3a81c3;">:publishing-function</span> org-publish-attachment
       <span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"d3"</span> <span style="color: #3a81c3;">:components</span> <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"org-misc-d3-org-files"</span>
                         <span style="color: #2d9574;">"org-misc-d3-extra-files"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
      <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"org"</span> <span style="color: #3a81c3;">:components</span> <span style="color: #67b11d;">(</span><span style="color: #2d9574;">"org-lists-org-files"</span>
                          <span style="color: #2d9574;">"org-notes-org-files"</span>
                          <span style="color: #2d9574;">"org-notes-static"</span>
                          <span style="color: #2d9574;">"org-nicemacs"</span>
                          <span style="color: #2d9574;">"org-bibliography"</span>
                          <span style="color: #2d9574;">"review2-org"</span>
                          <span style="color: #2d9574;">"review2-static"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orgd60cf4a"></a>Declare how to trigger the publishing<br />
<div class="outline-text-5" id="text-orgd60cf4a">
<p>
The following function simplifies the process of compiling the site and
committing it to GitHub so it goes live. To enable this page to be copied to a
file with a more sensible name and to have easier access to the logo there are
some additional commands.
</p>

<p>
There are two functions here, the first, <code>publish-my-site</code>, is bound to <code>SPC oop</code>
runs the publishing (and moves a couple of files around in a sensible way) and
the second, <code>publish-my-site-and-magit</code>, bound to <code>SPC ooP</code> runs the publishing and
opens the magit buffer to commit and push the changes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">publish-my-site</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>org-publish <span style="color: #2d9574;">"org"</span> nil t<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">"~/Documents/nicemacs/resources/nicemacs-logo.png"</span>
             <span style="color: #2d9574;">"~/aezarebski.github.io/misc/nicemacs/resources/nicemacs-logo.png"</span>
             t<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">"~/public-site/org/scratch.html"</span>
             <span style="color: #2d9574;">"~/aezarebski.github.io/index.html"</span>
             t<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">"~/.aspell.en.pws"</span>
             <span style="color: #2d9574;">"~/Documents/nicemacs/resources/aspell.en.pws"</span>
             t<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>copy-file <span style="color: #2d9574;">"~/.spacemacs"</span>
             <span style="color: #2d9574;">"~/Documents/nicemacs/resources/spacemacs"</span>
             t<span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">force-publish-and-magit</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>publish-my-site<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>org-publish <span style="color: #2d9574;">"org"</span> t nil<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>magit-status <span style="color: #2d9574;">"~/aezarebski.github.io"</span><span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oop"</span> 'publish-my-site<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ooP"</span> 'force-publish-and-magit<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The following function is useful for going to the root of my notes site which is
a sensible starting point for looking up material without the browser.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">visit-my-site-index</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>find-file <span style="color: #2d9574;">"~/public-site/org/index.org"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"oov"</span> 'visit-my-site-index<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
I used to have some commands for inserting tables and source code blocks into
org-mode files, but this functionality (and more) is all provided by
<code>yasnippet</code>. Just run <code>SPC i s</code> and it will start a search for the relevant
snippet: "source" and "table" are in there for example.
</p>

<p>
As of org-mode version about 9.3 the default behaviour appears to be that new
lines will be indented to the level of the current header. I would prefer that
new lines of text start at the start of the line. This can be achieved by
setting <code>org-adapt-indentation</code> to <code>nil</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> org-adapt-indentation nil<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgc6c2175" class="outline-3">
<h3 id="orgc6c2175">Shells and REPLs</h3>
<div class="outline-text-3" id="text-orgc6c2175">
</div>
<div id="outline-container-org9e813dc" class="outline-4">
<h4 id="org9e813dc">Bash</h4>
<div class="outline-text-4" id="text-org9e813dc">
<p>
Sometimes it is useful to just be able to open a regular bash shell. The
following binding helps with this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"osb"</span> 'shell<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5b9acb" class="outline-4">
<h4 id="orgf5b9acb">Eshell</h4>
<div class="outline-text-4" id="text-orgf5b9acb">
<p>
To make <code>eshell</code> the default shell in spacemacs add the following to the
<code>dotspacemacs-configuration-layers</code>. The position and width might need a bit of
tweaking to get something you like, but it is pretty easy to adjust the window
set up anyway.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>shell <span style="color: #3a81c3;">:variables</span>
       shell-default-shell 'eshell
       shell-default-position 'right
       shell-default-width <span style="color: #4e3163;">50</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Sometimes it is nice to be able to quickly open a larger terminal window, the
following does this. The mnemonic here is that we are using the bigger quote
mark so it opens the bigger terminal window.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">shell-and-delete-windows</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>spacemacs/default-pop-shell<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>delete-other-windows<span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"\""</span> 'shell-and-delete-windows<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The following is for searching the shell history, but I rarely use it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"osh"</span> 'helm-eshell-history<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
It is useful to be able to look at what aliases are currently defined for
Eshell. The following function visits this file. Although the preferred way to
edit the aliases in the Eshell is using the definitions below!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">eshell-aliases</span> <span style="color: #6c3163;">()</span>
    <span style="color: #da8b55;">"Visit the file containing the eshell aliases."</span>
    <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
    <span style="color: #6c3163;">(</span>find-file-other-window eshell-aliases-file<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"osa"</span> 'eshell-aliases<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The following expressions set up some useful aliases to have in the shell. Note
that while the shell is indispensable, <code>dired</code> is also a good solution in many
situations.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">require</span> '<span style="color: #4e3163;">em-alias</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>eshell/alias <span style="color: #2d9574;">"cdk"</span> <span style="color: #2d9574;">"cd .."</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>eshell/alias <span style="color: #2d9574;">"cdkk"</span> <span style="color: #2d9574;">"cd ../.."</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>eshell/alias <span style="color: #2d9574;">"cdkkk"</span> <span style="color: #2d9574;">"cd ../../.."</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>eshell/alias <span style="color: #2d9574;">"ls1"</span> <span style="color: #2d9574;">"ls -1 $1"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>eshell/alias <span style="color: #2d9574;">"ff"</span> <span style="color: #2d9574;">"find-file $1"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Because no one has time for typing capital letters we will set the completion
variable in the shell to ignore case during tab completion.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> eshell-cmpl-ignore-case t<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The value of <code>exec-path</code> is the list of locations that Emacs will look for
executables on. The <code>executable-find</code> function plays the role of <code>which</code> for Emacs.
We need to add <code>~/.local/bin</code> so that it knows where to find Haskell executables
and the <code>.nvm</code> path is so that it knows where to find JavaScript programs that
have been installed from npm.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> exec-path <span style="color: #6c3163;">(</span>append exec-path '<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"/home/aez/.local/bin"</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbfaaf6a" class="outline-4">
<h4 id="orgbfaaf6a"><code>ielm</code></h4>
<div class="outline-text-4" id="text-orgbfaaf6a">
<p>
Yes, Eshell can handle Emacs lisp, but it would also be nice to be able to have
a binding to open <code>ielm</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"osi"</span> 'ielm<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6f95f11" class="outline-4">
<h4 id="org6f95f11">R</h4>
<div class="outline-text-4" id="text-org6f95f11">
<p>
Sometimes you just need an R REPL!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"osr"</span> 'R<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd14ecbe" class="outline-3">
<h3 id="orgd14ecbe">Monitoring processes</h3>
<div class="outline-text-3" id="text-orgd14ecbe">
<p>
There is an emacs function for monitoring the processes you are running called
<code>proced</code>. It is similar to <code>htop</code> and you can click on the column headers to
sort by those variables. It doesn't seem to have <code>evil</code> keybindings though, but
otherwise is a bit like <code>dired</code>. In spacemacs this is bound to <code>SPC a P</code>. The
following configuration specifies that the display should be updated every
second.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> proced-auto-update-flag t<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> proced-auto-update-interval <span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4020f81" class="outline-3">
<h3 id="org4020f81">Emacs Speaks Statistics (ESS)</h3>
<div class="outline-text-3" id="text-org4020f81">
<p>
There are some useful materials about ESS which I have contributed to in the <a href="https://ess-intro.github.io/">ESS
intro</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> spacemacs/ess-config
      '<span style="color: #6c3163;">(</span>progn
         <span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Follow Hadley Wickham's R style guide</span>
         <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">setq</span> ess-first-continued-statement-offset <span style="color: #4e3163;">2</span>
               ess-continued-statement-offset <span style="color: #4e3163;">0</span>
               ess-expression-offset <span style="color: #4e3163;">2</span>
               ess-nuke-trailing-whitespace-p t
               ess-default-style 'DEFAULT<span style="color: #2d9574;">)</span>
         <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">when</span> ess-disable-underscore-assign
           <span style="color: #67b11d;">(</span><span style="color: #3a81c3;">setq</span> ess-smart-S-assign-key nil<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>

         <span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">(define-key ess-doc-map "h" 'ess-display-help-on-object)</span>
         <span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">(define-key ess-doc-map "p" 'ess-R-dv-pprint)</span>
         <span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">(define-key ess-doc-map "t" 'ess-R-dv-ctable)</span>
         <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">dolist</span> <span style="color: #67b11d;">(</span>mode '<span style="color: #b1951d;">(</span>ess-r-mode ess-mode<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">make documentation open in a useful mode in ess</span>
<span style="color: #3a81c3;">(</span>evil-set-initial-state 'ess-r-help-mode 'motion<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org6b9c4d6" class="outline-4">
<h4 id="org6b9c4d6">LSP with ESS</h4>
<div class="outline-text-4" id="text-org6b9c4d6">
<p>
Spacemacs provides good keybindings out of the box, and after setting up LSP
there is very little need to do any additional configuration for a nice R
experience. You just need to remember to install <code>languageserver</code> from CRAN,
although if you want linting, you may also need to install the <code>lintr</code> package
from CRAN.
</p>

<p>
If you are using LSP, linting follows the standard key sequence <code>SPC m = &lt;x&gt;</code>
where <code>&lt;x&gt;</code> is either <code>b</code> (buffer), or <code>r</code> (region).
</p>
</div>
</div>

<div id="outline-container-org3da50ba" class="outline-4">
<h4 id="org3da50ba">Removing LSP because it is too slow</h4>
<div class="outline-text-4" id="text-org3da50ba">
<p>
I have found it will lag at times so if you want to disable this and use a
different backend adjust your layer configuration with the following
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>ess <span style="color: #3a81c3;">:variables</span>
     ess-r-backend 'ess<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org46c4648" class="outline-4">
<h4 id="org46c4648"><span class="todo TODO">TODO</span> Fix the buffer display settings so that help covers the REPL</h4>
<div class="outline-text-4" id="text-org46c4648">
<p>
The following might be useful as a starting point for this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>info <span style="color: #2d9574;">"(ess) Controlling buffer display"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4c7a091" class="outline-4">
<h4 id="org4c7a091">Setting the REPL starting directory</h4>
<div class="outline-text-4" id="text-org4c7a091">
<p>
The following might be useful as a starting point for this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> ess-startup-directory-function '<span style="color: #6c3163;">(</span>lambda nil default-directory<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgddf3eff" class="outline-4">
<h4 id="orgddf3eff">Switching REPL linked to source file</h4>
<div class="outline-text-4" id="text-orgddf3eff">
<p>
Suppose you have a couple of REPLs going and you want to use a different one
with a particular buffer. The <code>ess-switch-process</code> has you covered.
</p>
</div>
</div>

<div id="outline-container-org8315a40" class="outline-4">
<h4 id="org8315a40">Restarting the REPL</h4>
<div class="outline-text-4" id="text-org8315a40">
<p>
Run <code>inferior-ess-reload</code> to reset the REPL.
</p>
</div>
</div>

<div id="outline-container-org91c817c" class="outline-4">
<h4 id="org91c817c">Setting up <code>lintr</code> for static analysis</h4>
<div class="outline-text-4" id="text-org91c817c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> ess-use-flymake nil<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">use-package</span> <span style="color: #4e3163;">flycheck</span>
  <span style="color: #3a81c3;">:ensure</span> t
  <span style="color: #3a81c3;">:init</span>
  <span style="color: #6c3163;">(</span>global-flycheck-mode t<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5f02924" class="outline-3">
<h3 id="org5f02924">Version control via magit</h3>
<div class="outline-text-3" id="text-org5f02924">
<p>
The following setting makes magit use the full frame when visiting the status. I
like this because it helps me to focus on this particular task.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> magit-display-buffer-function 'magit-display-buffer-fullframe-status-v1<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-orgbf234eb" class="outline-4">
<h4 id="orgbf234eb">Resolving conflicts</h4>
<div class="outline-text-4" id="text-orgbf234eb">
<p>
There is functionality to help you resolve merge conflicts. When in the magit
buffer, put the cursor over the offending conflict and us <code>x</code>, as you might to
discard the chunk normally. This should then prompt you to choose between the
available options. The "ours"/"theirs" terminology I find a little unclear, but
they also let you know "upper" or "lower" to select which version.
</p>
</div>
</div>

<div id="outline-container-org896e193" class="outline-4">
<h4 id="org896e193">Staging only part of a hunk</h4>
<div class="outline-text-4" id="text-org896e193">
<p>
If you only want to stage a couple of lines from a hunk you can do this by
selecting the lines and <code>s</code>. If this doesn't work for some unknown reason, you
can select the lines and call <code>magit-stage</code>.
</p>
</div>
</div>

<div id="outline-container-org1334899" class="outline-4">
<h4 id="org1334899">Commit helper functions</h4>
<div class="outline-text-4" id="text-org1334899">
<p>
There are a few projects where the same commit message use used often. It would
be nice to have a macro to fill this in each time for me. Since this is working
with commits I will use the prefix "c" followed by an indicator of the appropriate
commit message to use.
</p>

<p>
Apparently, this is <a href="https://xkcd.com/1205/">worth the time&#x2026;</a> so let's write a macro to make these
easier to define.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defmacro</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-commits</span> <span style="color: #6c3163;">(</span>fname cmessage<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>list 'defun
        <span style="color: #2d9574;">(</span>intern <span style="color: #67b11d;">(</span>format <span style="color: #2d9574;">"ncf-%s"</span> fname<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">()</span>
        <span style="color: #2d9574;">(</span>list 'interactive<span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">(</span>list 'magit-commit-create
              `<span style="color: #67b11d;">(</span>list <span style="color: #2d9574;">"--edit"</span>
                     ,<span style="color: #b1951d;">(</span>list 'format
                            <span style="color: #2d9574;">"-m %s %s"</span>
                            cmessage
                            <span style="color: #3a81c3;">(</span>list 'downcase
                                  <span style="color: #6c3163;">(</span>list 'format-time-string <span style="color: #2d9574;">"%A %l:%M %p"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
And some useful examples should be bound to shortcuts.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-commits</span> network <span style="color: #2d9574;">"update citation network"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ocn"</span> 'ncf-network<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-commits</span> review <span style="color: #2d9574;">"update reading list"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ocr"</span> 'ncf-review<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-commits</span> website <span style="color: #2d9574;">"update website"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ocw"</span> 'ncf-website<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-commits</span> journal <span style="color: #2d9574;">"update journal"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ocj"</span> 'ncf-journal<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org479e3e5" class="outline-3">
<h3 id="org479e3e5">Spray</h3>
<div class="outline-text-3" id="text-org479e3e5">
<p>
Speed reader for emacs.
Enable this by adding <code>speed-reading</code> to your configuration.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Keys</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>SPC a R</code></td>
<td class="org-left">Start spray</td>
</tr>

<tr>
<td class="org-left"><code>SPC</code></td>
<td class="org-left">Pause</td>
</tr>

<tr>
<td class="org-left"><code>f</code></td>
<td class="org-left">faster</td>
</tr>

<tr>
<td class="org-left"><code>s</code></td>
<td class="org-left">slower</td>
</tr>

<tr>
<td class="org-left"><code>h</code></td>
<td class="org-left">back (vim left)</td>
</tr>

<tr>
<td class="org-left"><code>l</code></td>
<td class="org-left">forward (vim right)</td>
</tr>

<tr>
<td class="org-left"><code>q</code></td>
<td class="org-left">quit</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgc0c2350" class="outline-3">
<h3 id="orgc0c2350"><span class="todo TODO">TODO</span> File and buffer manipulation</h3>
<div class="outline-text-3" id="text-orgc0c2350">
<p>
If you want to kill buffers with names that match a regex there is the
<code>kill-matching-buffers</code> function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">kill-all-other-buffers</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Kill all the buffers other than the current one."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>mapc 'kill-buffer <span style="color: #2d9574;">(</span>delq <span style="color: #67b11d;">(</span>current-buffer<span style="color: #67b11d;">)</span> <span style="color: #67b11d;">(</span>buffer-list<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Define a short cut to close all windows except the current one without killing</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">their buffers.</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"wD"</span> 'spacemacs/window-manipulation-transient-state/delete-other-windows<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Define a short cut for following files</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofp"</span> 'helm-projectile-find-file<span style="color: #3a81c3;">)</span>
</pre>
</div>

<ul class="org-ul">
<li><code>find-file-at-point</code> is also very useful!</li>
</ul>
</div>

<div id="outline-container-orgcbc474e" class="outline-4">
<h4 id="orgcbc474e">Time stamping files</h4>
<div class="outline-text-4" id="text-orgcbc474e">
<p>
Add <code>Time-stamp: &lt;&gt;</code> somewhere in the first eight lines of a file and add the
<code>time-stamp</code> function as a before save hook and it will put the current time on
that line before saving. This way you will know when you last edited a file in a
way that is a bit simpler than git.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> time-stamp-format <span style="color: #2d9574;">"Last modified: %Y-%02m-%02d %02H:%02M:%02S"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>add-hook 'before-save-hook 'time-stamp<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5aa3146" class="outline-4">
<h4 id="org5aa3146">Handling large files</h4>
<div class="outline-text-4" id="text-org5aa3146">
<p>
Visiting large or sensitive files is unpleasant. There is <code>find-file-literally</code> to
open a file in fundamental mode, following this up with <code>font-lock-fontify-buffer</code>
will make things look a bit nicer. This is a decent option if you have a massive
file and want to avoid crashing emacs. There is <code>view-file</code> which opens the file
in read-only mode but somehow manages to get syntax highlighting correct despite
the file being in fundamental mode.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofv"</span> 'view-file<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofl"</span> 'find-file-literally<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbde51e7" class="outline-4">
<h4 id="orgbde51e7">Dired</h4>
<div class="outline-text-4" id="text-orgbde51e7">
</div>
<ul class="org-ul">
<li><a id="org209615f"></a>Configuration<br />
<div class="outline-text-5" id="text-org209615f">
<p>
By default dired displays the size of files in bytes, a more human friendly
description can be obtained by modifying the <code>dired-listing-switches</code> variable.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">setq</span> dired-listing-switches <span style="color: #2d9574;">"-alh"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org684e233"></a>Opening files outside of emacs<br />
<div class="outline-text-5" id="text-org684e233">
<p>
A very useful keybinding to know about in dired is <code>W</code> which will open the file
under the cursor using an external program suggested by the OS. Surprisingly
this calls the function <code>browse-url-of-dired-file</code>.
</p>
</div>
</li>

<li><a id="orga53cc54"></a>Changing file permissions<br />
<div class="outline-text-5" id="text-orga53cc54">
<p>
If you are in Dired, there is a function <code>dired-do-chmod</code> bound to <code>M</code>. This is
probably the simplest (read recommended) way to change file permissions. There
are of course alternatives&#x2026;
</p>

<p>
There is a <code>chmod</code> function in Emacs. When invoked, you will be prompted to
select a file from the current directory and the code for the new permissions.
Recall that the permissions use the following coding for user, group, and other.
The codes <code>750</code> and <code>444</code> are the most useful I have found.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">RWX</th>
<th scope="col" class="org-right">Code</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>rwx</code></td>
<td class="org-right">7</td>
</tr>

<tr>
<td class="org-left"><code>rw-</code></td>
<td class="org-right">6</td>
</tr>

<tr>
<td class="org-left"><code>r-x</code></td>
<td class="org-right">5</td>
</tr>

<tr>
<td class="org-left"><code>r--</code></td>
<td class="org-right">4</td>
</tr>

<tr>
<td class="org-left"><code>-wx</code></td>
<td class="org-right">3</td>
</tr>

<tr>
<td class="org-left"><code>-w-</code></td>
<td class="org-right">2</td>
</tr>

<tr>
<td class="org-left"><code>--x</code></td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-left"><code>---</code></td>
<td class="org-right">0</td>
</tr>
</tbody>
</table>

<p>
To visit a file with sudo rights use <code>SPC f E</code> which calls
<code>spacemacs/sudo-edit</code>.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgf997427" class="outline-4">
<h4 id="orgf997427">Visiting friends</h4>
<div class="outline-text-4" id="text-orgf997427">
<p>
The following functionality is useful for defining visitors of frequently needed
files<sup><a id="fnr.3" class="footref" href="#fn.3" role="doc-backlink">3</a></sup>.
</p>
</div>

<ul class="org-ul">
<li><a id="org93c2dfa"></a>Visiting files<br />
<div class="outline-text-5" id="text-org93c2dfa">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defmacro</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-visit-file</span> <span style="color: #6c3163;">(</span>fname pname path<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>list 'defun
        <span style="color: #2d9574;">(</span>intern <span style="color: #67b11d;">(</span>format <span style="color: #2d9574;">"nvf-%s"</span> fname<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">()</span>
        <span style="color: #2d9574;">(</span>list 'interactive<span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">(</span>list 'progn
              <span style="color: #67b11d;">(</span>list 'message
                    <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"Visiting %s"</span> pname<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
              <span style="color: #67b11d;">(</span>list 'find-file path<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Then we need to define the actual files that we want listed
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> academia-notes <span style="color: #2d9574;">"Academia notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/academic-journal-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> beast-notes <span style="color: #2d9574;">"BEAST2 notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/beast2-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> colleagues <span style="color: #2d9574;">"Colleagues notes"</span> <span style="color: #2d9574;">"~/Documents/professional/colleague-details.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> git-notes <span style="color: #2d9574;">"Git notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/git-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> haskell-notes <span style="color: #2d9574;">"Haskell notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/haskell-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> java-notes <span style="color: #2d9574;">"Java notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/java-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> latex-notes <span style="color: #2d9574;">"LaTeX notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/latex-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> maxima-notes <span style="color: #2d9574;">"Maxima notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/maxima-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> nicemacs <span style="color: #2d9574;">"nicemacs"</span> <span style="color: #2d9574;">"~/Documents/nicemacs/nicemacs.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> nicemacs-el <span style="color: #2d9574;">"nicemacs emacs lisp"</span> <span style="color: #2d9574;">"~/Documents/nicemacs/nicemacs.el"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> org-mode-notes <span style="color: #2d9574;">"org-mode notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/org-mode-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> python-notes <span style="color: #2d9574;">"Python notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/python-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> r-notes <span style="color: #2d9574;">"R notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/r-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> ubuntu-notes <span style="color: #2d9574;">"Ubuntu/Linux notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/linux-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> reading-list <span style="color: #2d9574;">"Reading list"</span> <span style="color: #2d9574;">"/home/aez/Documents/bibliography/review2/reading-list.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> review-2 <span style="color: #2d9574;">"Review 2"</span> <span style="color: #2d9574;">"/home/aez/Documents/bibliography/review2/review.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> review-engineering <span style="color: #2d9574;">"Literature review: Software engineering"</span> <span style="color: #2d9574;">"/home/aez/Documents/bibliography/review/software.tex"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> review-phylodynamics <span style="color: #2d9574;">"Literature review: Phylodynamics"</span> <span style="color: #2d9574;">"/home/aez/Documents/bibliography/review/phylodynamics.tex"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> review-references <span style="color: #2d9574;">"Bibtex references"</span> <span style="color: #2d9574;">"/home/aez/Documents/bibliography/references.bib"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> spelling <span style="color: #2d9574;">"Spelling list"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/misc/spelling.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> statistics-notes <span style="color: #2d9574;">"Statistics notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/statistics-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> timtam-manuscript <span style="color: #2d9574;">"TimTam manuscript"</span> <span style="color: #2d9574;">"/home/aez/Documents/manuscripts/zarebski2022xxx/README.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> wikipedia-notes <span style="color: #2d9574;">"Wikipedia notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/wikipedia-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> xml-notes <span style="color: #2d9574;">"XML notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/xml-notes.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-file</span> zarebski-bib <span style="color: #2d9574;">"Bibliography: Zarebski"</span> <span style="color: #2d9574;">"/home/aez/Documents/bibliography/zarebski/zarebski.bib"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="orge53cfff"></a>Visiting directories<br />
<div class="outline-text-5" id="text-orge53cfff">
<p>
Then there are some visitor functions where we do not want to visit a particular
file but are more interested in navigating to a particular directory in either
dired or magit.
</p>

<p>
The following macro provides a simple way to visit dired buffers for directories
that I regularly want to look at. The use of <code>revert-buffer</code> is to ensure that
the contents being shown are up to date.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defmacro</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-visit-dir</span> <span style="color: #6c3163;">(</span>dname pname path<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>list 'defun
        <span style="color: #2d9574;">(</span>intern <span style="color: #67b11d;">(</span>format <span style="color: #2d9574;">"nvd-%s"</span> dname<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">()</span>
        <span style="color: #2d9574;">(</span>list 'interactive<span style="color: #2d9574;">)</span>
        <span style="color: #2d9574;">(</span>list 'progn
              <span style="color: #67b11d;">(</span>list 'message
                    <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"Visiting %s"</span> pname<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
              <span style="color: #67b11d;">(</span>list 'dired-jump nil path<span style="color: #67b11d;">)</span>
              <span style="color: #67b11d;">(</span>list 'revert-buffer<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The following uses the <code>nicemacs-visit-dir</code> macro to write functions to visit
the specified directories. Note that there is a <code>fake.org</code> file in each of
these, this is ignored, but it seemed to require there to be a file path rather
than the path of a directory.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-dir</span> library <span style="color: #2d9574;">"Library"</span> <span style="color: #2d9574;">"/home/aez/Documents/library/fake.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-dir</span> music <span style="color: #2d9574;">"Music"</span> <span style="color: #2d9574;">"/home/aez/Music/fake.org"</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;">; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">default in Ubuntu 20.04.4</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-dir</span> documents <span style="color: #2d9574;">"Documents"</span> <span style="color: #2d9574;">"/home/aez/Documents/fake.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-dir</span> professional <span style="color: #2d9574;">"Professional"</span> <span style="color: #2d9574;">"/home/aez/Documents/professional/README.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-dir</span> timtam <span style="color: #2d9574;">"TimTam"</span> <span style="color: #2d9574;">"/home/aez/Documents/timtam2/README.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-dir</span> website-org <span style="color: #2d9574;">"Website (org files)"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/fake.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-dir</span> website-html <span style="color: #2d9574;">"Website (HTML files)"</span> <span style="color: #2d9574;">"/home/aez/aezarebski.github.io/fake.org"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-visit-dir</span> notes <span style="color: #2d9574;">"My notes"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/fake.org"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org6b45a7a"></a>Keybindings<br />
<div class="outline-text-5" id="text-org6b45a7a">
<p>
And finally we need to writing keybindings for these. For directories I will use
the prefix <code>ovd</code> and for the files I keep notes on specific topics in I will
attempt to use the prefix <code>ovn</code> unless it is something that I use multiple times
a day everyday.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys
  <span style="color: #2d9574;">"ovb"</span> 'nvf-last-bib
  <span style="color: #2d9574;">"ovc"</span> 'nvf-colleagues
  <span style="color: #2d9574;">"ove"</span> 'nvf-nicemacs
  <span style="color: #2d9574;">"ovE"</span> 'nvf-nicemacs-el
  <span style="color: #2d9574;">"ovj"</span> 'nvf-journal
  <span style="color: #2d9574;">"ovdd"</span> 'nvd-documents
  <span style="color: #2d9574;">"ovdl"</span> 'nvd-library
  <span style="color: #2d9574;">"ovdm"</span> 'nvd-music
  <span style="color: #2d9574;">"ovdn"</span> 'nvd-notes
  <span style="color: #2d9574;">"ovdp"</span> 'nvd-professional
  <span style="color: #2d9574;">"ovdt"</span> 'nvd-timtam
  <span style="color: #2d9574;">"ovdw"</span> 'nvd-website-org
  <span style="color: #2d9574;">"ovdW"</span> 'nvd-website-html
  <span style="color: #2d9574;">"ovna"</span> 'nvf-academia-notes
  <span style="color: #2d9574;">"ovnb"</span> 'nvf-beast-notes
  <span style="color: #2d9574;">"ovng"</span> 'nvf-git-notes
  <span style="color: #2d9574;">"ovnh"</span> 'nvf-haskell-notes
  <span style="color: #2d9574;">"ovnj"</span> 'nvf-java-notes
  <span style="color: #2d9574;">"ovnl"</span> 'nvf-latex-notes
  <span style="color: #2d9574;">"ovnm"</span> 'nvf-maxima-notes
  <span style="color: #2d9574;">"ovno"</span> 'nvf-org-mode-notes
  <span style="color: #2d9574;">"ovnp"</span> 'nvf-python-notes
  <span style="color: #2d9574;">"ovnr"</span> 'nvf-r-notes
  <span style="color: #2d9574;">"ovns"</span> 'nvf-statistics-notes
  <span style="color: #2d9574;">"ovnu"</span> 'nvf-ubuntu-notes
  <span style="color: #2d9574;">"ovnw"</span> 'nvf-wikipedia-notes
  <span style="color: #2d9574;">"ovnx"</span> 'nvf-xml-notes
  <span style="color: #2d9574;">"ovp"</span> 'nvf-professional
  <span style="color: #2d9574;">"ovre"</span> 'nvf-review-engineering
  <span style="color: #2d9574;">"ovrl"</span> 'nvf-reading-list
  <span style="color: #2d9574;">"ovr2"</span> 'nvf-review-2
  <span style="color: #2d9574;">"ovrr"</span> 'nvf-review-references
  <span style="color: #2d9574;">"ovrp"</span> 'nvf-review-phylodynamics
  <span style="color: #2d9574;">"ovt"</span> 'nvf-timtam-manuscript
  <span style="color: #2d9574;">"ovrz"</span> 'nvf-zarebski-bib
  <span style="color: #2d9574;">"ovs"</span> 'nvf-spelling<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgd65e24a" class="outline-4">
<h4 id="orgd65e24a"><span class="todo TODO">TODO</span> Searching by filename</h4>
<div class="outline-text-4" id="text-orgd65e24a">
<p>
There is the <code>find-dired</code> function to help with this.
</p>
</div>
</div>

<div id="outline-container-orgdc6cf9d" class="outline-4">
<h4 id="orgdc6cf9d"><span class="todo TODO">TODO</span> Searching within files</h4>
<div class="outline-text-4" id="text-orgdc6cf9d">
<p>
Here is an example of a nifty little function to help search my notes. It would
be nice to abstract this into a macro so we can write similar searches for other
directories.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nsg-notes</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>search-terms <span style="color: #b1951d;">(</span>read-string <span style="color: #2d9574;">"Search term: "</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">progn</span>
      <span style="color: #67b11d;">(</span>message search-terms<span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>rgrep search-terms <span style="color: #2d9574;">"*.org"</span> <span style="color: #2d9574;">"/home/aez/public-site/org/notes/"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nsg-journal</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>search-terms <span style="color: #b1951d;">(</span>read-string <span style="color: #2d9574;">"Search term: "</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">progn</span>
      <span style="color: #67b11d;">(</span>message search-terms<span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>rgrep search-terms <span style="color: #2d9574;">"*.org"</span> <span style="color: #2d9574;">"/home/aez/Documents/journal/"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">nsg-review</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>search-terms <span style="color: #b1951d;">(</span>read-string <span style="color: #2d9574;">"Search term: "</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">progn</span>
      <span style="color: #67b11d;">(</span>message search-terms<span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>rgrep search-terms <span style="color: #2d9574;">"*.tex"</span> <span style="color: #2d9574;">"/home/aez/Documents/bibliography/"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
And then we need to bind it to some keys to make it easier to use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys
  <span style="color: #2d9574;">"oSn"</span> 'nsg-notes
  <span style="color: #2d9574;">"oSj"</span> 'nsg-journal
  <span style="color: #2d9574;">"oSr"</span> 'nsg-review<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org42a65e9" class="outline-4">
<h4 id="org42a65e9">Ibuffer</h4>
<div class="outline-text-4" id="text-org42a65e9">
<p>
The Ibuffer menu provides a more featureful dired-like menu for buffers.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofb"</span> 'ibuffer<span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">;; </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Open Ibuffer in the motion state rather than as the default emacs mode.</span>
<span style="color: #3a81c3;">(</span>evil-set-initial-state 'ibuffer-mode 'motion<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
The navigation mode for ibuffer needs to be adjusted to work nicely with vim
keybindings.
</p>
</div>
</div>

<div id="outline-container-org79ed896" class="outline-4">
<h4 id="org79ed896">Misc</h4>
<div class="outline-text-4" id="text-org79ed896">
<p>
Sometimes it is useful to get the full path of the file shown in a buffer. This
is bound to <code>SPC o f d</code> for owner-files-directory. This also writes the path to
the kill ring because often when you need this information it is because you are
about to include it in a buffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">message-buffer-file-name</span> <span style="color: #6c3163;">()</span>
  <span style="color: #da8b55;">"Print the full path of the current buffer's file to the</span>
<span style="color: #da8b55;">minibuffer and store this on the kill ring."</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>kill-new buffer-file-name<span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span>message buffer-file-name<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys <span style="color: #2d9574;">"ofd"</span> 'message-buffer-file-name<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgca0f398" class="outline-4">
<h4 id="orgca0f398"><span class="todo TODO">TODO</span> Update configuration files</h4>
<div class="outline-text-4" id="text-orgca0f398">
<p>
There are a couple of files that get modified programmatically, it would be nice
to have some helper functions to operate on them so it is easier to keep them in
line. For example, the dot spacemacs file should be backed up into
<code>nicemacs/resources</code> occassionally.
</p>
</div>
</div>

<div id="outline-container-org3e83513" class="outline-4">
<h4 id="org3e83513">Download helpers</h4>
<div class="outline-text-4" id="text-org3e83513">
<p>
Suppose that you want to get a copy of the last file you downloaded in the
current directory, this is a pretty common thing to do so a function would be
helpful. This will probably be most useful to call from Eshell so I won't give
it a key binding just yet.
</p>
</div>

<ul class="org-ul">
<li><a id="org6903ce4"></a><span class="todo TODO">TODO</span> Clean up this rather ugly function and consider merging with <code>nvf-last-bib</code>.<br />
<div class="outline-text-5" id="text-org6903ce4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">cp-most-recent-download</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>all-files <span style="color: #b1951d;">(</span>directory-files-and-attributes <span style="color: #2d9574;">"~/Downloads"</span>
                                                    t <span style="color: #2d9574;">".*"</span> <span style="color: #2d9574;">"ctime"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>path-and-time <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>
                          <span style="color: #3a81c3;">(</span>list <span style="color: #6c3163;">(</span>first x<span style="color: #6c3163;">)</span>
                                <span style="color: #6c3163;">(</span>eighth x<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>time-order <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>a b<span style="color: #3a81c3;">)</span>
                       <span style="color: #3a81c3;">(</span>time-less-p <span style="color: #6c3163;">(</span>second b<span style="color: #6c3163;">)</span>
                                    <span style="color: #6c3163;">(</span>second a<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>most-recent <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>files<span style="color: #3a81c3;">)</span>
                        <span style="color: #3a81c3;">(</span>car <span style="color: #6c3163;">(</span>car <span style="color: #2d9574;">(</span>sort <span style="color: #887070;">(</span>mapcar path-and-time files<span style="color: #887070;">)</span>
                                        time-order<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">if</span> <span style="color: #67b11d;">(</span>not <span style="color: #b1951d;">(</span>null all-files<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span><span style="color: #3a81c3;">let</span> <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">(</span>most-recent-file <span style="color: #6c3163;">(</span>funcall most-recent all-files<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span>
          <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">progn</span>
            <span style="color: #3a81c3;">(</span>message <span style="color: #6c3163;">(</span>concat <span style="color: #2d9574;">"copying file: "</span> most-recent-file<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
            <span style="color: #3a81c3;">(</span>copy-file most-recent-file
                       <span style="color: #6c3163;">(</span>concat default-directory
                               <span style="color: #2d9574;">(</span>file-name-nondirectory most-recent-file<span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>
                       <span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>message <span style="color: #2d9574;">"No file found in ~/Downloads/"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defun</span> <span style="color: #6c3163; font-weight: bold;">ls-most-recent-download</span> <span style="color: #6c3163;">()</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">)</span>
  <span style="color: #6c3163;">(</span><span style="color: #3a81c3;">let*</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>all-files <span style="color: #b1951d;">(</span>directory-files-and-attributes <span style="color: #2d9574;">"~/Downloads"</span>
                                                    t <span style="color: #2d9574;">".*"</span> <span style="color: #2d9574;">"ctime"</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>path-and-time <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>
                          <span style="color: #3a81c3;">(</span>list <span style="color: #6c3163;">(</span>first x<span style="color: #6c3163;">)</span>
                                <span style="color: #6c3163;">(</span>eighth x<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>time-order <span style="color: #b1951d;">(</span><span style="color: #3a81c3;">lambda</span> <span style="color: #3a81c3;">(</span>a b<span style="color: #3a81c3;">)</span>
                       <span style="color: #3a81c3;">(</span>time-less-p <span style="color: #6c3163;">(</span>second b<span style="color: #6c3163;">)</span>
                                    <span style="color: #6c3163;">(</span>second a<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
         <span style="color: #67b11d;">(</span>most-recent <span style="color: #b1951d;">(</span>car <span style="color: #3a81c3;">(</span>car <span style="color: #6c3163;">(</span>sort <span style="color: #2d9574;">(</span>mapcar path-and-time all-files<span style="color: #2d9574;">)</span>
                                      time-order<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #3a81c3;">if</span> <span style="color: #67b11d;">(</span>not <span style="color: #b1951d;">(</span>null all-files<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span><span style="color: #3a81c3;">progn</span> <span style="color: #b1951d;">(</span>message <span style="color: #3a81c3;">(</span>concat <span style="color: #2d9574;">"newest file in ~/Downloads: "</span> most-recent<span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span>
               most-recent<span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>message <span style="color: #2d9574;">"No file found in ~/Downloads/"</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgc1123c2" class="outline-3">
<h3 id="orgc1123c2">Unicode and Greek letters</h3>
<div class="outline-text-3" id="text-orgc1123c2">
<p>
To insert a unicode character based on its name use <code>C-x 8 RET</code>. Since typically
this is just the Greek letters we can define key bindings for them. A macro
makes this code a little cleaner.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">defmacro</span> <span style="color: #6c3163; font-weight: bold;">nicemacs-greek</span> <span style="color: #6c3163;">(</span>lname<span style="color: #6c3163;">)</span>
    <span style="color: #6c3163;">(</span>list 'progn
          <span style="color: #2d9574;">(</span>list 'defun <span style="color: #67b11d;">(</span>intern <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"nag-%s-small"</span> lname<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span> <span style="color: #67b11d;">()</span>
                <span style="color: #67b11d;">(</span>list 'interactive<span style="color: #67b11d;">)</span>
                <span style="color: #67b11d;">(</span>list 'insert <span style="color: #b1951d;">(</span>char-from-name <span style="color: #3a81c3;">(</span>upcase <span style="color: #6c3163;">(</span>format <span style="color: #2d9574;">"greek small letter %s"</span> lname<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
          <span style="color: #2d9574;">(</span>list 'defun <span style="color: #67b11d;">(</span>intern <span style="color: #b1951d;">(</span>format <span style="color: #2d9574;">"nag-%s-capital"</span> lname<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span> <span style="color: #67b11d;">()</span>
                <span style="color: #67b11d;">(</span>list 'interactive<span style="color: #67b11d;">)</span>
                <span style="color: #67b11d;">(</span>list 'insert <span style="color: #b1951d;">(</span>char-from-name <span style="color: #3a81c3;">(</span>upcase <span style="color: #6c3163;">(</span>format <span style="color: #2d9574;">"greek capital letter %s"</span> lname<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> alpha<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> beta<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> gamma<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> delta<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> theta<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> lambda<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> mu<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> nu<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> rho<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> sigma<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> psi<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">nicemacs-greek</span> omega<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
And now to specify the actual keybindings
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>spacemacs/set-leader-keys
  <span style="color: #2d9574;">"oua"</span> 'nag-alpha-small
  <span style="color: #2d9574;">"ouA"</span> 'nag-alpha-capital
  <span style="color: #2d9574;">"oub"</span> 'nag-beta-small
  <span style="color: #2d9574;">"ouB"</span> 'nag-beta-capital
  <span style="color: #2d9574;">"oug"</span> 'nag-gamma-small
  <span style="color: #2d9574;">"ouG"</span> 'nag-gamma-capital
  <span style="color: #2d9574;">"oud"</span> 'nag-delta-small
  <span style="color: #2d9574;">"ouD"</span> 'nag-delta-capital
  <span style="color: #2d9574;">"outh"</span> 'nag-theta-small
  <span style="color: #2d9574;">"ouTh"</span> 'nag-theta-capital
  <span style="color: #2d9574;">"oul"</span> 'nag-lambda-small
  <span style="color: #2d9574;">"ouL"</span> 'nag-lambda-capital
  <span style="color: #2d9574;">"oum"</span> 'nag-mu-small
  <span style="color: #2d9574;">"ouM"</span> 'nag-mu-capital
  <span style="color: #2d9574;">"oun"</span> 'nag-nu-small
  <span style="color: #2d9574;">"ouN"</span> 'nag-nu-capital
  <span style="color: #2d9574;">"our"</span> 'nag-rho-small
  <span style="color: #2d9574;">"ouR"</span> 'nag-rho-capital
  <span style="color: #2d9574;">"ous"</span> 'nag-sigma-small
  <span style="color: #2d9574;">"ouS"</span> 'nag-sigma-capital
  <span style="color: #2d9574;">"oup"</span> 'nag-psi-small
  <span style="color: #2d9574;">"ouo"</span> 'nag-omega-small<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org22f7d5e" class="outline-3">
<h3 id="org22f7d5e"><span class="todo TODO">TODO</span> XML editing</h3>
<div class="outline-text-3" id="text-org22f7d5e">
<ul class="org-ul">
<li>When viewing SVG, if your emacs supports it, you can switch between source and
a rendered version with <code>C-c C-c</code>.</li>
</ul>
</div>

<div id="outline-container-org6b7b77c" class="outline-4">
<h4 id="org6b7b77c">nXML configuration</h4>
<div class="outline-text-4" id="text-org6b7b77c">
<p>
<code>nxml-mode</code> seems to have better performance when working with large files such
as those used by BEAST. To make <code>nxml-mode</code> the major mode for XML (since
spacemacs uses <code>web-mode</code> by default), we add the following to the
<code>auto-mode-alist</code>. This variable points to a list of patterns and modes to use
for filenames matching those patterns.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>add-to-list 'auto-mode-alist '<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"\\.xml\\'"</span> . nxml-mode<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>add-to-list 'auto-mode-alist '<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"\\.x[ms]l\\'"</span> . nxml-mode<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
For folding to work, you need to have a folding minor mode enabled. The
following snippet means that <code>origami-mode</code> will be enabled each time that
<code>nxml-mode</code> is enabled.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>add-hook 'nxml-mode-hook 'origami-mode<span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Here are some useful keybindings for <code>origami-mode</code>:
</p>

<ul class="org-ul">
<li><code>z c</code> will close/fold the current tag.</li>
<li><code>z o</code> will open/unfold the current tag.</li>
</ul>
</div>
</div>

<div id="outline-container-org1a8cdca" class="outline-4">
<h4 id="org1a8cdca">Useful bindings in <code>web-mode</code></h4>
<div class="outline-text-4" id="text-org1a8cdca">
<ul class="org-ul">
<li><code>M = =</code> will run the relevant web-beautify function<sup><a id="fnr.4" class="footref" href="#fn.4" role="doc-backlink">4</a></sup>.</li>
<li><code>, z</code> will do code folding for web-mode.</li>
<li><code>%</code> will jump between matching tags: evil-mode provides it.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orga08d59e" class="outline-3">
<h3 id="orga08d59e">Yasnippet snippets</h3>
<div class="outline-text-3" id="text-orga08d59e">
<p>
Snippets usually live in <code>~/.emacs.d/private/snippets</code> in a directory which is
named after the major mode for them to be used in. You need to
<code>yas-recompile-all</code> and <code>yas-reload-all</code> for any changes to the snippets to take
effect.
</p>

<p>
<b>WARNING!</b> Tangling this file will write the snippets to your private snippet
directory which is convenient for me but may not be desirable for everyone. It
is set this way so that I don't have to remember to copy the tangled files over
all the time. To generate the directories that the snippets will be tangled to
you can run the following.
</p>

<p>
The <code>files--ensure-directory</code> function will create these directories if they do
not already exist.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #3a81c3;">(</span>files--ensure-directory <span style="color: #2d9574;">"~/.emacs.d/private/snippets/ess-r-mode"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>files--ensure-directory <span style="color: #2d9574;">"~/.emacs.d/private/snippets/org-mode"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3;">(</span>files--ensure-directory <span style="color: #2d9574;">"~/.emacs.d/private/snippets/python-mode"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org41da6e6" class="outline-4">
<h4 id="org41da6e6">Yasnippet configuration</h4>
<div class="outline-text-4" id="text-org41da6e6">
<p>
For some unknown reason, when I try to insert a snippet in the JSON mode I get
an error, "No JavaScript AST available". Things are working fine in other modes
so this might be something javascript specific, in which case, it is probably
easier just to call <code>yas-insert-snippet</code> directly when editing JSON.
</p>
</div>
</div>

<div id="outline-container-org1264c5d" class="outline-4">
<h4 id="org1264c5d">Org-mode</h4>
<div class="outline-text-4" id="text-org1264c5d">
<p>
I have had trouble getting my own org-mode snippets to play well with the
default ones in the past. The solution I arrived at was to just copy all of the
default ones into my snippet folder.
</p>
</div>

<ul class="org-ul">
<li><a id="org2fb46f3"></a>Figures and Images<br />
<div class="outline-text-5" id="text-org2fb46f3">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Include image with caption and label</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: nicemacs-image</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#+caption: WRITE A CAPTION!</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#+name: fig:thing</span>
#+attr_org: :width <span style="color: #4e3163;">500px</span>
#+attr_html: :width <span style="color: #4e3163;">400px</span>
<span style="color: #3a81c3;">[</span><span style="color: #6c3163;">[</span>./path/to/image.png<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">]</span>

Here is a link to <span style="color: #3a81c3;">[</span><span style="color: #6c3163;">[</span>fig:thing<span style="color: #6c3163;">][</span>that thing<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">]</span>.
</pre>
</div>
</div>
</li>

<li><a id="org32800bf"></a>Equations<br />
<div class="outline-text-5" id="text-org32800bf">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Include equation with name and label</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: nicemacs-equation</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#+name: eq:thing</span>
\[
e = m c^<span style="color: #3a81c3;">{</span><span style="color: #4e3163;">2</span><span style="color: #3a81c3;">}</span>
\]

Here is a link to Equation <span style="color: #3a81c3;">[</span><span style="color: #6c3163;">[</span>eq:thing<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">]</span>.
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgb475d6d" class="outline-4">
<h4 id="orgb475d6d">Python</h4>
<div class="outline-text-4" id="text-orgb475d6d">
<p>
Here are a bunch of standard packages for statistical work
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Standard python packages</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: pypacks</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>
import pandas as pd
import numpy as np
import scipy.stats as stats
import statsmodels.api as sm
import statsmodels.formula.api as smf
import matplotlib.pyplot as plt
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb660116" class="outline-4">
<h4 id="orgb660116">R</h4>
<div class="outline-text-4" id="text-orgb660116">
<p>
The R snippets can be roughly devided into those that provide useful <a href="#org62d98e8">Useful package collections</a> and those that provide <a href="#orgb06e67b">Useful programming snippets</a>.
</p>
</div>

<ul class="org-ul">
<li><a id="org62d98e8"></a>Useful package collections<br />
<div class="outline-text-5" id="text-org62d98e8">
<p>
Here are some basic packages and configuration that are useful to import at the
start.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Standard R packages</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rpacks</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>
suppressPackageStartupMessages<span style="color: #3a81c3;">(</span>library<span style="color: #6c3163;">(</span>dplyr<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>reshape2<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>ggplot2<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>magrittr<span style="color: #3a81c3;">)</span>
suppressPackageStartupMessages<span style="color: #3a81c3;">(</span>library<span style="color: #6c3163;">(</span>purrr<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>jsonlite<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>stringr<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>cowplot<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>xml2<span style="color: #3a81c3;">)</span>
set.seed<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
Here is a collection of packages that are useful for some of the statistical
work I do.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Extra R packages</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: extra-rpacks</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>
library<span style="color: #3a81c3;">(</span>ape<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>coda<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>countrycode<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>mcmc<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>phangorn<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>sf<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="orgb06e67b"></a>Useful programming snippets<br />
<ul class="org-ul">
<li><a id="org8328724"></a>Comment to break up sections of a file<br />
<div class="outline-text-6" id="text-org8328724">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Use a comment to put a horizontal line across the file</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-horizontal-line</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># ==============================================================================</span>
</pre>
</div>
</div>
</li>

<li><a id="orgb083b8c"></a>Saving ggplot2 figures<br />
<div class="outline-text-6" id="text-orgb083b8c">
<p>
This snippet offers some sensible default values for saving <code>ggplot2</code> figures.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Save a ggplot2 figure to default paper sizes</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-ggsave</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

ggsave<span style="color: #3a81c3;">(</span>filename = <span style="color: #3a81c3;">$</span><span style="color: #2d9574;">1</span>,
       plot = <span style="color: #3a81c3;">$</span><span style="color: #2d9574;">2</span>,
       ## A5 height = <span style="color: #4e3163;">14</span>.<span style="color: #4e3163;">8</span>, width = <span style="color: #4e3163;">21</span>.<span style="color: #4e3163;">0</span>,
       ## A6 height = <span style="color: #4e3163;">10</span>.<span style="color: #4e3163;">5</span>, width = <span style="color: #4e3163;">14</span>.<span style="color: #4e3163;">8</span>,
       ## A7 height = <span style="color: #4e3163;">7</span>.<span style="color: #4e3163;">4</span>, width = <span style="color: #4e3163;">10</span>.<span style="color: #4e3163;">5</span>,
       units = <span style="color: #2d9574;">"cm"</span><span style="color: #3a81c3;">)</span>

<span style="color: #dc752f; background-color: #fbf8ef;">$</span><span style="color: #2d9574;">0</span>
</pre>
</div>
</div>
</li>

<li><a id="org3225e7d"></a>Saving ggplot2 figures only when run in batch<br />
<div class="outline-text-6" id="text-org3225e7d">
<p>
This snippet offers some sensible default values for saving <code>ggplot2</code> figures.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Save a ggplot2 figure to default paper sizes only when run in batch</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-ggsave-batch</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

if <span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">interactive</span><span style="color: #6c3163;">()</span><span style="color: #3a81c3;">)</span> <span style="color: #3a81c3;">{</span>
  warning<span style="color: #6c3163;">(</span>
    <span style="color: #2d9574;">"Printing the figure without saving. If you want this saved "</span>,
    <span style="color: #2d9574;">"run this script non-interactively."</span>
  <span style="color: #6c3163;">)</span>
  print<span style="color: #6c3163;">(</span><span style="color: #3a81c3;">$</span><span style="color: #2d9574;">1</span><span style="color: #6c3163;">)</span>
<span style="color: #3a81c3;">}</span> <span style="color: #dc752f; background-color: #fbf8ef;">else </span><span style="color: #3a81c3; background-color: #fbf8ef;">{</span>
  ggsave<span style="color: #6c3163;">(</span>filename = <span style="color: #3a81c3;">$</span><span style="color: #2d9574;">2</span>,
         plot = <span style="color: #3a81c3;">$</span><span style="color: #2d9574;">1</span>,
         ## A5 height = <span style="color: #4e3163;">14</span>.<span style="color: #4e3163;">8</span>, width = <span style="color: #4e3163;">21</span>.<span style="color: #4e3163;">0</span>,
         ## A6 height = <span style="color: #4e3163;">10</span>.<span style="color: #4e3163;">5</span>, width = <span style="color: #4e3163;">14</span>.<span style="color: #4e3163;">8</span>,
         ## A7 height = <span style="color: #4e3163;">7</span>.<span style="color: #4e3163;">4</span>, width = <span style="color: #4e3163;">10</span>.<span style="color: #4e3163;">5</span>,
         units = <span style="color: #2d9574;">"cm"</span><span style="color: #6c3163;">)</span>
<span style="color: #3a81c3;">}</span>

<span style="color: #dc752f; background-color: #fbf8ef;">$</span><span style="color: #2d9574;">0</span>
</pre>
</div>
</div>
</li>

<li><a id="org30b1116"></a>Writing CSV<br />
<div class="outline-text-6" id="text-org30b1116">
<p>
A snippet with sensible defaults for writing a data frame to CSV
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: CSV output from R using write.table</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-table</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

write.table<span style="color: #3a81c3;">(</span>x = <span style="color: #3a81c3;">$</span><span style="color: #2d9574;">1</span>,
            file = <span style="color: #3a81c3;">$</span><span style="color: #2d9574;">2</span>,
            sep = <span style="color: #2d9574;">","</span>,
            row.names = FALSE<span style="color: #3a81c3;">)</span>

<span style="color: #dc752f; background-color: #fbf8ef;">$</span><span style="color: #2d9574;">0</span>
</pre>
</div>
</div>
</li>

<li><a id="org1366412"></a>Writing JSON<br />
<div class="outline-text-6" id="text-org1366412">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: JSON output from R using jsonlite</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-json-output</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

jsonlite::write_json<span style="color: #3a81c3;">(</span>
  x = <span style="color: #3a81c3;">$</span><span style="color: #2d9574;">1</span>,
  path = <span style="color: #3a81c3;">$</span><span style="color: #2d9574;">2</span>,
  auto_unbox = T
<span style="color: #3a81c3;">)</span>

<span style="color: #3a81c3;">$</span><span style="color: #2d9574;">0</span>
</pre>
</div>
</div>
</li>

<li><a id="org71c659d"></a>Writing HTML<br />
<div class="outline-text-6" id="text-org71c659d">
<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Programmatically generating HTML</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-html</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>
library<span style="color: #3a81c3;">(</span>htmltools<span style="color: #3a81c3;">)</span>
library<span style="color: #3a81c3;">(</span>base64enc<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#' An HTML tag encoding an image stored in a PNG.</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#'</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#' This uses the \code</span><span style="color: #3a81c3; background-color: #ecf3ec;">{</span><span style="color: #2aa1ae; background-color: #ecf3ec;">base64enc</span><span style="color: #3a81c3; background-color: #ecf3ec;">}</span><span style="color: #2aa1ae; background-color: #ecf3ec;"> and \code</span><span style="color: #3a81c3; background-color: #ecf3ec;">{</span><span style="color: #2aa1ae; background-color: #ecf3ec;">htmltools</span><span style="color: #3a81c3; background-color: #ecf3ec;">}</span><span style="color: #2aa1ae; background-color: #ecf3ec;"> packages.</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#'</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#' @param filepath is the path to the PNG</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#' @param ... is additional arguments to \code</span><span style="color: #3a81c3; background-color: #ecf3ec;">{</span><span style="color: #2aa1ae; background-color: #ecf3ec;">tags$img</span><span style="color: #3a81c3; background-color: #ecf3ec;">}</span><span style="color: #2aa1ae; background-color: #ecf3ec;"> such as style.</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#'</span>
png_as_img &lt;- function<span style="color: #3a81c3;">(</span>filepath, ...<span style="color: #3a81c3;">)</span> <span style="color: #3a81c3;">{</span>
  if <span style="color: #6c3163;">(</span>tools::file_ext<span style="color: #2d9574;">(</span>filepath<span style="color: #2d9574;">)</span> == <span style="color: #2d9574;">"png"</span><span style="color: #6c3163;">)</span> <span style="color: #6c3163;">{</span>
    b64 &lt;- base64enc::base64encode<span style="color: #2d9574;">(</span>what = filepath<span style="color: #2d9574;">)</span>
    tags$img<span style="color: #2d9574;">(</span>
      src = paste<span style="color: #67b11d;">(</span><span style="color: #2d9574;">"data:image/png;base64"</span>, b64, sep = <span style="color: #2d9574;">","</span><span style="color: #67b11d;">)</span>,
      ...
    <span style="color: #2d9574;">)</span>
  <span style="color: #6c3163;">}</span> <span style="color: #dc752f; background-color: #fbf8ef;">else </span><span style="color: #6c3163; background-color: #fbf8ef;">{</span>
    stop<span style="color: #2d9574;">(</span><span style="color: #2d9574;">"Filepath given to png_as_img must be a PNG."</span><span style="color: #2d9574;">)</span>
  <span style="color: #6c3163;">}</span>
<span style="color: #3a81c3;">}</span>

html_body &lt;-
  tags$body<span style="color: #3a81c3;">(</span>
    tags$h1<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"Hello World!"</span><span style="color: #6c3163;">)</span>
  <span style="color: #3a81c3;">)</span>

<span style="color: #dc752f; background-color: #fbf8ef;">save_html</span><span style="color: #3a81c3; background-color: #fbf8ef;">(</span><span style="color: #dc752f; background-color: #fbf8ef;">html_body, file = </span><span style="color: #dc752f; background-color: #fbf8ef;">"index.html"</span><span style="color: #3a81c3; background-color: #fbf8ef;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="org7003dbd"></a>Main function<br />
<div class="outline-text-6" id="text-org7003dbd">
<p>
A snippet to provide a main function which only runs when the script is called
from the command line and passes any command line arguments through.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Main function for an R script to be used at the command line</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-main</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

main &lt;- function<span style="color: #3a81c3;">(</span>args<span style="color: #3a81c3;">)</span> <span style="color: #3a81c3;">{</span>
  <span style="color: #3a81c3;">$</span><span style="color: #2d9574;">0</span>
<span style="color: #3a81c3;">}</span>

if <span style="color: #3a81c3;">(</span>!interactive<span style="color: #6c3163;">()</span><span style="color: #3a81c3;">)</span> <span style="color: #3a81c3;">{</span>
  args &lt;- commandArgs<span style="color: #6c3163;">(</span>trailingOnly = TRUE<span style="color: #6c3163;">)</span>
  # if you are using argparse this might help...
  # args &lt;- parser$parse_args<span style="color: #6c3163;">()</span>
  main<span style="color: #6c3163;">(</span>args<span style="color: #6c3163;">)</span>
<span style="color: #3a81c3;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org9ce0da9"></a>Parse command line arguments<br />
<div class="outline-text-6" id="text-org9ce0da9">
<p>
The <a href="https://cran.r-project.org/web/packages/argparse/index.html">argparse</a> library, inspired by the python equivalent, provides a simple way
to build up CLIs.
</p>

<div class="org-src-container">
<pre class="src src-snippet"><span style="color: #2aa1ae; background-color: #ecf3ec;"># -*- mode: snippet -*-</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># name: Example of how to use the argparse library</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># key: rhelp-argparse</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># --</span>

library<span style="color: #3a81c3;">(</span>argparse<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># create parser object</span>
parser &lt;- ArgumentParser<span style="color: #3a81c3;">()</span>

parser$add_argument<span style="color: #3a81c3;">(</span>
         <span style="color: #2d9574;">"-v"</span>,
         <span style="color: #2d9574;">"--verbose"</span>,
         action = <span style="color: #2d9574;">"store_true"</span>,
         default = FALSE,
         help = <span style="color: #2d9574;">"Verbose output"</span>
       <span style="color: #3a81c3;">)</span>
parser$add_argument<span style="color: #3a81c3;">(</span>
         <span style="color: #2d9574;">"-s"</span>,
         <span style="color: #2d9574;">"--seed"</span>,
         type = <span style="color: #2d9574;">"integer"</span>,
         default = <span style="color: #4e3163;">1</span>,
         help = <span style="color: #2d9574;">"PRNG seed"</span>
       <span style="color: #3a81c3;">)</span>
parser$add_argument<span style="color: #3a81c3;">(</span>
         <span style="color: #2d9574;">"-p"</span>,
         <span style="color: #2d9574;">"--parameters"</span>,
         type = <span style="color: #2d9574;">"character"</span>,
         help = <span style="color: #2d9574;">"Filepath to parameters JSON"</span>
       <span style="color: #3a81c3;">)</span>

<span style="color: #dc752f; background-color: #fbf8ef;">args &lt;- parser$parse_args</span><span style="color: #3a81c3; background-color: #fbf8ef;">()</span>
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
While hiding the delimiters improves the reading experience, I found that
while editing text having them there but not visible was frustrating.
Consequently I now have them visible.
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
The <code>add-to-list</code> function is used to add elements to the start of a
list, this should only be used in configuration code; use <code>push</code> to add elements
to a list in emacs-lisp.
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3" role="doc-backlink">3</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
There is a package, <code>treemacs</code>, which provides a systematic way to visit
regularly used files and directories, but I felt it was a bit bulky.
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4" role="doc-backlink">4</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
You can use a <code>.jsbeautifyrc</code> file to configure the formatting.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Alexander E. Zarebski</p>
<p class="date">Created: 2022-12-11 Sun 13:18</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
